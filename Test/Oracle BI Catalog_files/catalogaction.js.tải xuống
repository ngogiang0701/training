if(!saw.catalogaction){saw.catalogaction=function(){};saw.catalogaction.setEnableExportDashPageToBip=function(a){saw.catalogaction.enableExportDashPageToBip=a};saw.catalogaction.setCreateList=function(a){saw.catalogaction.creatableObjectTypes=a};saw.catalogaction.getCreateList=function(){return saw.catalogaction.creatableObjectTypes};saw.catalogaction.canSeePermissionsDialogUI=function(){var b=saw.catalog.getPrivilege("canChangePermissions");var a=saw.catalog.getPrivilege("canSeePermissionsUIDialog");return a&&b};saw.catalogaction.CreatableItemGroup=function(a){this.name=a.name;this.description=a.description;this.iconMedium=a.iconMedium;this.items=a.items};saw.catalogaction.CreatableItemType=function(a){this.signature=a.signature;this.subType=a.subType;this.handlerId=a.handlerId;this.name=a.name;this.description=a.description;this.newIcon=a.newIcon};saw.catalogaction.ActionId={EXPAND:"expand",ARCHIVE:"archive",UNARCHIVE:"unarchive",UPLOAD:"upload",OPEN:"open",OPENWITHSEARCHFILTER:"openWithSearchFilter",EDIT:"edit",EDIT_IN_CATALOG_PANE:"editInCatalogPane",VIEW:"view",PRINTAS:"printAs",PRINT_PDF:"printToPDF",PRINT_HTML:"printToHTML",PRINT_SEPARATELINE:"printToLine",NEW:"new",DELETE:"delete",COPY:"copy",PASTE:"paste",RENAME:"rename",LINK:"link",PROPERTIES:"properties",PERMISSIONS:"permissions",PUBLISH:"publish",RSS:"rss",CREATEKPICONTRIBUTIONWHEEL:"createKPIContributionWheel",EXPORT:"export",EXPORT_EXCEL_GROUP:"exportExcelGroup",EXPORT_EXCEL2K:"exportExcel2K",EXPORT_EXCEL:"exportExcel",EXPORT_POWERPOINT_GROUP:"exportPowerpointGroup",EXPORT_POWERPOINT:"exportPowerpoint",EXPORT_POWERPOINT_2007:"exportPowerpoint2007",EXPORT_DATA:"exportData",EXPORT_MHTML:"exportMhtml",EXPORT_PDF:"exportPdf",EXPORT_DATAGROUP:"exportDataGroup",EXPORT_CSV:"exportCSV",EXPORT_TABDELIMITED:"exportTabDelimited",EXPORT_XML:"exportXML",EXPORT_CURPAGE:"exportCurPage",EXPORT_WHOLEDASH:"exportWholeDash",EXPORT_SEPARATELINE:"exportToLine",MOREDETAIL:"moreDetail",LESSDETAIL:"lessDetail",IBOTRUN:"ibotRun",IBOTSUBSCRIBE:"ibotSubscribe",IBOTUNSUBSCRIBE:"ibotUnsubscribe",IBOTENABLESCHEDULE:"ibotEnableSchedule",IBOTDISABLESCHEDULE:"ibotDisableSchedule",IBOTCUSTOMIZE:"ibotCustomize",ACTIONEXECUTE:"actionExecute",IBOTNEW:"ibotNew",EMAIL:"deliverEmail",DOWNLOAD:"download",SCHEDULE:"schedule",HISTORY:"history",ADDTOBRIEFBOOK:"addToBriefBook",FROPENINPDF:"openInPdf",FROPENINEDITOR:"openInEditor",FROPENCOMPLETEBOOKINPDF:"openCompleteBookInPdf",ADDTOFAVORITES:"addToFavorites",REMOVEFROMFAVORITES:"removeFromFavorites"};saw.catalogaction.NonSupportedObjectsActionIDs=[saw.catalogaction.ActionId.DELETE,saw.catalogaction.ActionId.ARCHIVE,saw.catalogaction.ActionId.PROPERTIES,saw.catalogaction.ActionId.EXPAND];saw.catalogaction.ItemAction=function(f,a,e,b,d,c){this.id=f;this.name=a;this.desc=e;this.icon=b;this.disabledIcon=d;this.group=c};saw.catalogaction.ActionGroup=function(e,d,a,c,b){this.groupId=e;this.parentGroupId=d;this.name=a;this.desc=c;this.icon=b;this.actions=null};saw.catalogaction.ActionContext=function(a,b){this.targetWindow=a;this.evt=b};saw.catalogaction.ActionManager=function(){if(saw.catalogaction.actionManager){return saw.catalogaction.actionManager}saw.catalogaction.ActionManager.baseConstructor.call(this);this.actionHandlers={};this.resourceManager=obips.ResourceManager.getSingleton();this.allActions=null;saw.catalogaction.actionManager=this};saw.extend(saw.catalogaction.ActionManager,obips.Observable);saw.catalogaction.ActionManager.EventType=function(){};saw.catalogaction.ActionManager.EventType.ACTION_LIST_UPDATED="actionListUpdated";saw.catalogaction.ActionManager.ActionListUpdatedEventContext=function(g,b,a){this.path=g;this.replace=a!=null?a:false;if(b){var c=new Object;var j=new Array();var k=new Array();var e=saw.catalogaction.getActionManager();this.actions=new Array;for(var h=0;h<b.length;h++){var f=e.findItemAction(b[h]);if(f){if(f.groupId){if(f.parentGroupId&&c[f.parentGroupId]){c[f.parentGroupId].actions.push(f)}else{j.push(f)}f.actions=new Array();c[f.groupId]=f}else{if(f.group){var d=c[f.group];if(d){d.actions.push(f)}else{j.push(f)}}else{j.push(f)}}}}this.actions=j}};saw.catalogaction.ActionManager.ObjectCreationContext=function(c,b,a){this.creatableItemType=c;this.subType=c.subType;this.tBrowserEvt=(null!=b)?b:window.event;saw.catalogaction.ActionManager.ObjectCreationContext.baseConstructor.call(this,a,this.tBrowserEvt)};saw.extend(saw.catalogaction.ActionManager.ObjectCreationContext,saw.catalogaction.ActionContext);saw.catalogaction.getActionManager=function(){if(!saw.catalogaction.actionManager){saw.catalogaction.actionManager=new saw.catalogaction.ActionManager();saw.catalogaction.actionManager.registerAllHandlers()}return saw.catalogaction.actionManager};saw.catalogaction.ActionManager.prototype.buildAllItemActionList=function(){this.allActions={};var b=saw.catalogaction.ActionId;var a=saw.catalog.getPrivilege("bNativeExcelEnabled");this.allActions[b.EXPORT]=new saw.catalogaction.ActionGroup(b.EXPORT,null,saw.catalog.getLocalizedString("kmsgCatalogActionExport"),"",saw.catalog.getImgUrl("common/export_ena.png"));this.allActions[b.EXPORT_DATAGROUP]=new saw.catalogaction.ActionGroup(b.EXPORT_DATAGROUP,b.EXPORT,saw.catalog.getLocalizedString("kmsgCatalogActionExportData"),"",saw.catalog.getImgUrl("catalog/exporttocsv_ena.png"));if(a){this.allActions[b.PRINTAS]=new saw.catalogaction.ActionGroup(b.PRINTAS,null,saw.catalog.getLocalizedString("kmsgCatalogActionPrint"),"",saw.catalog.getImgUrl("catalog/print_ena.png"))}this.addAction(b.EXPAND,"kmsgCatalogActionExpand","catalog/folderopen_ena.png","catalog/folderopen_dis.png").addAction(b.ARCHIVE,"kmsgCatalogActionArchive","catalog/archive_ena.png","catalog/archive_dis.png").addAction(b.UNARCHIVE,"kmsgCatalogActionUnArchive","catalog/archive_ena.png","catalog/archive_dis.png").addAction(b.UPLOAD,"kmsgCatalogActionUpload","catalog/fileUpload_ena.png","catalog/fileUpload_dis.png").addAction(b.OPEN,"kmsgCatalogActionOpen","catalog/view_ena.png","catalog/view_dis.png").addAction(b.OPENWITHSEARCHFILTER,"kmsgCatalogActionOpenWithSearchFilter","catalog/view_ena.png","catalog/view_dis.png").addAction(b.EDIT,"kmsgCatalogActionEdit","catalog/edit_ena.png","catalog/edit_dis.png").addAction(b.PUBLISH,"kmsgCatalogActionPublish","catalog/publish_ena.png","catalog/publish_dis.png").addAction(b.RSS,"kmsgCatalogActionRss","rss_ena","rss_dis").addAction(b.CREATEKPICONTRIBUTIONWHEEL,"kmsgCatalogActionViewKPICW","kpicw_ena","kpicw_dis").addAction(b.DELETE,"kmsgCatalogActionDelete","delete_ena","delete_dis").addAction(b.COPY,"kmsgCatalogActionCopy","catalog/copy_ena.png","catalog/copy_dis.png").addAction(b.PASTE,"kmsgCatalogActionPaste","catalog/paste_ena.png","catalog/paste_dis.png").addAction(b.RENAME,"kmsgCatalogActionRename","catalog/rename_ena.png","catalog/rename_dis.png").addAction(b.LINK,"kmsgCatalogActionLink","catalog/link_ena.png","catalog/link_dis.png").addAction(b.PRINT_PDF,"kmsgCatalogActionPrintAsPDF","catalog/printtopdf_ena.png",null,b.PRINTAS).addAction(b.PRINT_HTML,"kmsgCatalogActionPrintAsHTML","catalog/printtohtml_ena.png",null,b.PRINTAS).addAction(b.PRINT_SEPARATELINE,null,null,null,b.PRINTAS).addAction(b.PROPERTIES,"kmsgCatalogActionProperties","catalog/properties_ena.png","catalog/properties_dis.png").addAction(b.PERMISSIONS,"kmsgCatalogActionPermissions","catalog/permissions_ena.png","catalog/permissions_dis.png").addAction(b.MOREDETAIL,"kmsgCatalogActionMoreDetails","catalog/more_details.gif").addAction(b.LESSDETAIL,"kmsgCatalogActionLessDetails","catalog/more_details.gif").addAction(b.EXPORT_POWERPOINT_2007,"kmsgCatalogActionExportPowerpoint2007","catalog/exporttoppt_ena.png",null,b.EXPORT).addAction(b.EXPORT_DATA,"kmsgCatalogActionExportData","catalog/exporttocsv_ena.png",null,b.EXPORT).addAction(b.EXPORT_MHTML,"kmsgCatalogActionExportMhtml","catalog/exporttomhtml_ena.png",null,b.EXPORT).addAction(b.EXPORT_PDF,"kmsgCatalogActionExportPdf","catalog/exporttopdf_ena.png",null,b.EXPORT).addAction(b.EXPORT_CSV,"kmsgCatalogActionExportDefaultCSV","catalog/exporttocsv_ena.png",null,b.EXPORT_DATAGROUP).addAction(b.EXPORT_TABDELIMITED,"kmsgCatalogActionExportTabDelimited","catalog/exporttocsv_ena.png",null,b.EXPORT_DATAGROUP).addAction(b.EXPORT_XML,"kmsgCatalogActionExportXML","catalog/exporttoxml_ena.png",null,b.EXPORT_DATAGROUP).addAction(b.EXPORT_CURPAGE,"kmsgCatalogActionExportCurrentPage","catalog/exporttoexcel_ena.png",null,b.EXPORT).addAction(b.EXPORT_WHOLEDASH,"kmsgCatalogActionExportEntireDashboard","catalog/exporttoexcel_ena.png",null,b.EXPORT).addAction(b.EXPORT_SEPARATELINE,null,null,null,b.EXPORT).addAction(b.IBOTRUN,"kmsgCatalogActionRun","catalog/ibot_run.png").addAction(b.IBOTSUBSCRIBE,"kmsgCatalogActionSubscribe","catalog/ibot_subscribe.png").addAction(b.IBOTUNSUBSCRIBE,"kmsgCatalogActionUnsubscribe","catalog/ibot_unsubscribe.png").addAction(b.IBOTENABLESCHEDULE,"kmsgCatalogActionEnable","runibotnow_ena.png").addAction(b.IBOTDISABLESCHEDULE,"kmsgCatalogActionDisable","runibotnow_dis.png").addAction(b.IBOTCUSTOMIZE,"kmsgCatalogActionCustomizeSubscription","catalog/ibot_customize.png").addAction(b.IBOTNEW,"kmsgCatalogIBotNew","catalog/ibot_customize.png").addAction(b.ACTIONEXECUTE,"kmsgCatalogActionExecute","catalog/ibot_run.png").addAction(b.EMAIL,"kmsgCatalogEmail","catalog/email.gif").addAction(b.DOWNLOAD,"kmsgCatalogActionDownload","catalog/download_ena.png").addAction(b.SCHEDULE,"kmsgCatalogActionSchedule","catalog/scheduler_ena.png").addAction(b.HISTORY,"kmsgCatalogActionHistory","catalog/history_ena.png").addAction(b.ADDTOBRIEFBOOK,"kmsgCatalogActionAddToBB","catalog/addtobb_ena.png").addAction(b.FROPENINPDF,"kmsgCatalogFRActionOpenInPDF","catalog/view_ena.png").addAction(b.FROPENINEDITOR,"kmsgCatalogFRActionOpenInEditor","catalog/view_ena.png").addAction(b.FROPENCOMPLETEBOOKINPDF,"kmsgCatalogFRActionOpenCompleteBookInPDF","catalog/view_ena.png").addAction(b.ADDTOFAVORITES,"kmsgAddToFavorites","catalog/addtofavorites_ena.png").addAction(b.REMOVEFROMFAVORITES,"kmsgRemoveFromFavorites","catalog/removefromfavorites_ena.png");if(a){this.addAction(b.EXPORT_EXCEL,"kmsgCatalogActionExportExcel2007","catalog/exporttoexcel_ena.png",null,b.EXPORT)}else{this.addAction(b.EXPORT_EXCEL2K,"kmsgCatalogActionExportExcel","catalog/exporttoexcel_ena.png",null,b.EXPORT)}};saw.catalogaction.ActionManager.prototype.buildBipLayoutItemActionList=function(c,a){if(!this.allActions){return}if(c.length==0){this.addAction("printToUnknown","kmsgCatalogActionNoPrintLayout",null,null,saw.catalogaction.ActionId.PRINTAS);return}for(var b=0;b<c.length;b++){if(c[b]=="Printable PDF"||c[b]=="Printable HTML"||c[b]=="currentPage"||c[b]=="entireDashboard"){continue}else{if(a=="pdf"){this.addAction("printTo"+c[b],c[b],"catalog/printtopdf_ena.png",null,saw.catalogaction.ActionId.PRINTAS)}else{if(a=="excel"){this.addAction("exportTo"+c[b],c[b],"catalog/exporttoexcel_ena.png",null,saw.catalogaction.ActionId.EXPORT)}}}}};saw.catalogaction.ActionManager.prototype.addAction=function(f,a,b,e,c,d){this.allActions[f]=new saw.catalogaction.ItemAction(f,saw.catalog.getLocalizedString(a),d&&saw.catalog.getLocalizedString(d),b&&saw.catalog.getImgUrl(b),e&&saw.catalog.getImgUrl(e),c);return this};saw.catalogaction.ActionManager.getContextMenuGroupMap=function(){if(!this.groupMap){var a=saw.catalogaction.ActionId;this.groupMap=new Object();this.groupMap[a.LINK]=1;this.groupMap[a.ARCHIVE]=1;this.groupMap[a.UNARCHIVE]=1;this.groupMap[a.UPLOAD]=1;this.groupMap[a.PROPERTIES]=2;this.groupMap[a.PERMISSIONS]=2}return this.groupMap};saw.catalogaction.ActionManager.prototype.findItemAction=function(a,b){if(!this.allActions){this.buildAllItemActionList()}var c=null;if(a!=null&&a.actinID!=null){c=this.allActions[a.actinID]}else{c=this.allActions[a]}if(c&&b){c.disabled=a.disabled?true:false}return c};saw.catalogaction.ActionManager.prototype.getAllowedActions=function(m,c){var a=null;if(m.isSupported()){var k=this.findActionHandler(saw.catalogaction.ActionHandlerFinder.createByItemInfo(m));if(k){a=k.getAllowedActionIds(m,c)}}else{a=this.getDefaultActions(m,null,false,false);a=this.getActionsForNonSupportedObject(a)}if(!a){a=this.getDefaultActions(m,null,false,false)}var e=saw.catalogaction.ActionManager.getContextMenuGroupMap();var b=new Object;var h=new Array();var j=new Array();for(var g=0;g<a.length;g++){var f=this.findItemAction(a[g],true);if(f){if(f.groupId){if(f.parentGroupId&&b[f.parentGroupId]){b[f.parentGroupId].actions.push(f)}else{h.push(f)}f.actions=new Array();b[f.groupId]=f}else{if(f.group){var d=b[f.group];if(d){d.actions.push(f)}else{h.push(f)}}else{if(e[f.id]){if(j[e[f.id]]){j[e[f.id]].push(f)}else{var l=new Array();j[e[f.id]]=l;l.push(f)}}else{h.push(f)}}}}}for(var g=1;g<j.length;g++){if((h.length>0&&h[g-1]!=null)&&j[g]!=null){h.push(null)}if(j[g]!=null){h=h.concat(j[g])}}h.pending=a.pending;return h};saw.catalogaction.ActionManager.prototype.getActionsForNonSupportedObject=function(d){var a=[];for(var b=0;b<d.length;b++){var c=d[b];if(c.actinID){if(saw.catalogaction.NonSupportedObjectsActionIDs.indexOf(c.actinID)!=-1){a.push(c)}}else{if(saw.catalogaction.NonSupportedObjectsActionIDs.indexOf(c)!=-1){a.push(c)}}}return a};saw.catalogaction.ActionManager.prototype.getDefaultActions=function(j,a,b,h){if(!a){a=[]}var e=j.type==obips.catalog.ItemType.LINK;var i=j.getFolderType(true);var k=i&&i!=obips.catalog.FolderType.OBJECT;var d=j.targetSignature||j.signature;if(k){a.push(saw.catalogaction.ActionId.EXPAND);if(j.getFolderType()&&saw.catalog.getPrivilege("canSubscribeRss")){a.push(saw.catalogaction.ActionId.RSS)}}else{var f=j.getObjectTypeInfo();var c=f?f.editPrivilege:false;var g=(j.operationPermissions&obips.catalog.OperationPermissions.READ)==obips.catalog.OperationPermissions.READ;if(c&&g){a.push(saw.catalogaction.ActionId.EDIT)}if(b!==false){a.push(saw.catalogaction.ActionId.PRINTAS);a.push(saw.catalogaction.ActionId.PRINT_HTML);if(h){a.push(saw.catalogaction.ActionId.PRINT_PDF)}else{a.push(saw.catalogaction.ActionId.toDisabledAction(saw.catalogaction.ActionId.PRINT_PDF))}}}return this.addCommonActions(j,a)};saw.catalogaction.ActionId.toDisabledAction=function(a){return{actinID:a,disabled:true}};saw.catalogaction.ActionManager.prototype.addCommonActions=function(h,c){var n=h.getFolderType()?(h.permissions==obips.catalog.ItemPermissions.EXECUTE):false;if(n){return c}var t=(h.operationPermissions&obips.catalog.OperationPermissions.WRITE)==obips.catalog.OperationPermissions.WRITE;var p=(h.operationPermissions&obips.catalog.OperationPermissions.READ)==obips.catalog.OperationPermissions.READ;var f=(h.operationPermissions&obips.catalog.OperationPermissions.DELETE)==obips.catalog.OperationPermissions.DELETE;var w=(h.operationPermissions&obips.catalog.OperationPermissions.RENAME)==obips.catalog.OperationPermissions.RENAME;var x=h.type==obips.catalog.ItemType.LINK;var s=h.type==obips.catalog.ItemType.FOLDER||x&&h.targetType==obips.catalog.ItemType.FOLDER;var a=s&&(h.getCompositeSignature(true)=="dashboardgroupfolder1");var e=h.getFolderType();var i=e==obips.catalog.FolderType.FOLDER;var b=false;var l=h.path;if(l){var q=globalRegister.getObject("clipboard");if(q&&q.object.length>0){if(t&&s){var g=this.findActionHandler(saw.catalogaction.ActionHandlerFinder.createByItemInfo(h));if(g==null){b=true}else{b=g.isPasteAccepted(h)}}if(b&&h.path=="/shared"){b=!saw.catalog.CatalogManagerHelper.hasObjects(q.object)}}}if(h.promptString){c.push(saw.catalogaction.ActionId.OPENWITHSEARCHFILTER)}if(saw.catalog.CatalogView){if(f){c.push(saw.catalogaction.ActionId.DELETE)}else{c.push(saw.catalogaction.ActionId.toDisabledAction(saw.catalogaction.ActionId.DELETE))}var v=(h.getFolderType()!=null&&h.getFolderType()!=obips.catalog.ItemType.FOLDER)?(h.permissions&obips.catalog.ItemPermissions.EXECUTE)==obips.catalog.ItemPermissions.EXECUTE:true;if(p&&v){c.push(saw.catalogaction.ActionId.COPY)}else{c.push(saw.catalogaction.ActionId.toDisabledAction(saw.catalogaction.ActionId.COPY))}if(b){c.push(saw.catalogaction.ActionId.PASTE)}if(w){c.push(saw.catalogaction.ActionId.RENAME)}else{c.push(saw.catalogaction.ActionId.toDisabledAction(saw.catalogaction.ActionId.RENAME))}c.push(saw.catalogaction.ActionId.LINK)}var d=saw.catalog.getPrivilege("canArchive");if(d&&p){c.push(saw.catalogaction.ActionId.ARCHIVE)}else{if(d&&!p){c.push(saw.catalogaction.ActionId.toDisabledAction(saw.catalogaction.ActionId.ARCHIVE))}}var u=saw.catalog.getPrivilege("canUploadArchive");if(i&&u&&t){c.push(saw.catalogaction.ActionId.UNARCHIVE)}else{if(i&&u&&!t){c.push(saw.catalogaction.ActionId.toDisabledAction(saw.catalogaction.ActionId.UNARCHIVE))}}var k=saw.catalog.getPrivilege("canUploadFile");if(i&&k&&t){if(h.path=="/shared"){c.push(saw.catalogaction.ActionId.toDisabledAction(saw.catalogaction.ActionId.UPLOAD))}else{c.push(saw.catalogaction.ActionId.UPLOAD)}}else{if(i&&k&&!t){c.push(saw.catalogaction.ActionId.toDisabledAction(saw.catalogaction.ActionId.UPLOAD))}}c.push(saw.catalogaction.ActionId.PROPERTIES);var m=saw.catalogaction.canSeePermissionsDialogUI();var j=((h.operationPermissions&obips.catalog.OperationPermissions.CHANGE_PERMISSIONS)==obips.catalog.OperationPermissions.CHANGE_PERMISSIONS);if(m&&j){c.push(saw.catalogaction.ActionId.PERMISSIONS)}else{if(m&&!j){c.push(saw.catalogaction.ActionId.toDisabledAction(saw.catalogaction.ActionId.PERMISSIONS))}}var r=saw.header.getPrivilege("canAccessFavoritesMenu");var o=h.getObjectTypeInfo();if(r&&saw.getSessionInfos().privileges.personalStorage&&o&&o.canBeFavorite){if(h.isFavorite==true){c.push(saw.catalogaction.ActionId.REMOVEFROMFAVORITES)}else{c.push(saw.catalogaction.ActionId.ADDTOFAVORITES)}}return c};saw.catalogaction.ActionManager.prototype._addAllowedAction=function(d,e,a,c){var b=this.findItemAction(a);if(b&&!b.disabled&&saw.arrayIndexOf(c,b)>=0){d.push(b)}};saw.catalogaction.ActionManager.prototype.getPrimaryActions=function(e){var d=this.getPrimaryActionIds(e);var b=this.getAllowedActions(e);var c=[];for(var a=0;a<d.length;a++){this._addAllowedAction(c,e,d[a],b)}if(c.length==0){this._addAllowedAction(c,e,saw.catalogaction.ActionId.PROPERTIES,b)}return c};saw.catalogaction.ActionManager.prototype.getPrimaryActionIds=function(d){var c=null;var b=this.findActionHandler(saw.catalogaction.ActionHandlerFinder.createByItemInfo(d));if(b){c=b.getPrimaryActionIds(d)}if(!c||c.length==0){var a=d.getFolderType();if(a&&a!=obips.catalog.FolderType.OBJECT){c=[saw.catalogaction.ActionId.EXPAND]}else{if(b){c=[saw.catalogaction.ActionId.OPEN,saw.catalogaction.ActionId.EDIT]}else{c=[saw.catalogaction.ActionId.PROPERTIES]}}}return c};saw.catalogaction.ActionManager.prototype.getDefaultAction=function(d){var a=this.findActionHandler(saw.catalogaction.ActionHandlerFinder.createByItemInfo(d));if(a){var c=a.getDefaultActionId(d)}if(c&&this.isAllowedAction(d,c)){return this.findItemAction(c)}else{var b=this.getPrimaryActions(d);return b&&b[0]||null}};saw.catalogaction.ActionManager.prototype.isAllowedAction=function(d,a){var c=this.getAllowedActions(d);var b=this.findItemAction(a);return b&&!b.disabled&&saw.arrayIndexOf(c,b)>=0};saw.catalogaction.ActionManager.prototype.registerActionHandlers=function(a){obips.Array.forEach(a,function(b){this.actionHandlers[b.getHandlerId()]=b},this)};saw.catalogaction.ActionHandlerFinder=function(d,a,b,c){this.handlerId=a;this.signature=b;this.itemInfo=d;this.creatableItemType=c};saw.catalogaction.ActionHandlerFinder.prototype.getHandlerId=function(){return this.handlerId||(this.creatableItemType&&this.creatableItemType.handlerId)};saw.catalogaction.ActionHandlerFinder.prototype.getSignature=function(){return this.signature||(this.itemInfo&&this.itemInfo.signature)||(this.itemInfo&&this.itemInfo.getCompositeSignature())||(this.creatableItemType&&this.creatableItemType.signature)};saw.catalogaction.ActionHandlerFinder.prototype.getItemNameExtension=function(){if(this.itemInfo){var a=this.itemInfo.path;var b=a.lastIndexOf(".");if(b>0){return a.substr(b+1)}}return null};saw.catalogaction.ActionHandlerFinder.createByItemInfo=function(a){return new saw.catalogaction.ActionHandlerFinder(a)};saw.catalogaction.ActionHandlerFinder.createByHandlerId=function(a){return new saw.catalogaction.ActionHandlerFinder(null,a)};saw.catalogaction.ActionHandlerFinder.createByItemSignature=function(a){return new saw.catalogaction.ActionHandlerFinder(null,null,a)};saw.catalogaction.ActionHandlerFinder.createByCreatableItemType=function(a){return new saw.catalogaction.ActionHandlerFinder(null,null,null,a)};saw.catalogaction.ActionManager.prototype.findActionHandler=function(b){var a=null;if(!a){for(var c in this.actionHandlers){if(this.actionHandlers[c].canHandle&&this.actionHandlers[c].canHandle(b)){a=this.actionHandlers[c];break}}}return a};saw.catalogaction.ActionManager.prototype.handleAction=function(h,a,d,j,b,k){var e=false;var f=this.findActionHandler(new saw.catalogaction.ActionHandlerFinder(j,null,d,k?k.creatableItemType:null));if(f){e=f.handleAction(h,a,d,j,b,k)}if(!e){e=this.handleSimpleAction(h,a,d,j,b,k)}if(!e){switch(h){case saw.catalogaction.ActionId.PERMISSIONS:var c=new saw.ondemandload.FuncProxy("obips.CatalogPermissionsDialog.launchDialog",{messageTemplate:"kuiCatalogPermissionsDialogHead"});c.exec(j,saw.getSessionInfos().isEnableSection508());e=true;break;case saw.catalogaction.ActionId.PROPERTIES:saw.catalog.ItemPropertyDlg.showItemProperitiesDialog(j,null,k&&k.launchElement);e=true;break;case saw.catalogaction.ActionId.ARCHIVE:var g=new saw.catalog.ArchiveDialogModel(j.path);var i=saw.catalog.getResUrl("archiveDialogHelp");g.setHelpModel(i);new saw.catalog.ArchiveDialogViewer(g);e=true;break;case saw.catalogaction.ActionId.ADDTOFAVORITES:saw.ondemandload.retrieveAndAddResources({messageTemplate:"kuiFavoritesCore"},null,new obips.Callback(this,this.processFavorites),{task:"ADD",iteminfo:j});return true;case saw.catalogaction.ActionId.REMOVEFROMFAVORITES:saw.ondemandload.retrieveAndAddResources({messageTemplate:"kuiFavoritesCore"},null,new obips.Callback(this,this.processFavorites),{task:"REMOVE",iteminfo:j});return true;default:break}}return e};saw.catalogaction.ActionManager.prototype.processFavorites=function(a){var b=a.iteminfo;if(a.task=="ADD"){saw.favorites.FavoritesManager.getSingleton().addItemToFavorites(null,b,new obips.Callback(this,this.itemUpdated))}else{saw.favorites.FavoritesManager.getSingleton().deleteFavoritesItem(null,b,new obips.Callback(this,this.itemUpdated))}};saw.catalogaction.ActionManager.prototype.itemUpdated=function(c){var b=null;var a=this.findActionHandler(saw.catalogaction.ActionHandlerFinder.createByItemInfo(c));if(a){b=a.getAllowedActionIds(c,true)}if(!b){b=this.getDefaultActions(c,null,false,false)}tContext=new saw.catalogaction.ActionManager.ActionListUpdatedEventContext(c.path,b,true);this.notify(new obips.Observable.Event(saw.catalogaction.ActionManager.EventType.ACTION_LIST_UPDATED,tContext))};saw.catalogaction.ActionManager.prototype.newObject=function(c,d,a){var b=new saw.catalogaction.ActionManager.ObjectCreationContext(c,a);saw.catalogaction.getActionManager().handleAction(saw.catalogaction.ActionId.NEW,null,null,null,d,b)};saw.catalogaction.ActionManager.prototype.getPreviewURL=function(b,d,e,a){var c=this.findActionHandler(saw.catalogaction.ActionHandlerFinder.createByItemInfo(e));return c?c.getPreviewURL(b,d,e,a):null};saw.catalogaction.ActionManager.prototype.findExtendedAttributesRenderer=function(b){var a=this.findActionHandler(saw.catalogaction.ActionHandlerFinder.createByItemInfo(b));return a?a.getExtendedAttributesRenderer(b):null};saw.catalogaction.openInWindow=function(c,b,a){if(obips.launcher){obips.launcher.launchURL(c,{targetWindow:b||"_blank",workspaceModule:a})}else{if(b=="_slef"){saw.runThisURL(c)}else{window.open(c,b?b:"_blank")}}};saw.catalogaction.ActionHandler=function(a){this.handlerId=a;this.manager=saw.catalogaction.getActionManager()};saw.catalogaction.ActionHandler.prototype.getHandlerId=function(){return this.handlerId};saw.catalogaction.ActionHandler.prototype.addCommonActions=function(b,a){return saw.catalogaction.getActionManager().addCommonActions(b,a)};saw.catalogaction.ActionHandler.prototype.isEditableItem=function(c){var a=c.getObjectTypeInfo();var b=a?a.editPrivilege:false;return b};saw.catalogaction.ActionHandler.prototype.isPasteAccepted=function(b){var a=b.getFolderType();if(a&&a!=obips.catalog.FolderType.OBJECT){return true}return false};saw.catalogaction.ActionHandler.prototype.canHandle=function(a){return this.getHandlerId()==(a.getHandlerId()||a.getSignature())};saw.catalogaction.ActionHandler.prototype.getAllowedActionIds=function(b,a){return null};saw.catalogaction.ActionHandler.prototype.getPrimaryActionIds=function(a){return null};saw.catalogaction.ActionHandler.prototype.getDefaultActionId=function(a){return null};saw.catalogaction.ActionHandler.prototype.handleAction=function(b,d,e,f,a,c){alert('Handle actions for "'+this.handlerId+'" object. Unimplemented.');return false};saw.catalogaction.ActionHandler.prototype.getPreviewURL=function(b,c,d,a){return null};saw.catalogaction.ActionHandler.prototype.getExtendedAttributesRenderer=function(a){return null};saw.catalogaction.ActionHandler.prototype.launchURL=function(c,b,a){b=b||{};obips.launcher.launchURL(c,{ctrlKey:b.evt&&b.evt.ctrlKey,targetWindow:b.targetWindow,checkPopupBlocker:b.checkPopupBlocker,workspaceModule:a,ensureFreshUrl:b.ensureFreshUrl});return true};saw.catalogaction.ActionHandler.prototype.getIndexSearchPromptURI=function(a,g){var e="";var d=new saw.ajax.Request("CatalogTreeModel");d.addArg("action","indexSearchPrompt");d.addArg("promptString",a);d.addArg("queryString",g);var c=saw.ajax.createConnection(d);c.setSync(true);var f=c.post();if(f){if(!f.errors){var b=f.response.getJSON();e=b?b.promptURI:""}}return e};saw.catalogaction.ActionHandler.prototype.launchModule=function(c,a,b){obips.launcher.launchModule(c,a,b);return true}};