if(!saw.catalog){saw.catalog=function(){};saw.catalog.resourceFile="catalog/saw.catalog.xml";saw.catalog.privilegesResourceFile="catalog/privileges.xml";saw.catalog.getLocalizedString=function(d){var c=[];for(var b=1;b<arguments.length;b++){c.push(arguments[b])}var a=obips.ResourceManager.getSingleton().getResource(saw.catalog.resourceFile,d);return a.getString.apply(a,c)};saw.catalog.StateID=function(){};saw.catalog.StateID.LAST_OPEN_FOLDER="catOpenFolder";saw.catalog.StateID.CV_TOOLBAR_VIEW_TYPE="cvTBViewType";saw.catalog.StateID.CV_TOOLBAR_ORDER_RULE="cvTBOrderRule";saw.catalog.StateID.CV_TOOLBAR_SHOW_MORE_DETAILS="cvTBShowMoreDtls";saw.catalog.StateID.CV_TOOLBAR_CATEGORY="cvTBCategory";saw.catalog.IconType={};saw.catalog.IconType.SMALL="small";saw.catalog.IconType.MEDIUM="medium";saw.catalog.IconType.BIG="big";saw.catalog.IconType.DASHBOARDBIG="dbig";saw.catalog.ThumbnailFlags={};saw.catalog.ThumbnailFlags.NONE="T_NO";saw.catalog.ThumbnailFlags.IF_AVAILABLE="T_IF";saw.catalog.ThumbnailFlags.SCHEDULE_IF_NOT_AVAILABLE="T_YES";saw.catalog.iconTypeIndex={};saw.catalog.iconTypeIndex[saw.catalog.IconType.SMALL]=1;saw.catalog.iconTypeIndex[saw.catalog.IconType.MEDIUM]=2;saw.catalog.iconTypeIndex[saw.catalog.IconType.BIG]=4;saw.catalog.iconTypeIndex[saw.catalog.IconType.DASHBOARDBIG]=8;saw.catalog.ItemCategory={};saw.catalog.ItemCategory.DASHBOARDPAGE="dashboardpageitem1";saw.catalog.ItemCategory.IBOT="coibot1";saw.catalog.ItemCategory.REPORT="bipReport";saw.catalog.ItemCategory.REQUEST="queryitem1";saw.catalog.ItemCategory.BSC="bsc";saw.catalog.ItemCategory.KPI="kpi1";saw.catalog.ItemCategory.ACTION="action";saw.catalog.ItemCategory.CONDITION="condition1";saw.catalog.ItemCategory.FILTER="filteritem1";saw.catalog.ItemCategory.PROMPT="globalfilteritem1";saw.catalog.ItemCategory.BFK="cobriefingbook1";saw.catalog.ItemCategory.SEGMENT="comktgsegment1";saw.catalog.ItemCategory.SEGMENTTREE="comktgsegmenttree1";saw.catalog.ItemCategory.EXPORTFORMAT="exportFormat";saw.catalog.ItemCategory.EXTERNAL_BINARY="externalbinary1";saw.catalog.ItemCategory.SAVED_COLUMN="cosavedcolumn1";saw.catalog.ItemCategory.VA_PROJECT="project1";saw.catalog.ItemCategory.VA_PROJECT_FOLDER="projectfolder1";saw.catalog.TypeCategoryInfo=function(a){this.categoryId=a.id;this.name=a.name;this.smallIcon=a.icon0;this.mediumIcon=a.icon1;this.bigIcon=a.icon2;this.dashboardBigIcon=a.icon3;this.thumbnailsSizes=a.thumbnailsSizes;this.newIcon=a.newIcon?a.newIcon:this.smallIcon;this.bigNewIcon=a.bigNewIcon?a.bigNewIcon:this.bigIcon;this.description=a.description;this.notSearchType=a.notSearchType};saw.catalog.TypeCategoryInfo.prototype.getIcon=function(a){if(a==saw.catalog.IconType.SMALL){return this.smallIcon}else{if(a==saw.catalog.IconType.MEDIUM){if(this.mediumIcon){return this.mediumIcon}}else{if(a==saw.catalog.IconType.DASHBOARDBIG){return this.dashboardBigIcon}else{return this.bigIcon}}}};saw.catalog.buildTypeCategoryInfos=function(a){var b=obips.Array.map(a,function(c){return new saw.catalog.TypeCategoryInfo(c)});b=b.sort(function(d,c){return d.name.localeCompare(c.name)});saw.catalog._typeCategoryInfos=b};saw.catalog.getTypeCategoryInfos=function(){return saw.catalog._typeCategoryInfos};saw.catalog.getTypeCategoryInfo=function(a){var c=saw.catalog.getTypeCategoryInfos();for(var b=0;b<c.length;b++){if(c[b].categoryId==a){return c[b]}}return null};saw.catalog.IntrinsicType=function(){};saw.catalog.IntrinsicType.XML=1;saw.catalog.IntrinsicType.TEXT=2;saw.catalog.IntrinsicType.BINARY=3;saw.catalog.IntrinsicType.FOLDER=4;saw.catalog.SupportType=function(){};saw.catalog.SupportType.SUPPORTED=0;saw.catalog.SupportType.NOT_SUPPORTED=1;saw.catalog.SupportType.DEPEND_ON_INTERNAL_PROPERTY=2;saw.catalog.SubTypeInfo=function(a){this.subTypeId=a.subTypeId;this.name=a.name;this.editPrivilege=a.editPrivilege;this.smallIcon=a.icon0;this.mediumIcon=a.icon1;this.bigIcon=a.icon2;this.dashboardBigIcon=a.icon3;this.thumbnailsSizes=a.thumbnailsSizes;this.desc=a.description;this.filters=a.filters};saw.catalog.ContentState={NOT_SET:0,FACTORY_CONTENT:1,CUSTOMIZED_FACTORY_CONTENT:2,NON_FACTORY_CONTENT:3,AUTO_CREATED_FACTORY_CONTENT:4,NOT_TAGGED_FACTORY_CONTENT:5,PERMISSIONS_CUSTOMIZED:8,ATTRIBUTES_AND_PROPERTIES_CUSTOMIZED:16,ONLY_OBJECT_CUSTOMIZED:32,PERMISSIONS_ATTRIBUTES_AND_PROPERTIES_CUSTOMIZED:24,PERMISSIONS_AND_OBJECT_CUSTOMIZED:40,ATTRIBUTES_PROPERTIES_AND_OBJECT_CUSTOMIZED:48,ALL_CUSTOMIZED:56};saw.catalog.SubTypeInfo.prototype.getIcon=function(a){if(a==saw.catalog.IconType.SMALL){if(this.smallIcon){return this.smallIcon}}else{if(a==saw.catalog.IconType.MEDIUM){if(this.mediumIcon){return this.mediumIcon}}else{if(a==saw.catalog.IconType.BIG){if(this.bigIcon){return this.bigIcon}}else{if(a==saw.catalog.IconType.DASHBOARDBIG){if(this.dashboardBigIcon){return this.dashboardBigIcon}}}}}return null};saw.catalog.SubTypeInfo.prototype.match=function(c){if(this.filters[0].attribute=="extension"){var a=c.path;var b=a.lastIndexOf(".");if(b>0){return this.filters[0].value==a.substr(b+1)}}else{if(c.properties){return this.filters[0].value==c.properties[this.filters[0].attribute]}}return false};saw.catalog.ObjectTypeInfo=function(b,a){this.signature=b;this.intrinsicType=a.intrinsicType;this.supportType=a.supportType;this.editPrivilege=a.editPrivilege;this.folderType=a.folderType;this.vpat=a.vpat;this.name=a.name;this.extension=a.ext;this.typeCategory=a.categoryId;this.smallIcon=a.icon0;this.mediumIcon=a.icon1;this.bigIcon=a.icon2;this.dashboardBigIcon=a.icon3;this.thumbnailsSizes=a.thumbnailsSizes;this.desc=a.description;this.canBeFavorite=a.canBeFavorite;this.customAttributes=a.customAttributes;if(a.subtypes){this.subtypes=obips.Array.map(a.subtypes,function(c){return new saw.catalog.SubTypeInfo(c)})}};saw.catalog.ObjectTypeInfo.prototype.findMatchingSubTypeIndex=function(b){if(this.subtypes){for(var a=0;a<this.subtypes.length;a++){if(this.subtypes[a].match(b)){return a}}}return -1};saw.catalog.ObjectTypeInfo.prototype.getSubTypeByIndex=function(a){if(a>=0){return this.subtypes[a]}else{return null}};saw.catalog.ObjectTypeInfo.prototype.findMatchingSubType=function(b){var a=this.findMatchingSubTypeIndex(b);return this.getSubTypeByIndex(a)};saw.catalog.ObjectTypeInfo.prototype.getIcon=function(b){if(b==saw.catalog.IconType.SMALL){if(this.smallIcon){return this.smallIcon}}else{if(b==saw.catalog.IconType.MEDIUM){if(this.mediumIcon){return this.mediumIcon}}else{if(b==saw.catalog.IconType.BIG){if(this.bigIcon){return this.bigIcon}}else{if(b==saw.catalog.IconType.DASHBOARDBIG){if(this.dashboardBigIcon){return this.dashboardBigIcon}}}}}var a=saw.catalog.getCategoryInfoBySignature(this.signature);return a&&a.getIcon(b)};saw.catalog.buildObjectTypeInfos=function(b){saw.catalog.objectTypeInfos={};for(var a in b){saw.catalog.objectTypeInfos[a]=new saw.catalog.ObjectTypeInfo(a,b[a])}};saw.catalog.getObjectTypeInfos=function(){return saw.catalog.objectTypeInfos};saw.catalog.getObjectTypeInfo=function(a){return saw.catalog.objectTypeInfos&&saw.catalog.objectTypeInfos[a]};saw.catalog.getCategoryInfoBySignature=function(b){var a=saw.catalog.getObjectTypeInfo(b)?saw.catalog.getObjectTypeInfo(b).typeCategory:"";return a?saw.catalog.getTypeCategoryInfo(a):null};saw.catalog.getIconBySignature=function(b,a){var d=null;var c=saw.catalog.getObjectTypeInfo(b);if(c){d=c.getIcon(a)}if(!d){switch(a){case saw.catalog.IconType.SMALL:d=saw.catalog.getImgUrl("catalog/unknown_s.png");break;case saw.catalog.IconType.MEDIUM:d=saw.catalog.getImgUrl("catalog/unknown_m.png");break;case saw.catalog.IconType.BIG:d=saw.catalog.getImgUrl("catalog/unknown_l.png");break;case saw.catalog.IconType.DASHBOARDBIG:d=saw.catalog.getImgUrl("catalog/unknown_dbl.png");break}}return d};saw.catalog.getObjectTypeCustomAttribute=function(c,a){var b=c.getObjectTypeInfo(true);return b&&b.customAttributes&&b.customAttributes[a]||null};saw.catalog.getItemIcon=function(h,e,b,a){var f=null;var d=h.getObjectTypeInfo(e);var g=-1;if(d){g=d.findMatchingSubTypeIndex(h)}f=saw.catalog.getThumbnailURL(h,e,d,g,b,a);if(f!=null){return f}if(d){var c=d.getSubTypeByIndex(g);if(c&&c.getIcon(b)){f=c.getIcon(b)}else{f=d.getIcon(b)}}if(!f){if(h.getFolderType(e)){f=(b==saw.catalog.IconType.SMALL)?saw.catalog.getImgUrl("catalog/folder.gif"):saw.catalog.getImgUrl("common/thumbnail_folder.png")}else{if(h.type==obips.catalog.ItemType.LINK){if(h.targetType==obips.catalog.ItemType.FOLDER){f=(b==saw.catalog.IconType.SMALL)?saw.catalog.getImgUrl("catalog/folder.gif"):saw.catalog.getImgUrl("common/thumbnail_folder.png")}else{f=saw.catalog.getIconBySignature(h.targetSignature,b)}}else{f=saw.catalog.getIconBySignature(h.signature,b)}}}return f};saw.catalog.getThumbnailURL=function(i,b,k,c,e,d){if(i.type==obips.catalog.ItemType.LINK&&!b){return null}if(d){if(d==saw.catalog.ThumbnailFlags.NONE||e==saw.catalog.IconType.SMALL||e==saw.catalog.IconType.MEDIUM){return null}}var a=0;var h=null;if(k){h=k.findMatchingSubType(i)}if(h&&h.thumbnailsSizes){a=h.thumbnailsSizes}else{if(k&&k.thumbnailsSizes){a=k.thumbnailsSizes}}var g=saw.catalog.iconTypeIndex[e];if((g&a)==0){return null}var f=i.path;var j=saw.commandToURL("thumbnail")+"&signature="+saw.encodeURIComponent(i.signature)+"&path="+saw.encodeURIComponent(f)+"&sbtind="+c+"&iconsize="+e+"&flags="+d;return j};saw.catalog.getItemTypeName=function(e,c){if(e.isLink()&&!c){if(e.getFolderType(true)){return saw.catalog.getLocalizedString("kmsgCatalogItemTypeLinkToFolder")}else{return saw.catalog.getLocalizedString("kmsgCatalogItemTypeLinkToObject")}}var d=null;var b=e.getObjectTypeInfo(c);if(b){var a=b.findMatchingSubType(e);if(a&&a.name){d=a.name}else{d=b.name}}else{if(e.getFolderType(c)){d=saw.catalog.getLocalizedString("kmsgCatalogItemTypeFolder")}else{d=saw.catalog.getLocalizedString("kmsgCatalogItemTypeUnknown")}}return d};saw.catalog.getContentStateName=function(a){switch(a.contentState){case saw.catalog.ContentState.NOT_SET:return saw.catalog.getLocalizedString("kmsgContentStateNotSet");case saw.catalog.ContentState.FACTORY_CONTENT:return saw.catalog.getLocalizedString("kmsgContentStateFactoryContent");case saw.catalog.ContentState.CUSTOMIZED_FACTORY_CONTENT:return saw.catalog.getLocalizedString("kmsgContentStateFactoryContentCustomized");case saw.catalog.ContentState.NON_FACTORY_CONTENT:return saw.catalog.getLocalizedString("kmsgContentStateNonFactoryContent");case saw.catalog.ContentState.AUTO_CREATED_FACTORY_CONTENT:return saw.catalog.getLocalizedString("kmsgAutoCreatedFactoryContent");case saw.catalog.ContentState.NOT_TAGGED_FACTORY_CONTENT:return saw.catalog.getLocalizedString("kmsgNotTaggedFactoryContent");case saw.catalog.ContentState.PERMISSIONS_CUSTOMIZED:return saw.catalog.getLocalizedString("kmsgPermissionsCustomized");case saw.catalog.ContentState.ATTRIBUTES_AND_PROPERTIES_CUSTOMIZED:return saw.catalog.getLocalizedString("kmsgAttributesAndPropertiesCustomized");case saw.catalog.ContentState.ONLY_OBJECT_CUSTOMIZED:return saw.catalog.getLocalizedString("kmsgOnlyObjectCustomized");case saw.catalog.ContentState.PERMISSIONS_ATTRIBUTES_AND_PROPERTIES_CUSTOMIZED:return saw.catalog.getLocalizedString("kmsgPermissionsAttributesAndPropertiesCustomized");case saw.catalog.ContentState.PERMISSIONS_AND_OBJECT_CUSTOMIZED:return saw.catalog.getLocalizedString("kmsgPermissionsAndObjectCustomized");case saw.catalog.ContentState.ATTRIBUTES_PROPERTIES_AND_OBJECT_CUSTOMIZED:return saw.catalog.getLocalizedString("kmsgAttributesPropertiesAndObjectCustomized");case saw.catalog.ContentState.ALL_CUSTOMIZED:return saw.catalog.getLocalizedString("kmsgContentStateFactoryContentCustomized")}};saw.catalog.isFolder=function(b,a){if(b.type==obips.catalog.ItemType.FOLDER){return true}else{if(a&&b.type==obips.catalog.ItemType.LINK&&b.targetType==obips.catalog.ItemType.FOLDER){return true}else{return false}}};saw.catalog.isEditableItemType=function(b){if(b){var c=saw.catalog.getObjectTypeInfo(b);var a=saw.catalog.getCategoryInfoBySignature(b);if(c&&(!a||a.categoryId!="system")){return true}}return false};saw.catalog.ObjectFilter=function(a){this.foldersOnly=a==null?false:a};saw.catalog.ObjectFilter.prototype.canAccept=function(b){if(!this.foldersOnly){return true}if(saw.catalog.isMyCompanySharedFolder(b)){return true}var a=b.getFolderType();if(a&&a!=obips.catalog.FolderType.OBJECT){return true}return false};saw.catalog.isMyCompanySharedFolder=function(a){if(a&&a.getCompositeSignature()=="companysharedfolder1"){return true}else{return false}};saw.catalog.isVpatSupportedObject=function(c){var b=c.getObjectTypeInfo(true);var a=c.getFolderType(true);return b&&b.vpat||(a&&a!=obips.catalog.FolderType.OBJECT)};saw.catalog.getCatalogManager=function(){if(!saw.catalog.catalogManager&&obips.catalog.Catalog){saw.catalog.catalogManager=obips.catalog.Catalog.getSingleton()}return saw.catalog.catalogManager};saw.catalog.getImgUrl=function(a){return obips.ResourceManager.getSingleton().getURL(saw.catalog.resourceFile,a).url};saw.catalog.getResUrl=function(a){return obips.ResourceManager.getSingleton().getURL(saw.catalog.resourceFile,a).url};saw.catalog.getPrivilege=function(a){return obips.ResourceManager.getSingleton().getGDExpression(saw.catalog.privilegesResourceFile,a).value};saw.catalog.getCatalogDisplayPath=function(b,d,a){if(d){saw.catalog.getCatalogDisplayPaths([b],new obips.Callback(null,function(e){return d.exec(e[0],a)}))}else{var c=saw.catalog.getCatalogDisplayPaths([b]);return c&&c[0]||b}};saw.catalog.getCatalogDisplayPaths=function(c,f,a){var b=function(g){var h=[];obips.Array.forEach(c,function(i){var j=g.getDisplayParts(i);h.push(j.error?i:saw.catalog.buildPrettyPathFromParts(j))});return h};var e=f?new obips.Callback(null,function(g){f.exec(b(g),a)}):null;var d=saw.catalog.getCatalogManager().getPathDisplayParts([c],null,e);return d?b(d):null};saw.catalog.buildPrettyPathFromParts=function(d,b,c){if(!d){return null}if(!d[0]||d[0]=="/"){d=d.slice(1)}b=saw.catalog.getDisplayPathSeparator(b);if(c!=""){c=c||b}var a=c+((c&&c!=b&&d.length)?b:"")+d.join(b);return a};saw.catalog.renderPathHTMLs=function(d,e,l,k,f){var j=function(s,p,r){for(var m=0;m<r.length;m++){var q=s.getDisplayParts(r[m]);var o=q.error;if(o){q=obips.catalog.Path.split(r[m]);if(q.length>0){q=q.slice(1)}}saw.clearInnerHTML(p[m]);var n=saw.catalog.renderPathHTMLFromParts(p[m],q);if(o){NQWAddClassName(n,"CatalogPrettyPathError");n.title=o}}};var h=!f?new obips.Callback(null,function(i){j(i,d,e,true);if(l){l.exec(k)}}):null;var g=saw.catalog.getCatalogManager().getPathDisplayParts(e,null,h);if(g){j(g,d,e)}else{for(var c=0;c<d.length;c++){if(!d[c].firstChild){var b=saw.createChildElement(d[c],"span","CatalogPrettyPathLoading");var a=saw.createChildElement(b,"img");a.src=saw.catalog.getImgUrl("catalog/loading-indicator-white.gif");a.alt=""}}}};saw.catalog.renderPathHTMLFromParts=function(h,g,d,f){if(!g){return null}d=saw.catalog.getDisplayPathSeparator(d);if(f!=""){f=f||d}var e=saw.createChildElement(h,"span","CatalogPrettyPath");if(f&&f!=d){var b=saw.createChildElement(e,"span","CatalogPrettyPathPart");b.appendChild(h.ownerDocument.createTextNode(f))}if(f&&g.length){var a=saw.createChildElement(e,"span","CatalogPrettyPathSep");a.appendChild(h.ownerDocument.createTextNode(d))}for(var c=0;c<g.length;c++){b=saw.createChildElement(e,"span","CatalogPrettyPathPart");b.appendChild(h.ownerDocument.createTextNode(g[c]));if(c<g.length-1){a=saw.createChildElement(e,"span","CatalogPrettyPathSep");a.appendChild(h.ownerDocument.createTextNode(d))}}return e};saw.catalog.retrieveCatalogBrowserDialog=function(b,a){saw.ondemandload.retrieveAndAddHtmlFragments({messageTemplate:"kuiCatalogBrowserDialogHead"},null,b,a)};saw.catalog.toBIPublisherPath=function(a,c){var b=a||(c&&c.path);if(c&&c.isLink()){b=c.targetPath}if(b){if(b.indexOf("/shared")==0){b=b.substr(7)}else{if(b.indexOf(saw.getSessionInfos().user.homeDir)==0){b=b.substr(saw.getSessionInfos().user.homeDir.length);b="/~"+saw.getSessionInfos().user.id+b}}}return b};saw.catalog.getDisplayPathSeparator=function(b){var a=b||"/";if(saw.isRToL()){a+="\u200f"}return a}};