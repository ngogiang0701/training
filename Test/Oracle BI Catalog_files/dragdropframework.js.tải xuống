if(!saw.dnd){saw.dnd=function(){};saw.dnd.ksIdPrefix="dnd_id_";saw.dnd.ksIdAttribute="dnd_id_attr";saw.dnd.bSupportCrossIFrameDrag=true;saw.dnd.bPreferDomId=false;saw.dnd.DnDObject=function(b,a){if(!b){return}this.groups=new Object();if(typeof(b)=="string"){this.DS=document.getElementById(b)}else{this.DS=b}if(!this.DS){this.id=b}else{if(saw.dnd.bPreferDomId){this.id=this.DS.id}if(!this.id){this.id=this.DS[saw.dnd.ksIdAttribute]?this.DS[saw.dnd.ksIdAttribute]:saw.dnd.getController()._getUniqueId();this.DS[saw.dnd.ksIdAttribute]=this.id}}this.bLocked=false;this.bDraggable=true;this.bTarget=false;this.scrollableElements=null;this.init(b,a)};saw.dnd.DnDObject.prototype.init=function(b,a){this.addToGroup(a?a:"default");saw.addEventListener(this.getSource()?this.getSource():b,"mousedown",this._onMouseDown,this,true)};saw.dnd.DnDObject.prototype.unregister=function(){saw.removeEventListener(this.getSource(),"mousedown",this._onMouseDown);saw.dnd.getController().unregDragDropAll(this)};saw.dnd.DnDObject.prototype.addToGroup=function(a){if(a=="independent"){this.bIndependent=true;var b=this.getSource();saw.addEventListener(b,"mouseover",saw.dnd.EventReverser.onMouseOver,this,true);saw.addEventListener(b,"mouseout",saw.dnd.EventReverser.onMouseOut,this,true);saw.addEventListener(b,"mouseup",saw.dnd.EventReverser.onMouseUp,this,true);return}this.groups[a]=true;saw.dnd.getController().regDragDrop(this,a)};saw.dnd.DnDObject.prototype.removeFromGroup=function(a){if(a=="independent"){this.bIndependent=false;var b=this.getSource();saw.removeEventListener(b,"mouseover",saw.dnd.EventReverser.onMouseOver);saw.removeEventListener(b,"mouseout",saw.dnd.EventReverser.onMouseOut);saw.removeEventListener(b,"mouseup",saw.dnd.EventReverser.onMouseUp);return}this.groups[a]=false;saw.dnd.getController().unregDragDrop(this,a)};saw.dnd.DnDObject.prototype.setDragObjID=function(a){this.sDragObjID=a};saw.dnd.DnDObject.prototype.setDragObj=function(a){this.DO=a;this.sDragObjID=this.DO.id};saw.dnd.DnDObject.prototype.lock=function(){this.bLocked=true};saw.dnd.DnDObject.prototype.unlock=function(){this.bLocked=false};saw.dnd.DnDObject.prototype.setIsTarget=function(a){this.bTarget=a};saw.dnd.DnDObject.prototype.setIsDraggable=function(a){this.bDraggable=a};saw.dnd.DnDObject.prototype.isTarget=function(a){return this.bTarget};saw.dnd.DnDObject.prototype.isLocked=function(){if(typeof(saw)=="undefined"){return true}return this.bLocked};saw.dnd.DnDObject.prototype.isDraggable=function(a,c,b){return this.bDraggable};saw.dnd.DnDObject.prototype.getSource=function(){if(!this.DS&&this.id){this.DS=document.getElementById(this.id)}return this.DS};saw.dnd.DnDObject.prototype.getDragObj=function(){if(!this.DO||this.sDragObjID&&this.DO.id!=this.sDragObjID){this.DO=document.getElementById(this.sDragObjID)}if(!this.DO){return this.getSource()}return this.DO};saw.dnd.DnDObject.prototype.isInGroup=function(a){return this.groups[a]};saw.dnd.DnDObject.prototype.getGroups=function(){return this.groups};saw.dnd.DnDObject.prototype.getRegion=function(){return saw.Region.getRegion(this.getSource())};saw.dnd.DnDObject.prototype.isOverObject=function(a,c,b){if(typeof(saw)=="undefined"){return false}return saw.dnd.getController().isOverObject(a,c,this,b)};saw.dnd.DnDObject.prototype._onMouseDown=function(a){if(this.isLocked()){return}this.onMouseDown(a)};saw.dnd.DnDObject.prototype.checkGroupRules=function(a){return true};saw.dnd.DnDObject.prototype.onMouseDown=function(a){};saw.dnd.DnDObject.prototype.onMouseUp=function(a){};saw.dnd.DnDObject.prototype.beforeDrag=function(a){};saw.dnd.DnDObject.prototype.startDrag=function(b,a,c){};saw.dnd.DnDObject.prototype.onDrag=function(a){};saw.dnd.DnDObject.prototype.onCtrlKeyDown=function(a){};saw.dnd.DnDObject.prototype.onCtrlKeyUp=function(a){};saw.dnd.DnDObject.prototype.endDrag=function(a){};saw.dnd.DnDObject.prototype.afterDrag=function(a){};saw.dnd.DnDObject.prototype.onDragEnter=function(a,b){return true};saw.dnd.DnDObject.prototype.onDragOver=function(a,b){return true};saw.dnd.DnDObject.prototype.onDragExit=function(a,b){return true};saw.dnd.DnDObject.prototype.onDragDrop=function(a,b){return true};saw.dnd.Controller=function(){this.ids=new Object();this.init()};saw.dnd.Controller.prototype.init=function(){this.bLocked=false;this.clickTimeThresh=500};saw.dnd.Controller.prototype.lock=function(){this.bLocked=true};saw.dnd.Controller.prototype.unlock=function(){this.bLocked=false};saw.dnd.Controller.prototype.regDragDrop=function(b,a){if(!this.ids[a]){this.ids[a]=new Object()}this.ids[a][b.id]=b};saw.dnd.Controller.prototype.unregDragDrop=function(b,a){if(this.ids[a]){delete this.ids[a][b.id]}};saw.dnd.Controller.prototype.unregDragDropAll=function(b){for(var a in b.groups){if(a&&this.ids[a][b.id]){delete this.ids[a][b.id]}}};saw.dnd.Controller.prototype.isLocked=function(){return this.bLocked};saw.dnd.Controller.prototype.getDDById=function(b){for(var a in this.ids){if(this.ids[a][b]){return this.ids[a][b]}}return null};saw.dnd.Controller.prototype.isDragDrop=function(a){return(this.getDDById(a))?true:false};saw.dnd.Controller.prototype.handleMouseDown=function(a,c){if(this.bLocked){return}this.dragCurrent=c;this.startX=saw.getEventPageX(a);this.startY=saw.getEventPageY(a);var b=saw.getElementXY(c.getSource());this.deltaX=this.startX-b[0];this.deltaY=this.startY-b[1];this.dragThreshMet=false;this.clickTimeout=setTimeout("saw.dnd.getController().startDrag(null, saw.dnd.getController().startX, saw.dnd.getController().startY)",this.clickTimeThresh)};saw.dnd.Controller.prototype.startDrag=function(b,a,c){clearTimeout(this.clickTimeout);if(this.dragCurrent&&this.dragCurrent.isDraggable()){this.dragCurrent.beforeDrag();this.dragCurrent.startDrag(b,a,c)}this.dragThreshMet=true;this.dragOvers=new Object();this.hasDropped=false};saw.dnd.Controller.prototype.handleMouseMove=function(d){if(!this.dragCurrent){return}if(this.dragCurrent.canDragAcrossIframe()){var f=saw.getEventOwnerDocument(d);var c=saw.dnd._getMouseOverFrame(d);if(c.document!=this.dragCurrent.getDragObj().ownerDocument){if(!this.dragCurrent.onDragAcrossFrame(c,d)){return}}}if(is_ie&&!saw.userAgent.is_ie9up&&!d.button){saw.stopEventPropagation(d);return this.handleMouseUp(d)}if(!this.dragThreshMet){var b=Math.abs(this.startX-saw.getEventPageX(d));var a=Math.abs(this.startY-saw.getEventPageY(d));if(b>3||a>3){this.startDrag(d,this.startX,this.startY)}}if(this.dragThreshMet&&!this.hasDropped){this.dragCurrent.onDrag(d);this._fireEvents(d,false)}saw.stopEvent(d)};saw.dnd.Controller.prototype.handleMouseUp=function(a){this.hasDropped=true;if(!this.dragCurrent){return}clearTimeout(this.clickTimeout);if(this.dragThreshMet){this._fireEvents(a,true)}else{}this.stopDrag(a);saw.stopEvent(a)};saw.dnd.Controller.prototype.stopDrag=function(a){if(this.dragCurrent){if(this.dragCurrent.elementScrollTimer){clearTimeout(this.dragCurrent.elementScrollTimer);this.dragCurrent.elementScrollTimer=null}if(this.dragThreshMet){this.dragCurrent.endDrag(a);this.dragCurrent.afterDrag()}this.dragCurrent.onMouseUp(a)}this.dragCurrent=null;this.dragOvers=new Object()};saw.dnd.Controller.prototype._fireEvents=function(l,a){var q=this.dragCurrent;if(!q||q.isLocked()){return}var n=saw.getEventPageX(l);var m=saw.getEventPageY(l);var o=saw.getEventOwnerDocument(l);var b=[];var f=[];var k=[];var h=[];var d=[];for(var g in this.dragOvers){var c=this.dragOvers[g];if(!c.isOverObject){continue}if(!c.isOverObject(n,m,o)){f.push(c)}b[g]=true;delete this.dragOvers[g]}for(var p in q.groups){for(g in this.ids[p]){var j=this.ids[p][g];if(j.isTarget&&j.isTarget(l)&&!j.isLocked()&&j!=q){if(!q.checkGroupRules(j.getGroups())){continue}if(j.isOverObject(n,m,o)){if(a){h.push(j)}else{if(!b[j.id]){d.push(j)}else{k.push(j)}this.dragOvers[j.id]=j}}}}}f.sort(saw.dnd.Controller._sortEventTargets);d.sort(saw.dnd.Controller._sortEventTargets);k.sort(saw.dnd.Controller._sortEventTargets);h.sort(saw.dnd.Controller._sortEventTargets);for(g=0;g<f.length;++g){if(!f[g].onDragExit(l,q)){break}}for(g=0;g<d.length;++g){if(!d[g].onDragEnter(l,q)){break}}for(g=0;g<k.length;++g){if(!k[g].onDragOver(l,q)){break}}for(g=0;g<h.length;++g){if(!h[g].onDragDrop(l,q)){break}}if(a&&h.length==0&&q.bCanDropAnywhere){q.onDragDrop(l,q)}};saw.dnd.Controller.prototype._init=function(){this.dragCurrent=null;saw.addEventListener(document,"mouseup",this.handleMouseUp,this,true);saw.addEventListener(document,"mousemove",this.handleMouseMove,this,true);this.nIdCounter=0};saw.dnd.Controller._sortEventTargets=function(d,c){var e=d.getSource().parentNode;var f=c.getSource();while(e){if(e==f){return -1}else{e=e.parentNode}}return 1};saw.dnd.Controller.prototype.isOverObject=function(i,g,c,h){if(this.dragCurrent){if(this.dragCurrent.constrainX||this.dragCurrent.constrainY){var d=this.dragCurrent.getTargetCoord(i,g);i=d.x+this.dragCurrent.deltaX;g=d.y+this.dragCurrent.deltaY}if(this.dragCurrent.canDragAcrossIframe()){if(c.getSource().ownerDocument!=h){var b=saw.dnd._getControllerWindow();var a=saw.dnd.getEventPosToCtrlWindow(null,i,g,h,b);var j=new saw.Point(a[0],a[1]);var f=saw.dnd._getObjRegionToCtrlWindow(c,b);return f.contains(j)}}else{if(c.getSource().ownerDocument!=h){return false}}}var e=c.getRegion();if(e){return c.getRegion().contains(new saw.Point(i,g))}else{return false}};saw.dnd.Controller.prototype._getUniqueId=function(){this.nIdCounter++;return saw.dnd.ksIdPrefix+this.nIdCounter};saw.dnd.Controller.prototype._onKeyDown=function(a){if(a.ctrlKey&&a.keyCode==17){if(this.dragCurrent){this.dragCurrent.onCtrlKeyDown(a)}}};saw.dnd.Controller.prototype._onKeyUp=function(a){if(a.keyCode==17){if(this.dragCurrent){this.dragCurrent.onCtrlKeyUp(a)}}};saw.dnd.getController=function(){if(!saw.dnd.tDDC){var a=saw.dnd._getControllerWindow();if(a&&saw.dnd.bSupportCrossIFrameDrag){var b=a.saw.dnd.tDDC;saw.addEventListener(window.document,"mouseup",saw.dnd.Controller.prototype.handleMouseUp,b,true);saw.addEventListener(window.document,"mousemove",saw.dnd.Controller.prototype.handleMouseMove,b,true);saw.dnd.tDDC=b;return b}else{saw.dnd.tDDC=new saw.dnd.Controller();saw.dnd.tDDC._init();saw.dnd.isCtrlWindow=true}}return saw.dnd.tDDC};saw.dnd._getControllerWindow=function(){try{var a=window;while(a&&a!=a.parent&&a.saw&&a.saw.dnd&&!a.saw.dnd.isCtrlWindow){a=a.parent}if(a&&a.saw&&a.saw.dnd&&a.saw.dnd.isCtrlWindow){return a}else{return null}}catch(b){return null}};saw.dnd._getMouseOverFrame=function(b){var a=saw.dnd._getControllerWindow();var e=a.document.getElementsByTagName("IFrame");if(e.length==0){return a}var g=saw.dnd.getEventPosToCtrlWindow(b);var h=new saw.Point(g[0],g[1]);var c=null;for(var d=0;d<e.length;d++){var f=a.saw.Region.getRegion(e[d]);if(f&&f.contains(h)){c=e[d];break}}return c?c.contentWindow:a};saw.dnd.getEventPosToCtrlWindow=function(j,g,f,h,a){if(g==null){g=saw.getEventPageX(j)}if(f==null){f=saw.getEventPageY(j)}if(!a){a=saw.dnd._getControllerWindow()}if(!h){h=saw.getEventOwnerDocument(j)}if(a.document==h){return[g,f]}var d=a.document.getElementsByTagName("IFrame");var c=null;for(var b=0;b<d.length;b++){if(saw.getContentDocument(d[b])==h){c=d[b];break}}if(!c){return[g,f]}var e=a.saw.Region.getRegion(c);return[g+e.left-saw.getDocumentScrollLeft(saw.getContentDocument(c)),f+e.top-saw.getDocumentScrollTop(saw.getContentDocument(c))]};saw.dnd._getObjRegionToCtrlWindow=function(c,a){var j=c.getRegion();var k=c.getSource();if(k.ownerDocument==a.document){return j}var f=a.document.getElementsByTagName("IFrame");var d=null;for(var b=0;b<f.length;b++){if(saw.getContentDocument(f[b])==k.ownerDocument){d=f[b];break}}if(d){var e=saw.getDocumentScrollLeft(saw.getContentDocument(d));var h=saw.getDocumentScrollTop(saw.getContentDocument(d));var g=a.saw.Region.getRegion(d);j.top+=g.top-h;j.bottom+=g.top-h;j.left+=g.left-e;j.right+=g.left-e;return j}saw.logicErrorAlert("Can't find the iframe!")};saw.dnd._getFramePosToCtrlWindow=function(b,c){if(!c){c=saw.dnd._getControllerWindow()}if(b==c){return[0,0]}var e=c.document.getElementsByTagName("IFrame");var a=null;for(var d=0;d<e.length;d++){if(e[d].contentWindow==b){a=e[d];break}}var f=c.saw.Region.getRegion(a);return[f.left,f.top]};saw.dnd._isWindowSupportDragDrop=function(a){return a&&a.saw&&a.saw.dnd};saw.dnd.EventReverser=function(){};saw.dnd.EventReverser.onMouseOver=function(a,b){if(saw.dnd.getController().dragCurrent){b.onDragOver(a,saw.dnd.getController().dragCurrent)}};saw.dnd.EventReverser.onMouseOut=function(a,b){if(saw.dnd.getController().dragCurrent){b.onDragExit(a,saw.dnd.getController().dragCurrent)}};saw.dnd.EventReverser.onMouseUp=function(a,b){if(saw.dnd.getController().dragCurrent){b.onDragDrop(a,saw.dnd.getController().dragCurrent)}};saw.dnd.DragObject=function(b,a){saw.dnd.DragObject.baseConstructor.call(this,b,a);this.scroll=true;this.scrollableElements=null;this.bCanDragAcrossIframe=false;this.deltaX=0;this.deltaY=0;this.constrainX=false;this.constrainY=false;this.minX=0;this.maxX=2048;this.minY=0;this.maxY=2048;this.xTicks=null;this.yTicks=null};saw.extend(saw.dnd.DragObject,saw.dnd.DnDObject);saw.dnd.DragObject.prototype.autoOffset=function(d,c){var b=this.getSource();var e=saw.getElementXY(b);var a=d-e[0];var f=c-e[1];this.setDelta(a,f)};saw.dnd.DragObject.prototype.setDelta=function(b,a){this.deltaX=b;this.deltaY=a};saw.dnd.DragObject.prototype.setDragObjPos=function(c,b,a){this.alignObjWithMouse(this.getDragObj(),c,b,a)};saw.dnd.DragObject.prototype.alignObjWithMouse=function(b,e,d,a){var c=this.getTargetCoord(e,d,a);var f=[c.x,c.y];saw.setElementXY(b,c.x,c.y);this.lastPageX=c.x;this.lastPageY=c.y;if(saw.dnd.getController().dragThreshMet){this.autoScroll(c.x,c.y,b.offsetHeight,b.offsetWidth,e,d)}};saw.dnd.DragObject.prototype.canDragAcrossIframe=function(){return saw.dnd.bSupportCrossIFrameDrag&&this.bCanDragAcrossIframe};saw.dnd.DragObject.prototype.autoScroll=function(g,f,q,j,c,a){if(!this.scroll){return}var b=40;var r=saw.userAgent.is_ie?80:30;var t=false;for(var p=0;!t&&this.scrollableElements&&p<this.scrollableElements.length;p++){var e=this.scrollableElements[p];if(e&&(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)){var m=saw.Region.getRegion(e);if(e.scrollHeight>e.clientHeight){if(a<m.bottom&&a+b>m.bottom){e.scrollTop+=r;t=true}else{if(a>m.top&&a-b<m.top){e.scrollTop-=r;t=true}}}if(e.scrollWidth>e.clientWidth){if(c<m.right&&c+b>m.right){e.scrollLeft+=r;t=true}else{if(c>m.left&&c-b<m.left){e.scrollLeft-=r;t=true}}}}}if(this.elementScrollTimer){clearTimeout(this.elementScrollTimer);this.elementScrollTimer=null}if(t){var l=this;this.elementScrollTimer=setTimeout(function(){l.autoScroll(g,f,q,j,c,a)},300)}if(!t){if(this.getDragObj().ownerDocument!=this.getSource().ownerDocument){return}var z=saw.getClientHeight();var n=saw.getClientWidth();var o=saw.getDocumentScrollTop();var s=saw.getDocumentScrollLeft();var k=q+f;var v=(z+o-f-this.deltaY);if(saw.hasVScrollBar(this.getDragObj().ownerDocument)){if(k>z&&v<b){window.scrollTo(s,o+r)}if(f<o&&o>0&&f-o<b){window.scrollTo(s,o-r)}}if(saw.hasHScrollBar(this.getDragObj().ownerDocument)){var u=j+g;var d=(n+s-g-this.deltaX);if(u>n+s&&d<b){window.scrollTo(s+r,o)}else{if(g<s&&s>0&&g+this.deltaX-s<b){window.scrollTo(s-r,o)}}}}};saw.dnd.DragObject.prototype.getTargetCoord=function(d,c,b){var a=d-this.deltaX;var e=c-this.deltaY;if(!b){if(this.constrainX){if(a<this.minX){a=this.minX}if(a>this.maxX){a=this.maxX}}if(this.constrainY){if(e<this.minY){e=this.minY}if(e>this.maxY){e=this.maxY}}a=saw.dnd.DragObject._getTick(a,this.xTicks);e=saw.dnd.DragObject._getTick(e,this.yTicks)}return{x:a,y:e}};saw.dnd.DragObject.prototype.setInitPosition=function(d,c){var e=this.getSource();var b=d||0;var a=c||0;var f=saw.getElementXY(e);this.initPageX=f[0]-b;this.initPageY=f[1]-a;this.lastPageX=f[0];this.lastPageY=f[1]};saw.dnd.DragObject.prototype.setXConstraint=function(b,a,c){if(this.initPageX==null){this.setInitPosition(0,0)}if(b!=null){this.leftConstraint=b;this.minX=this.initPageX-b}if(a!=null){this.rightConstraint=a;this.maxX=this.initPageX+a}if(c==null){c=this.nXTickSize}if(c<=1){c=null;this.xTicks=null}else{if(c>1){this.xTicks=saw.dnd.DragObject._generateTickMarks(this.initPageX,this.minX,this.maxX,c)}}this.nXTickSize=c;this.constrainX=true};saw.dnd.DragObject.prototype.setYConstraint=function(a,c,b){if(this.initPageY==null){this.setInitPosition(0,0)}if(a!=null){this.minY=this.initPageY-a;this.topConstraint=a}if(c!=null){this.maxY=this.initPageY+c;this.bottomConstraint=c}if(b==null){b=this.nYTickSize}if(b<=1){b=null;this.yTicks=null}else{if(b>1){this.yTicks=saw.dnd.DragObject._generateTickMarks(this.initPageY,this.minY,this.maxY,b)}}this.nYTickSize=b;this.constrainY=true};saw.dnd.DragObject._generateTickMarks=function(c,a,e,b){var f=[];for(var d=c;d>=a;d=d-b){f[f.length]=d}for(d=c+b;d<=e;d=d+b){f[f.length]=d}f.sort(function(g,h){return g-h});return f};saw.dnd.DragObject.prototype.resetConstraints=function(){var b=this.lastPageX-this.initPageX;var a=this.lastPageY-this.initPageY;this.setInitPosition(b,a);if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.nXTickSize)}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.nYTickSize)}};saw.dnd.DragObject._getTick=function(f,c){if(!c){return f}else{if(c[0]>=f){return c[0]}else{for(var a=0;a<c.length;++a){var b=a+1;if(c[b]&&c[b]>=f){var e=f-c[a];var d=c[b]-f;return(d>e)?c[a]:c[b]}}return c[c.length-1]}}};saw.dnd.DragObject.prototype._onMouseDown=function(a){if(saw.getEventButton(a)>1){return}if(this.isLocked()){return}if(saw.dnd.getController().isLocked()){return}if(!this.isDraggable(saw.getEventPageX(a),saw.getEventPageY(a),a)){return}if(saw.dnd.getController().isOverObject(saw.getEventPageX(a),saw.getEventPageY(a),this,this,saw.getEventOwnerDocument(a))){var b=saw.getEventTarget(a);this.onMouseDown(a);saw.dnd.getController().handleMouseDown(a,this);saw.preventEventDefault(a)}};saw.dnd._disableBrowserDrag=function(){if(is_ie){document.ondragstart=function(){return false}}};saw.dnd._enableBrowserDrag=function(){if(is_ie){document.ondragstart=null}};saw.dnd.SimpleDragObj=function(b,a){saw.dnd.SimpleDragObj.baseConstructor.call(this,b,a);this.initDragObj();this.borderWidth=2;this.draggingCursor="move";this.ctrlDraggingCursor=null;this.useShim=false};saw.extend(saw.dnd.SimpleDragObj,saw.dnd.DragObject);saw.dnd.SimpleDragObj.dragObjID="sawDragObj";saw.dnd.SimpleDragObj.dragShimID="sawDragShim";saw.dnd.SimpleDragObj.prototype.createDragObj=function(c){if(!c){c=document}var b=c.getElementById(saw.dnd.SimpleDragObj.dragObjID);if(!b){b=c.createElement("div");b.id=saw.dnd.SimpleDragObj.dragObjID;var a=b.style;a.position="absolute";a.display="none";a.cursor="move";a.border="2px solid #aaa";a.zIndex=9999;a.opacity=0.5;a.filter="alpha(opacity=50)";c.body.appendChild(b)}return b};saw.dnd.SimpleDragObj.prototype.showShimObj=function(c){if(!this.useShim){return}if(!c){c=document}if(!this.shimDiv){var a=c.getElementById(saw.dnd.SimpleDragObj.dragShimID);if(!a){a=c.createElement("div");a.id=saw.dnd.SimpleDragObj.dragShimID;var b=a.style;b.position="absolute";b.top="0px";b.left="0px";b.display="none";b.cursor="move";b.border="none";b.zIndex=9998;b.backgoundColor="transparent";b.width="100%";b.height="100%";c.body.appendChild(a)}this.shimDiv=a}this.shimDiv.style.display="block";this.shimDiv.style.cursor=this.draggingCursor};saw.dnd.SimpleDragObj.prototype.initDragObj=function(){this.setDragObjID(saw.dnd.SimpleDragObj.dragObjID)};saw.dnd.SimpleDragObj.prototype.getDragObj=function(){if(!this.DO||this.sDragObjID&&this.DO.id!=this.sDragObjID){this.DO=document.getElementById(this.sDragObjID)}if(!this.DO){this.setDragObj(this.createDragObj())}return this.DO};saw.dnd.SimpleDragObj.prototype.showDragObj=function(b,a){this.setDragObjContents();this.getDragObj().style.cursor=this.draggingCursor;this.getDragObj().style.display="";this.setDragObjPos(b,a);this.showShimObj()};saw.dnd.SimpleDragObj.prototype.setDragObjContents=function(b){var b=b?b:this.getSource();var c=this.getDragObj();while(c.childNodes.length>0){c.removeChild(c.childNodes[0])}c.style.width=(parseInt(b.offsetWidth)-(2*this.borderWidth))+"px";c.style.height=(parseInt(b.offsetHeight)-(2*this.borderWidth))+"px";c.className=b.className;var d=c.ownerDocument;if(b.tagName=="IMG"||b.tagName=="TABLE"){if(d==b.ownerDocument){c.appendChild(b.cloneNode(true))}else{c.appendChild(d.importNode(b,true))}}else{if(d==b.ownerDocument){for(var a=0;a<b.childNodes.length;++a){c.appendChild(b.childNodes[a].cloneNode(true))}}else{for(var a=0;a<b.childNodes.length;++a){c.appendChild(d.importNode(b.childNodes[a],true))}}}};saw.dnd.SimpleDragObj.prototype.alignDragObjToMouse=function(d,a){if(!this.canDragAcrossIframe()){this.setDragObjPos(saw.getEventPageX(d),saw.getEventPageY(d));return}var f=saw.dnd.getEventPosToCtrlWindow(d);if(this.getDragObj().ownerDocument==saw.dnd._getControllerWindow().document){this.setDragObjPos(f[0],f[1]);return}var c=a?a:saw.dnd._getMouseOverFrame(d);var b=saw.dnd._getFramePosToCtrlWindow(c);if(c==saw.dnd._getControllerWindow()){this.setDragObjPos(f[0]-b[0],f[1]-b[1])}else{this.setDragObjPos(f[0]-b[0]+saw.getDocumentScrollLeft(c.document),f[1]-b[1]+saw.getDocumentScrollTop(c.document))}};saw.dnd.SimpleDragObj.prototype.onMouseDown=function(b){var a=saw.getEventPageX(b);var c=saw.getEventPageY(b);this.autoOffset(a,c);this.setDragObjPos(a,c)};saw.dnd.SimpleDragObj.prototype.startDrag=function(b,a,d){saw.disableSelectionOnNode();saw.dnd._disableBrowserDrag();try{if(is_ie&&window.parent&&window.parent!=window){saw.disableSelectionOnNode(window.parent.document)}}catch(c){}this.showDragObj(a,d);if(b&&b.ctrlKey&&this.ctrlDraggingCursor){this.getDragObj().style.cursor=this.ctrlDraggingCursor}};saw.dnd.SimpleDragObj.prototype.onDrag=function(a){this.alignDragObjToMouse(a)};saw.dnd.SimpleDragObj.prototype.onCtrlKeyDown=function(a){if(this.ctrlDraggingCursor&&this.getDragObj().style.cursor!=this.ctrlDraggingCursor){this.getDragObj().style.cursor=this.ctrlDraggingCursor}};saw.dnd.SimpleDragObj.prototype.onCtrlKeyUp=function(a){this.getDragObj().style.cursor=this.draggingCursor};saw.dnd.SimpleDragObj.prototype.endDrag=function(b){var a=this.getDragObj();a.style.display="none";if(this.shimDiv){this.shimDiv.style.display="none"}saw.enableSelectionOnNode();try{if(is_ie&&window.parent&&window.parent!=window){saw.enableSelectionOnNode(window.parent.document)}}catch(b){}saw.dnd._enableBrowserDrag()};saw.dnd.SimpleDragObj.showDropMarker=function(b,e,d,a,c){b.style.display="block";b.style.width=c+"px";b.style.height=a+"px";saw.setElementXY(b,e,d)};saw.dnd.SimpleDragObj.prototype.needToSwitchDragObj=function(a){if(!saw.dnd._isWindowSupportDragDrop(a)){return false}if(this.getDragObj().ownerDocument==saw.dnd._getControllerWindow().document){return false}return true};saw.dnd.SimpleDragObj.prototype.onDragAcrossFrame=function(c,b){if(!this.needToSwitchDragObj(c)){return true}this.getDragObj().style.display="none";this.setDragObj(this.createDragObj(c.document));var a=this.getDragObj();this.setDragObjContents();a.style.display="";this.alignDragObjToMouse(b,c);this.resetConstraints();return false};saw.dnd.DropTarget=function(b,a){saw.dnd.DropTarget.baseConstructor.call(this,b,a);this.bDraggable=false;this.setIsTarget(true)};saw.extend(saw.dnd.DropTarget,saw.dnd.DnDObject);saw.dnd.getController();saw.addEventListener(document,"keydown",saw.dnd.getController()._onKeyDown,saw.dnd.getController(),true);saw.addEventListener(document,"keyup",saw.dnd.getController()._onKeyUp,saw.dnd.getController(),true)};