if(!saw.catalog.SearchFacets){saw.catalog.SearchFacets=function(a,c,b){saw.catalog.SearchFacets.baseConstructor.call(this);this.tContainer=c;this.tFacets=a;this.tFacetsCallBack=b};saw.extend(saw.catalog.SearchFacets,obips.Observable);saw.catalog.SearchFacets.prototype.render=function(){saw.clearInnerHTML(this.tContainer);this.facetBodyDiv=document.createElement("div");this.tContainer.appendChild(this.facetBodyDiv);var d=this.tFacets;var f=new Array();for(var c=0;d&&c<d.length;c++){var b=d[c];var e=new saw.catalog.FacetModel(b);f.push(e)}var a=new obips.Accordion.Model("idSearchFacetAccordion",f);this.accordionViewer=new saw.catalog.SearchFacetsViewer(a,this.facetBodyDiv,this.tFacetsCallBack);this.accordionViewer.controller.resize()};saw.catalog.SearchFacets.prototype._getTestData=function(d,f){d=d?d:10;f=f?f:6;var e=new Array();for(var a=0;a<d;a++){var g={};g.name="Facet"+a;g.caption="Facet "+a;g.facetValues=new Array();for(var b=0;b<f;b++){var c={};c.name="Item"+b;c.caption="Item "+b;if(b<3&&a<3){c.selected=true}g.facetValues.push(c)}e.push(g)}return e};saw.catalog.SearchFacetsViewer=function(b,c,a){this.tFacetsCallBack=a;saw.catalog.SearchFacetsViewer.baseConstructor.call(this,b,c)};extend(saw.catalog.SearchFacetsViewer,obips.Accordion.Viewer);saw.catalog.SearchFacetsViewer.prototype._createPaneViewer=function(b,a){return new saw.catalog.FacetPanel(this,b,this.tFacetsCallBack)};saw.catalog.SearchFacetsViewer.prototype._getContainerStyleHeight=function(){return this.container.offsetHeight};saw.catalog.SearchFacetsViewer.prototype._getAccordionDivClassName=function(){return""};saw.catalog.SearchFacetsViewer.prototype.getActualChildrenSize=function(a,f){var d=new Array();var e=this.paneViewers.length;for(var c=0;c<this.paneViewers.length;c++){if(!this.paneViewers[c].isShown()){continue}var g=this.paneViewers[c]._getBodyDiv();var b=g.offsetHeight;d.push(Math.floor(b))}return d};saw.catalog.FacetModel=function(a){this.tFacetData=a;saw.catalog.FacetModel.baseConstructor.call(this,a.name,a.caption,true)};extend(saw.catalog.FacetModel,obips.Accordion.PaneModel);saw.catalog.FacetPanel=function(a,c,b){this.tFacetsCallBack=b;saw.catalog.FacetPanel.baseConstructor.call(this,a,c)};extend(saw.catalog.FacetPanel,obips.Accordion.PaneViewer);saw.catalog.FacetPanel.SHOW_MAX_ITEM=4;saw.catalog.FacetPanel.prototype._renderBodyDiv=function(a,c){var b=this._getViewer(c);if(!a){a=this._getBodyDiv();a.style.height="";saw.clearInnerHTML(a);a.appendChild(b)}else{a.appendChild(b)}a.className="SearchFacetAvailablePaneContent"};saw.catalog.FacetPanel.prototype._getViewer=function(s){var g=document.createElement("div");g.style.paddingLeft="1px";var f=saw.createTable();g.appendChild(f);var m=this.pane.tFacetData.facetValues;var i=s?m.length:saw.catalog.FacetPanel.SHOW_MAX_ITEM;for(var o=0;o<m.length&&o<i;o++){var p=m[o];f.style.margin="4px";f.cellPadding="2";var q=f.insertRow(o);var r=q.insertCell(0);if(p.type=="checkbox"){var h=saw.createChildElement(r,"div","CatalogCheckboxDiv");var c=saw.createInput("",null,"checkbox");c.defaultChecked=p.selected;c.facetName=this.pane.tFacetData.name;c.facetValue=p;c.action="checkbox";h.appendChild(c);var k=saw.createChildElement(h,"span");k.appendChild(document.createTextNode(p.caption+" ("+p.count+")"));k.title=p.value;var a=new obips.BrowserEventFramework.EventRouter(c,"onclick");a.addEventListener(new obips.Observable.EventListener(null,this.tFacetsCallBack))}else{var k=saw.createChildElement(r,"span");var d=saw.createChildElement(k,"a");d.href="javascript:void(null)";d.appendChild(document.createTextNode(p.caption+" ("+p.count+")"));d.title=saw.catalog.getLocalizedString("kmsgFacetAddFilter",this.pane.tFacetData.caption,p.value);d.facetName=this.pane.tFacetData.name;d.facetValue=p;d.action="link";var e=new obips.BrowserEventFramework.EventRouter(d,"onclick");e.addEventListener(new obips.Observable.EventListener(null,this.tFacetsCallBack))}}var b=saw.createChildElement(g,"div","ShowMoreLessDiv");var n=m.length>saw.catalog.FacetPanel.SHOW_MAX_ITEM;if(n){var d=document.createElement("A");d.paneid=this.pane.id;d.showAll=s?"false":"true";d.href="javascript:void(null)";var l=this;d.onclick=function(j){l.showMore(saw.getEvent(j))};if(s){d.appendChild(document.createTextNode(saw.catalog.getLocalizedString("kmsgFacetShowLess")))}else{d.appendChild(document.createTextNode(saw.catalog.getLocalizedString("kmsgFacetShowMore")))}b.setAttribute("align","right");b.appendChild(d)}return g};saw.catalog.FacetPanel.prototype.showMore=function(a){var c=saw.getEventTarget(a);var b=c.showAll;var d=c.paneid;if(b=="true"){this._renderBodyDiv(null,true)}else{this._renderBodyDiv(null,false)}}};