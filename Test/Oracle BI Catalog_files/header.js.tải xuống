if(!saw.header){saw.header=function(){};saw.header.knMaxExpandedPortals=20;saw.header.knOpenMenuOnRolloverDelay=500;saw.header.knTitleBarCaptionMaxWidth=400;saw.header.StateID=function(){};saw.header.StateID.DASHBOARDS_MENU="dashboardsMenu";saw.header.Model=function(b,a,e,d,c){this.sessionInfos=b?b:saw.getSessionInfos();this.branding=new saw.header.Branding(this);this.searchBar=new saw.header.SearchBar(this,e,d,c);this.titleBar=new saw.header.TitleBar(this,a);this.navBar=new saw.header.NavBar(this,c)};extend(saw.header.Model,obips.Observable);saw.header.Model.prototype.setSubComponents=function(b,c,a,d){if(b){this.branding=b}if(c){this.searchBar=c}if(a){this.titleBar=a}if(d){this.navBar=d}};saw.header.Model.prototype.getMyPortalPath=function(){return this.sessionInfos.user.homeDir+"/_portal"};saw.header.Viewer=function(a,b){this.model=a;this.container=b;this.resourceManager=obips.ResourceManager.getSingleton();saw.header.viewer=this};saw.header.Viewer.resourceFile="common/saw.header.xml";saw.header.privilegesResourceFile="common/privileges.xml";saw.header.fuseCloudResourceFile="home/cloudfusebieehome.xml";saw.header.Viewer.prototype.render=function(){var g=document;if(!this.container||this.container==g.body){this.container=g.createElement("div");g.body.insertBefore(this.container,g.body.firstChild)}this.container.className="HeaderContainer";if(obips.ResourceManager.getSingleton().getStyleProperty("pageShadowBackground")=="true"){var h=saw.createChildElement(this.container,"div");h.className="HeaderDiv";var k=saw.createChildElement(h,"img");k.src=saw.header.getResUrl("dbd_center_gradient.png");k.alt="";k.className="HeaderBackground";var o=saw.createChildElement(h,"img");o.src=saw.header.getResUrl("header_topshadow.png");o.alt="";o.className="HeaderTopShadow"}var e=saw.createTable();e.className="masterBrandingArea HeaderTopBar";saw.setAriaRole(e,"presentation");if(saw.header.Branding.customTheme&&saw.header.Branding.customTheme.skinRegionBgColor){e.style.backgroundColor=saw.header.Branding.customTheme.skinRegionBgColor}var n=e.insertRow(0);this.model.branding.render(n);this.model.searchBar.render(n.insertCell(n.cells.length));var b=n.insertCell(n.cells.length);b.className="HeaderPageStatus";this.pageStatusIcon=saw.createChildElement(b,"img");saw.header.showBusyIndicator(false);var m=saw.createTable();m.className="masterGlobalLayer HeaderSecondBar";saw.setAriaRole(m,"presentation");var j=m.insertRow(0);var i=j.insertCell(0);var a=j.insertCell(1);if(saw.userAgent.is_ie7){obips.CSS.addClassToElement(m,"HeaderSecondBarMargin")}else{obips.CSS.addClassToElement(m,"HeaderSecondBarPadding")}this.model.titleBar.render(i);this.model.navBar.render(a);if(obips.ResourceManager.getSingleton().getStyleProperty("headerRightBorder")=="true"){var l=j.insertCell(2);l.className="PageOuterBodyTopRightTd";var d=saw.createChildElement(l,"span");d.className="PageOuterBodyTopRight";if(saw.userAgent.is_ie7){obips.CSS.addClassToElement(d,"PageOuterBodyTopRightPadding")}}var c=this.container.firstChild;this.container.insertBefore(e,c);var f=g.createElement("div");f.className="HeaderBarSeparator";this.container.insertBefore(f,c);this.container.insertBefore(m,c);this.skipToContentHeader();saw.addEventListener(document,"keyup",saw.header.onKeypressHandler);if(saw.userAgent.is_ie){this.model.branding.onWindowResize(true);if(this.model.titleBar.titleContainer.offsetWidth>saw.header.knTitleBarCaptionMaxWidth){this.model.titleBar.titleContainer.style.width=saw.header.knTitleBarCaptionMaxWidth+"px"}}};saw.header.onKeypressHandler=function(a){var b=null;if(a.altKey&&a.ctrlKey&&(a.keyCode==68||a.keyCode==71)){if(a.keyCode==68){b=document.getElementById("dashboard")}else{b=document.getElementById("idSkipContentLink")}if(b!=null){b.focus()}}};saw.header.Viewer.prototype.checkAlerts=function(){saw.ondemandload.loadScripts({messageTemplate:"kuiDeliversFiles"},null,this.doCheckAlerts,this,null)};saw.header.Viewer.prototype.doCheckAlerts=function(){var a=obide.ServerRequests.requestAlerts();var b=obips.XMLDOM.selectSingleNode(a,"Alerts");if(!saw.header.alertSpan){return}while(saw.header.alertSpan.childNodes.length>0){saw.header.alertSpan.removeChild(saw.header.alertSpan.childNodes[0])}if(b!=null&&b.childNodes.length>0){this.createAlertsLink()}if(saw.home&&saw.home.viewer){saw.home.viewer.renderAlertLinks(b)}if(saw.dashboard){saw.dashboard.renderAlertLinks(b)}};saw.header.Viewer.prototype.createAlertsLink=function(){var b=document.createElement("span");saw.appendTextNode(b,saw.header.getLocalizedString("kmsgHeaderAlerts"));var a=document.createElement("IMG");a.border=0;a.src=saw.header.getResUrl("portal/indicatealert.gif");a.alt="";var c=document.createElement("A");c.href="javascript:void(null)";c.onclick=saw.header.Viewer.onAlerts;c.appendChild(a);c.id="idHeaderAlerts";c.appendChild(b);saw.header.alertSpan.appendChild(c)};saw.header.Viewer.prototype.setTitle=function(a){this.model.titleBar.setTitle(a)};saw.header.Viewer.prototype.setContextHelpLink=function(b,a){this.model.searchBar.setContextHelpLink(b,a)};saw.header.Viewer.prototype.setContextHelpModel=function(a){this.model.searchBar.setContextHelpModel(a)};saw.header.Viewer.prototype.getContextHelpModel=function(){return this.model.searchBar.helpModel};saw.header.Viewer.onAlerts=function(){saw.ondemandload.loadScripts({messageTemplate:"kuiDeliversFiles"},null,saw.header.Viewer.launchAlerts,null,null);return false};saw.header.Viewer.launchAlerts=function(){var a=new obide.AlertsDialog.Model();new obide.AlertsDialog.Viewer(a,obips.FloatingWindow.Manager.getSingleton())};saw.header.Viewer.prototype.skipToContentHeader=function(){var a=document.createElement("a");a.id="idSkipContentLink";a.className="HeaderSkipLink";saw.appendTextNode(a,saw.header.getLocalizedString("kmsgHeaderSkipToContent"));a.tabIndex="-1";a.href="javascript:saw.header.skipToContent()";a.onfocus=function(){this.style.top="2px"};a.onblur=function(){this.style.top="-999px"};var b=document.getElementById("app-header");if(b!==null){b.insertBefore(a,b.firstChild)}else{this.container.insertBefore(a,this.container.firstChild)}};saw.header.CloudNewViewer=function(a,c,b){saw.header.CloudNewViewer.baseConstructor.call(this,a,c);this.bRenderFull=b};saw.extend(saw.header.CloudNewViewer,saw.header.Viewer);saw.header.CloudNewViewer.prototype.render=function(){var l=document;if(!this.container||this.container==l.body){this.container=l.createElement("div");l.body.insertBefore(this.container,l.body.firstChild)}saw.addEventListener(document,"keyup",saw.header.onKeypressHandler);this.container.className="HeaderContainer";var f=this.bRenderFull!==undefined&&this.bRenderFull;var j=$("<div>").attr("id","app-header");var k=$("<td>").attr("id","headerlogo");var q=$("<td>").attr("id","headerBranding").addClass("HeaderBrandingCell");var h=$("<td>").attr("id","headerMenuBar");var e=$("<td>").attr("id","headerHomeIcon");var c=$("<td>").attr("id","headerNavigatorIcon").attr("tabindex","0");var n=$("<td>").attr("id","headerSearchBar");var a=$("<td>").attr("id","headerUserName");var m=$("<td>").attr("id","headerDropDown");var i=obips.ResourceManager.getSingleton();if(f){h.append($("<table>").css({width:"100%"}).append($("<tbody>").append($("<tr>").append(e).append(n).append(c).append(a).append(m))))}else{h.append($("<table>").css({width:"100%"}).append($("<tbody>").append($("<tr>").append(e.css({"padding-right":"5px"})).append(a).append(m))));var r=i.getResource(saw.header.fuseCloudResourceFile,"kmsgProductShortNameCloud").getString();r=r&&obips.String.hashCode(r);e.click(function(s){obips.launcher.Manager.getInstance().launchNewWindow(saw.commandToURL("bieehome"),r)})}j.append($("<table>").css({width:"100%"}).append($("<tbody>").append($("<tr>").append(k).append(q).append(h))));$(document.body).prepend(j);this.skipToContentHeader();k.append($("<img>").attr("src",i.getURL(saw.header.fuseCloudResourceFile,"cloudhome_oracle_logo").url));q.append($("<span>").text(i.getResource(saw.header.fuseCloudResourceFile,"kmsgHeaderBICloudBrandName").getString()));c.append($("<span>").addClass("icon-navigator_16"));e.append($("<span>").addClass("icon-home_16").attr("tabindex","0"));n.append($("<input>").addClass("inputtextbox").attr("id","header_searchbar_input").attr("tabindex","0")).append($("<img>").attr("src",i.getURL(saw.header.fuseCloudResourceFile,"cloudhome_search_icon2").url).attr("tabindex","0").click(saw.cloudnewhome&&saw.cloudnewhome.globalSearch).keypress(saw.cloudnewhome&&saw.cloudnewhome.globalSearch).keyup(saw.cloudnewhome&&saw.cloudnewhome.globalSearch));a.text(saw.getSessionInfos().user.displayName);m.append($("<img>").attr("src",i.getURL(saw.header.fuseCloudResourceFile,"cloudhome_dropdown_icon").url).attr("tabindex","0")).click(saw.header.CloudNewViewer.onSettings).keypress(saw.header.CloudNewViewer.onSettings).keyup(saw.header.CloudNewViewer.onSettings);if(f){return}var g=saw.createTable();g.className="masterGlobalLayer HeaderSecondBar";saw.setAriaRole(g,"presentation");var p=g.insertRow(0);var d=p.insertCell(0);var o=p.insertCell(1);if(saw.userAgent.is_ie7){obips.CSS.addClassToElement(g,"HeaderSecondBarMargin")}else{obips.CSS.addClassToElement(g,"HeaderSecondBarPadding")}this.model.titleBar.render(d);var b=this.container.firstChild;this.container.insertBefore(g,b)};saw.header.CloudNewViewer.onSettings=function(d){if(d.type==="click"||(d.type==="keypress"&&d.keyCode===13)){var c=[];c.push(new obips.ContextMenu.MenuOption(saw.header.getLocalizedString("kmsgHeaderMyAccount"),"",null,new obips.Callback(null,saw.header.CloudNewViewer.onMyAccount)));if(saw.header.getPrivilege("canAccessHelpMenu")){var h=saw.header.model.searchBar;var e=[];if(h.helpModel){var b=h.helpModel.getText&&h.helpModel.getText()||h.helpModel.text;e.push(new obips.ContextMenu.MenuOption(b,"",null,new obips.Callback(h,h.onHelpContext)))}e.push(new obips.ContextMenu.MenuOption(saw.header.getLocalizedString("kmsgHeaderHelpGetStarted"),"",null,new obips.Callback(h,h.onHelpGetStarted)));e.push(new obips.ContextMenu.MenuOption(saw.header.getLocalizedString("kmsgHeaderHelpVideos"),"",null,new obips.Callback(h,h.onHelpVideos)));e.push(new obips.ContextMenu.MenuOption(saw.header.getLocalizedString("kmsgHeaderHelpTutorials"),"",null,new obips.Callback(h,h.onHelpTutorials)));c.push(new obips.ContextMenu.MenuOption(saw.header.getLocalizedString("kmsgHeaderHelp"),"",null,null,e));c.push(new obips.ContextMenu.MenuOption(saw.header.getLocalizedString("kmsgHeaderHelpAboutCloudMenuEntry"),"",null,new obips.Callback(h,h.onHelpAbout)))}c.push(new obips.ContextMenu.MenuOption(saw.header.getLocalizedString("kmsgHeaderLogout"),"",null,new obips.Callback(null,saw.header.CloudNewViewer.onLogout)));var a=new obips.ContextMenu.Model(null,c);var g=obips.ContextMenu.Manager.getSingleton();var f={};if(d.type==="keypress"&&d.keyCode===13){f=saw.Position.createByDOMElement(document.getElementById("headerDropDown"))}else{f=saw.Position.createByDOMElement(document.getElementById("headerDropDownImg"));f.evt=d}g.displayAtPosition(a,f)}else{if(d.type==="keyup"&&d.keyCode==27){$("#headerDropDown").children()[0].blur()}}};saw.header.CloudNewViewer.onLogout=function(){saw.runThisURL(saw.commandToURL("Logoff"))};saw.header.CloudNewViewer.onMyAccount=function(){saw.header.Menubar.getManager().hidePopupPanel();var a=new saw.ondemandload.FuncProxy("obips.AccountInfo.launchDialog",{messageTemplate:"kuiMyAccountDialogHead"});a.exec()};saw.header.Branding=function(e,a,d,b,c){this.headerModel=e;this.logo=a?a:(saw.header.Branding.customTheme&&saw.header.Branding.customTheme.logoURL&&saw.header.Branding.customTheme.logoURL.length>0?saw.header.Branding.customTheme.logoURL:saw.header.getResUrl("common/oracleLogo.png"));this.productName=(saw.header.Branding.customTheme&&saw.header.Branding.customTheme.productName&&saw.header.Branding.customTheme.productName.length>0?saw.header.Branding.customTheme.productName:d);this.desc=b;this.href=c?c:saw.commandToURL("bieehome")};saw.header.Branding.Custom=function(b,e,d,a,c){this.skinName=b;this.skinRegionBgColor=c;this.logoName=a;this.logoURL=e;this.productName=d};saw.header.Branding.prototype.render=function(h){var f=document;var g=h.insertCell(0);g.className="HeaderLogo";var b=saw.createChildElement(g,"IMG");b.border=0;b.src=this.logo;b.alt=saw.header.getLocalizedString("kmsgHeaderOracleLogo");var a=h.insertCell(1);a.className="HeaderBrandingCell";if(obips.ResourceManager.getSingleton().getStyleProperty("headerBrandingGradientImgIsRequired")=="true"){b=saw.createChildElement(a,"IMG");b.border=0;b.src=saw.header.getResUrl("branding_whitegradient.png");b.alt=""}var e=saw.createChildElement(a,"span");e.className="masterBrandingAreaBrandName HeaderBrandName";var d=saw.header.getLocalizedString("kmsgHeaderBIBrandName");if(saw.getSessionInfos().getTenancyMode()===saw.session.SessionInfos.MULTIPLE_SERVICE_INSTANCE_BICS){d=saw.header.getLocalizedString("kmsgHeaderBICloudBrandName")}var c=this.productName?this.productName:d;saw.appendTextNode(e,c);this.nameSpan=e;this.minWidth=Math.max(40,saw.calcStringPixelWidth(c,null,e.className)+20);a.style.minWidth=this.minWidth+"px";saw.addEventListener(window,"resize",this.onWindowResize,this,true);this.gradientImg=b;this.container=h};saw.header.Branding.prototype.onWindowResize=function(b){var a=this.gradientImg;if(saw.userAgent.is_ie&&!saw.userAgent.is_ie9up&&b&&obips.ResourceManager.getSingleton().getStyleProperty("headerBrandingGradientImgIsRequired")=="true"){var c=0;for(var d=0;d<this.container.cells.length;d++){if(d!=1){c+=this.container.cells[d].offsetWidth}}a.style.width=Math.max(this.minWidth,saw.getClientWidth()-c-5)+"px"}this.nameSpan.style.width=Math.max(this.minWidth,a.offsetWidth-12)+"px"};saw.header.SearchBar=function(d,a,c,b){this.headerModel=d;this.helpModel=a?new saw.help.ModelBase(a,c):null;this.helpTOCLinks=b};saw.header.SearchBar.prototype.render=function(a,n){this.container=a;var o=this;var i=a.ownerDocument;a.align=saw.isRToL()?"left":"right";a.className="HeaderTopMenuBarCell";var f=saw.createTable();saw.setAriaRole(f,"presentation");a.appendChild(f);f.className="HeaderQuickSearch";var j=f.insertRow(0);j.id="idHeaderMenubarTR";if(!saw.getSessionInfos().isEnableSection508()&&saw.header.getPrivilege("canAccessSimpleSearchField")){var d=j.insertCell(j.cells.length);saw.appendTextNode(d,saw.header.getLocalizedString("kmsgHeaderSearchCaption"));d.className="HeaderQuickSearchPrompt";d=j.insertCell(j.cells.length);var c=saw.createLabel(saw.header.getLocalizedString("kmsgHeaderSearchTypeLabel"),"idHeaerQuickSearchObjectType","VpatOffscreenLabel",d);var p=i.createElement("Select");p.id="idHeaderSearchDropdown";d.appendChild(p);p.id="idHeaerQuickSearchObjectType";p.size=1;this.typeSelector=p;saw.header.populateTypeSelector(p);d=j.insertCell(j.cells.length);c=saw.createLabel(saw.header.getLocalizedString("kmsgHeaderSearchNameInputLabel"),"idHeaerQuickSearchNameInput","VpatOffscreenLabel",d);var b=i.createElement("input");b.type="text";b.id="idHeaerQuickSearchNameInput";d.appendChild(b);b.onkeydown=function(q){if(saw.getEvent(q).keyCode==13){o.onQuickSearch(q)}};this.searchValueInput=b;d=j.insertCell(j.cells.length);d.className="HeaderSearchGo";var e=i.createElement("img");e.src=obips.ResourceManager.getSingleton().getURL(obips.masterResourceBundlePath,"masterQuickQueryEnabled").url;e.alt=saw.header.getLocalizedString("kmsgHeaderSearchCaption");e.onmouseover=function(q){this.src=obips.ResourceManager.getSingleton().getURL(obips.masterResourceBundlePath,"masterQuickQueryHover").url};e.onmouseout=function(q){this.src=obips.ResourceManager.getSingleton().getURL(obips.masterResourceBundlePath,"masterQuickQueryEnabled").url};e.onmousedown=function(q){this.src=obips.ResourceManager.getSingleton().getURL(obips.masterResourceBundlePath,"masterQuickQueryDown").url};e.onmouseup=function(q){this.src=obips.ResourceManager.getSingleton().getURL(obips.masterResourceBundlePath,"masterQuickQueryHover").url};e.title=e.alt;d.onclick=function(q){o.onQuickSearch(q);return false};d.onkeypress=function(q){if(saw.getEvent(q).keyCode==13){o.onQuickSearch(q)}};d.appendChild(e);d.tabIndex=0}if(!n){var l=[];var h=saw.header.getPrivilege("canAccessCustomLinks");if(!saw.getSessionInfos().isEnableSection508()){if(saw.header.getPrivilege("canAccessAdvancedSearchLink")){l.push(new saw.header.Menubar.MenuModel("advanced",saw.header.getLocalizedString("kmsgHeaderSearchAdvanced"),null,new obips.Callback(this,this.onQuickSearchAdvanced)));l.push(null)}else{if(h){l.push({id:"advanced",hidden:true})}}var k=saw.getSessionInfos().isMultipleServiceInstanceMode();var m=false;if(k&&saw.header.getPrivilege("canAccessAdministrationMenu")&&(saw.header.getPrivilege("canAccessUserRoleAdmin")||saw.header.getPrivilege("canAccessModeler")||saw.header.getPrivilege("canManageSessions")||saw.header.getPrivilege("canIssueRawSQL")||saw.header.getPrivilege("canToggleMaintenanceMode")||saw.header.getPrivilege("canManageUsers")||saw.header.getPrivilege("canManagePrivileges")||saw.header.getPrivilege("canManageSpatialMetaData")||saw.header.getPrivilege("canAccessVisualAnalyzer"))){m=true}if(m){l.push(new saw.header.Menubar.MenuModel("admin",saw.header.getLocalizedString("kmsgHeaderAdministration"),null,null,new obips.Callback(this,this.onAdminDropDown),saw.header.getLocalizedString("kmsgHeaderAdminMenuDropDownMenu")));l.push(null)}else{if((!k&&this.headerModel.sessionInfos.privileges.isAdmin)||saw.getSessionInfos().isGlobalSystemUser){l.push(new saw.header.Menubar.MenuModel("admin",saw.header.getLocalizedString("kmsgHeaderAdministration"),null,new obips.Callback(this,this.onAdmin)));l.push(null)}else{if(h){l.push({id:"admin",hidden:true})}}}}else{if(h){l.push({id:"advanced",hidden:true});l.push({id:"admin",hidden:true})}}d=j.insertCell(j.cells.length);if(saw.header.getPrivilege("canAccessHelpMenu")){l.push(new saw.header.Menubar.MenuModel("help",saw.header.getLocalizedString("kmsgHeaderHelp"),null,null,new obips.Callback(this,this.onHelp),saw.header.getLocalizedString("kmsgHeaderHelpDropDownMenu")));l.push(null)}else{if(h){l.push({id:"help",hidden:true})}}if(!saw.getSessionInfos().getProperty("noLogoffUI")){l.push(new saw.header.Menubar.MenuModel("logout",saw.header.getLocalizedString("kmsgHeaderLogout"),null,new obips.Callback(this,this.onLogout)))}else{if(h){l.push({id:"logout",hidden:true})}}if(h){var g=saw.customlink.getCustomLinks();l=g.insertHeaderCustomLinks(l)}this.menubarModel=new saw.header.Menubar.Model(l);this.menubarView=new saw.header.Menubar.Viewer(this.menubarModel,d,false,true)}};saw.header.SearchBar.prototype.setContextHelpLink=function(a,b){this.setContextHelpModel(new saw.help.ModelBase(a,b))};saw.header.SearchBar.prototype.setContextHelpModel=function(a){this.helpModel=a;this.helpMenuModel=null};saw.header.SearchBar.prototype.onQuickSearch=function(a){var c=this.searchValueInput.value;if(c){var b=this.typeSelector.options[this.typeSelector.selectedIndex].value;if(saw.header.isInCatalogPage()){saw.catalog.getCatalogPageViewer().search(new saw.catalog.SearchTarget(c,"all",b),true)}else{saw.header.openURL(saw.commandToURL("catalog")+"&action=search&name="+saw.encodeURIComponent(c)+"&type="+b,a)}}};saw.header.SearchBar.prototype.onQuickSearchAdvanced=function(d,a){var e=this.typeSelector.options[this.typeSelector.selectedIndex].value;if(saw.header.isInCatalogPage()){var b=new saw.catalog.SearchTarget(this.searchValueInput.value,"all",e);saw.catalog.getCatalogPageViewer().showSearchPanel(b)}else{var c=saw.commandToURL("catalog")+"&action=searchpanel";if(e){c+="&type="+saw.encodeURIComponent(e)}if(this.searchValueInput.value){c+="&name="+saw.encodeURIComponent(this.searchValueInput.value)}saw.header.openURL(c,a)}};saw.header.SearchBar.prototype.onHelp=function(g,a){var d=[];if(this.helpModel){var c=this.helpModel.getText&&this.helpModel.getText()||this.helpModel.text;d.push(new obips.ContextMenu.MenuOption(c,"",null,new obips.Callback(this,this.onHelpContext)))}var h=saw.header.getPrivilege("enableCloudRepositoryHelp");if(!h){var f=[];for(var e in this.helpTOCLinks){var b=new obips.ContextMenu.MenuOption(e,"",null,new obips.Callback(this,this.onHelpTOC));b.helpUrl=this.helpTOCLinks[e];f.push(b)}d.push(new obips.ContextMenu.MenuOption(saw.header.getLocalizedString("kmsgHeaderHelpTOC"),"",null,null,f));d.push(new obips.ContextMenu.MenuOption(saw.header.getLocalizedString("kmsgHeaderHelpDocumentation"),"",null,new obips.Callback(this,this.onHelpDocumentation)));d.push(new obips.ContextMenu.MenuOption(saw.header.getLocalizedString("kmsgHeaderHelpOTN"),"",null,new obips.Callback(this,this.onHelpOTN)));d.push(new obips.ContextMenu.MenuOption(saw.header.getLocalizedString("kmsgHeaderHelpAbout"),"",null,new obips.Callback(this,this.onHelpAbout)))}if(h){d.push(new obips.ContextMenu.MenuOption(saw.header.getLocalizedString("kmsgHeaderHelpHowDoI"),"",null,new obips.Callback(this,this.onHelpHowDoI)));d.push(new obips.ContextMenu.MenuOption(saw.header.getLocalizedString("kmsgHeaderHelpVideos"),"",null,new obips.Callback(this,this.onHelpVideos)));d.push(new obips.ContextMenu.MenuOption(saw.header.getLocalizedString("kmsgHeaderHelpTutorials"),"",null,new obips.Callback(this,this.onHelpTutorials)))}if(saw.header.getPrivilege("enableProductTour")){d.push(new obips.ContextMenu.MenuOption(saw.header.getLocalizedString("kmsgProductTour"),"",null,new obips.Callback(this,this.onProductTour)))}if(h){d.push(new obips.ContextMenu.MenuOption(saw.header.getLocalizedString("kmsgHeaderHelpAboutCloudMenuEntry"),"",null,new obips.Callback(this,this.onHelpAbout)))}this.helpMenuModel=new obips.ContextMenu.Model(this,d);g.displayContextMenu(this.helpMenuModel)};saw.header.SearchBar.prototype.onHelpTOC=function(a){this.launchHelp(a.context.menuOption.helpUrl)};saw.header.SearchBar.prototype.onHelpDocumentation=function(){saw.header.Menubar.getManager().hidePopupPanel();obips.launcher.launchNewWindow("http://docs.oracle.com/en/middleware/middleware.html","_blank")};saw.header.SearchBar.prototype.onHelpOTN=function(){saw.header.Menubar.getManager().hidePopupPanel();obips.launcher.launchNewWindow("http://www.oracle.com/technetwork/middleware/bi-enterprise-edition/overview/index.html","_blank")};saw.header.SearchBar.prototype.onHelpAbout=function(){saw.header.Menubar.getManager().hidePopupPanel();var a=new saw.ondemandload.FuncProxy("saw.header.displayAboutDialog",{messageTemplate:"kuiAboutOBIEEDialog"});a.exec()};saw.header.cloud=saw.header.cloud||{};saw.header.cloud.getHelpBaseURL=function(){return(s_tCloudResources&&s_tCloudResources.cloudHelpBaseURL)||""};saw.header.cloud.getHelpURLForTopic=function(b){var a=saw.header.cloud.getHelpBaseURL();return a.replace("${mappedid}",b)};saw.header.cloud.launchHelpForTopic=function(a){obips.launcher.openHelpPage(saw.header.cloud.getHelpURLForTopic(a))};saw.header.SearchBar.prototype.onHelpHowDoI=function(){saw.header.Menubar.getManager().hidePopupPanel();saw.header.cloud.launchHelpForTopic("raashowdoireport")};saw.header.SearchBar.prototype.onHelpGetStarted=function(){saw.header.Menubar.getManager().hidePopupPanel();saw.header.cloud.launchHelpForTopic("raashowdoiuse")};saw.header.SearchBar.prototype.onHelpVideos=function(){saw.header.Menubar.getManager().hidePopupPanel();saw.header.cloud.launchHelpForTopic("raasvideos")};saw.header.SearchBar.prototype.onHelpTutorials=function(){saw.header.Menubar.getManager().hidePopupPanel();saw.header.cloud.launchHelpForTopic("raastutorials")};saw.header.SearchBar.prototype.onProductTour=function(){saw.ondemandload.retrieveAndAddResources({messageTemplate:"kuiProductTour"},null,new obips.Callback(this,this.onProductTourJsLoaded))};saw.header.SearchBar.prototype.onProductTourJsLoaded=function(){obips.ProductTour.start()};saw.header.SearchBar.prototype.onHelpContext=function(){this.launchHelp(this.helpModel)};saw.header.SearchBar.prototype.launchHelp=function(a){saw.header.Menubar.getManager().hidePopupPanel();obips.launcher.launchHelp(a)};saw.header.SearchBar.prototype.onLogout=function(){obips.BreadCrumbs.Manager.getSingleton().reset();saw.runThisURL(saw.commandToURL("Logoff"))};saw.header.SearchBar.prototype.onAdmin=function(b,a){saw.header.openURL(saw.commandToURL("Admin"),a)};saw.header.SearchBar.prototype.onAdminDropDown=function(c,a){if(!this.oAdminMenuModel){var b=new saw.ajax.Request("GetAdministrationMenu",this.createAdminDropDownMenu,this,c);b.setFatalErrorHandler(this.createAdminDropDownMenuErrorHandler);saw.ajax.createConnection(b).post()}else{c.displayContextMenu(this.oAdminMenuModel)}};saw.header.SearchBar.prototype.createAdminDropDownMenuErrorHandler=function(a,b){};saw.header.SearchBar.prototype.createAdminDropDownMenu=function(a,g){if(a){var c=a.getJSON();var b=[];for(var d=0;c&&d<c.length;++d){var h=c[d];var f=this.onAdminMenuLinkClick;switch(h.callType){case"SetMM":f=this.onToggleMaintenanceMode;break;case"switchToNewHome":f=this.switchToBICSFuseHomePage;break}var e=new obips.ContextMenu.MenuOption(h.displayName,"",null,new obips.Callback(this,f),null,h.disabled);e.objectJson=h;b.push(e)}if(this.headerModel.sessionInfos.user.isGlobalSystemUser){b.push(new obips.ContextMenu.MenuOption(saw.header.getLocalizedString("kmsgHeaderProductAdministration"),"",null,new obips.Callback(this,this.onAdmin)))}this.oAdminMenuModel=new obips.ContextMenu.Model(this,b);g.displayContextMenu(this.oAdminMenuModel)}};saw.header.SearchBar.prototype.onAdminMenuLinkClick=function(d,a){var b=d.context.menuOption.objectJson.url;var c=d.context.menuOption.objectJson.targetWindow;saw.header.openURL(b,a,c)};saw.header.SearchBar.prototype.onToggleMaintenanceMode=function(d,a){var b=d.context.menuOption.objectJson.functionArguments;var c=new saw.ajax.Request("SetMaintenanceMode",this.setMaintenanceModeCallback,this);c.setFatalErrorHandler(this.setMaintenanceModeCallback);c.addArg("MaintenanceMode",b.bMaintenanceMode);var e=saw.ajax.createConnection(c);e.post()};saw.header.SearchBar.prototype.setMaintenanceModeCallback=function(a){this.oAdminMenuModel=null};saw.header.SearchBar.prototype.switchToBICSFuseHomePage=function(e,a){var d=obips.ResourceManager.getSingleton().getResource(saw.header.fuseCloudResourceFile,"kmsgBICSSwitchLogoutMsg").getString();var c=confirm(d);if(!c){return}var b=new saw.ajax.Request("switchServiceInstanceHomePage",this.switchToBICSFuseHomePageCallback,this);b.setFatalErrorHandler(this.switchToBICSFuseHomePageCallback);b.addArg("homepage","new");var f=saw.ajax.createConnection(b);f.post()};saw.header.SearchBar.prototype.switchToBICSFuseHomePageCallback=function(a){saw.runThisURL(saw.commandToURL("Logoff"))};saw.header.TitleBar=function(b,a){this.headerModel=b;this.title=a};saw.header.TitleBar.prototype.render=function(e){var a=saw.createChildElement(e,"span","HeaderTitleBarLeft");if(saw.userAgent.is_ie7){obips.CSS.addClassToElement(a,"HeaderTitleCellMargin")}var g=(obips.ResourceManager.getSingleton().getStyleProperty("tabBarTabStartImgRequired")=="true")?true:false;if(g){var b=saw.createChildElement(a,"img");b.src=saw.header.getResUrl("uicomponents/obips.TabBar/l1_t1_sel_start.gif");b.alt=""}var c=(obips.ResourceManager.getSingleton().getStyleProperty("renderPageTitleAsTab")=="true")?"masterTabBarTabPrimarySelected masterH3 HeaderTitleBarCaption":"masterH1 HeaderTitleBarCaption";a=saw.createChildElement(e,"span",c);if(saw.userAgent.is_nav){a.style.marginBottom="-3px"}a.id="idHeaderTitleCell";a.tabIndex=0;this.titleContainer=a;var d=this.title?this.title:saw.header.getLocalizedString("kmsgHeaderUntitled");this.setTitle(d);saw.setAriaProperty(a,"aria-label",d);saw.setAriaRole(a,"label");a=saw.createChildElement(e,"span","HeaderTitleBarIcons");a.style.display="none";this.iconContainer=a;a=saw.createChildElement(e,"span","HeaderTitleBarRight");var f=(obips.ResourceManager.getSingleton().getStyleProperty("tabBarTabEndImgRequired")=="true")?true:false;if(f){b=saw.createChildElement(a,"img");b.src=saw.header.getResUrl("uicomponents/obips.TabBar/l1_tn_sel_end.gif");b.alt=""}this.container=e;e.className="HeaderTitleBarCell"};saw.header.TitleBar.prototype.setTitle=function(a){if(this.titleContainer){saw.clearInnerHTML(this.titleContainer);this.titleContainer.appendChild(document.createTextNode(a))}};saw.header.NavBar=function(b,a){this.headerModel=b;this.defaultNewType=a;this.isActingAs=this.headerModel.sessionInfos.user.actualUserId.toLowerCase()!=this.headerModel.sessionInfos.user.id.toLowerCase()};saw.header.NavBar.prototype.render=function(a){a.className="HeaderNavBarCell";var j=a.appendChild(document.createElement("div"));j.align=saw.isRToL()?"left":"right";var c=saw.createTable(1,1,j);saw.setAriaRole(c,"presentation");var h=c.rows[0];saw.header.alertSpan=document.createElement("span");c.rows[0].cells[0].appendChild(saw.header.alertSpan);c.rows[0].cells[0].className="HeaderAlerts";var k=new Array();if(this.headerModel.sessionInfos.hasAlerts){saw.header.viewer.createAlertsLink()}var f=saw.header.getPrivilege("canAccessCustomLinks");if(saw.header.getPrivilege("canAccessHomePage")){k.push(saw.home?new saw.header.Menubar.StaticText(saw.header.getLocalizedString("kmsgHeaderHome"),"uberBarTextMenuButtonSpan HeaderHomeCell","home"):new saw.header.Menubar.MenuModel("home",saw.header.getLocalizedString("kmsgHeaderHome"),null,new obips.Callback(this,this.onHome)));k.push(null)}else{if(f){k.push({id:"home",hidden:true})}}if(!saw.getSessionInfos().isEnableSection508()&&saw.header.getPrivilege("canAccessCatalogUI")){var i=saw.header.getLocalizedString("kmsgCatalogCaption");k.push(saw.catalog.CatalogView?new saw.header.Menubar.StaticText(i,"uberBarTextMenuButtonSpan HeaderHomeCell","catalog"):new saw.header.Menubar.MenuModel("catalog",i,null,new obips.Callback(this,this.onOpenCatalogPage)));k.push(null)}else{if(f){k.push({id:"catalog",hidden:true})}}var b=saw.header.getPrivilege("canAccessFavoritesMenu");if(b&&saw.getSessionInfos().privileges.personalStorage){k.push(new saw.header.Menubar.MenuModel("favorites",saw.header.getLocalizedString("kmsgHeaderFavorites"),null,null,new obips.Callback(this,this.onLoadFavoritesList),saw.header.getLocalizedString("kmsgHeaderFavoritesDropDownMenu")));k.push(null)}else{if(f){k.push({id:"favorites",hidden:true})}}if(saw.header.getPrivilege("canAccessDashboardsMenu")){k.push(new saw.header.Menubar.MenuModel("dashboard",saw.header.getLocalizedString("kmsgHeaderDashboard"),null,new obips.Callback(this,this.onDashboard),new obips.Callback(this,this.onLoadDashboardList),saw.header.getLocalizedString("kmsgHeaderDashboardDropDownMenu")));k.push(null)}else{if(f){k.push({id:"dashboard",hidden:true})}}if(saw.getSessionInfos().hasCreatableItem&&saw.header.getPrivilege("canAccessNewMenu")){k.push(new saw.header.Menubar.MenuModel("new",saw.header.getLocalizedString("kmsgHeaderNew"),saw.header.getResUrl("catalog/new_ena.png"),new obips.Callback(this,this.onNewMenuClicked),new obips.Callback(this,this.onDisplayNewMenu),saw.header.getLocalizedString("kmsgHeaderNewDropDownMenu")));k.push(null)}else{if(f){k.push({id:"new",hidden:true})}}if(saw.header.getPrivilege("canAccessOpenMenu")){k.push(new saw.header.Menubar.MenuModel("open",saw.header.getLocalizedString("kmsgHeaderOpen"),saw.header.getResUrl("catalog/folderopen_ena.png"),new obips.Callback(this,this.onDisplayOpenDialog),new obips.Callback(this,this.onDisplayOpenMenu),saw.header.getLocalizedString("kmsgHeaderOpenDropDownMenu")));k.push(null)}else{if(f){k.push({id:"open",hidden:true})}}k.push(new saw.header.Menubar.StaticText(saw.header.getLocalizedString("kmsgHeaderLoggedInAs"),"uberBarTextMenuButtonSpan HeaderLoggedInAs"));var e=this.headerModel.sessionInfos.user.displayName;if(this.isActingAs){e=this.headerModel.sessionInfos.user.actualUserDisplayName+" "+saw.header.getLocalizedString("kmsgHeaderActingAsUser",this.headerModel.sessionInfos.user.displayName)}if(this.isActingAs||saw.header.getPrivilege("canAccessMyAccountLink")){tUserMenu=new saw.header.Menubar.MenuModel("user",e,null,new obips.Callback(this,this.onMyAccount),new obips.Callback(this,this.onSettings),saw.header.getLocalizedString("kmsgHeaderSignInDropDownMenu",e));tUserMenu.cssClass="HeaderUserName";k.push(tUserMenu)}else{if(f){k.push({id:"user",hidden:true})}k.push(new saw.header.Menubar.StaticText(e,"uberBarTextMenuButtonSpan HeaderLoggedInAs"))}if(f){var d=saw.customlink.getCustomLinks();k=d.insertHeaderCustomLinks(k)}this.menubarModel=new saw.header.Menubar.Model(k,true);var g=h.insertCell(h.cells.length);this.menubarView=new saw.header.Menubar.Viewer(this.menubarModel,g,false,true);g.className="HeaderNavMenubarCell"};saw.header.NavBar.prototype.onSettings=function(c,a){var d=saw.getSessionInfos().privileges.canUseMyAccount;if(!this.settingsMenuModel){var b=[];b.push(new obips.ContextMenu.MenuOption(saw.header.getLocalizedString("kmsgHeaderMyAccount"),"",null,new obips.Callback(this,this.onMyAccount)));if(this.headerModel.sessionInfos.privileges.canActAs){b.push(new obips.ContextMenu.MenuOption(saw.header.getLocalizedString("kmsgHeaderActAs"),"",null,new obips.Callback(this,this.onActAs)))}if(this.isActingAs){b.push(new obips.ContextMenu.MenuOption(saw.header.getLocalizedString("kmsgHeaderStopActingAs",this.headerModel.sessionInfos.user.displayName),"",null,new obips.Callback(this,this.onStopActAs)))}this.settingsMenuModel=new obips.ContextMenu.Model(this,b)}c.displayContextMenu(this.settingsMenuModel)};saw.header.NavBar.prototype.onMyAccount=function(){saw.header.Menubar.getManager().hidePopupPanel();var a=new saw.ondemandload.FuncProxy("obips.AccountInfo.launchDialog",{messageTemplate:"kuiMyAccountDialogHead"});a.exec()};saw.header.NavBar.prototype.onActAs=function(){saw.header.Menubar.getManager().hidePopupPanel();var b=new saw.ondemandload.FuncProxy("saw.displayActAsDlg",{command:"displayActAsDlg"});var a={clientX:saw.getClientWidth()-100,clientY:50};b.exec(a)};saw.header.NavBar.prototype.onStopActAs=function(){obips.launcher.launchURL(saw.commandToURL("RevertToSelf")+"&RevertToSelf=true",{ensureFreshUrl:true})};saw.header.NavBar.prototype.onFijiHome=function(){window.location.href=saw.commandToURL("fijihome")+"&PortalPath="+saw.encodeURIComponent("/users/administrator/_portal")+"&fijitype=Default"};saw.header.NavBar.prototype.onFijiHomeMenuItem=function(a){var b=a.context.menuOption.fijihomeType;window.location.href=saw.commandToURL("fijihome")+"&PortalPath="+saw.encodeURIComponent("/users/administrator/_portal")+"&fijitype="+b};saw.header.NavBar.prototype.onDisplayfijihomeMenu=function(c){if(!this.fijiMenuModel){var b=new Array();var a=new obips.ContextMenu.MenuOption(saw.header.getLocalizedString("kmsgHeaderHomeMenuDefault"),"",null,new obips.Callback(this,this.onFijiHomeMenuItem));a.fijihomeType="Default";b.push(a);var a=new obips.ContextMenu.MenuOption(saw.header.getLocalizedString("kmsgHeaderHomeMenuBlaf"),"",null,new obips.Callback(this,this.onFijiHomeMenuItem));a.fijihomeType="Blaf";b.push(a);this.fijiMenuModel=new obips.ContextMenu.Model(this,b)}c.displayContextMenu(this.fijiMenuModel)};saw.header.NavBar.prototype.onHome=function(b,a){saw.header.openURL(saw.commandToURL("bieehome"),a)};saw.header.NavBar.prototype.onNewObject=function(b){b.curClientX=b.clientX;b.curClientY=b.clientY;saw.header.Menubar.getManager().hidePopupPanel();var c=saw.getEventTarget(b);c=saw.findAncestorElementOrSelf(c,"DIV");obips.BreadCrumbs.Manager.getSingleton().reset();var a=null;if(saw.header.isInCatalogPage()){a=saw.catalog.getCatalogPageViewer().getCurrentFolderPath()}saw.catalogaction.getActionManager().newObject(c.creatableItem,a,b)};saw.header.NavBar.prototype.onOpenCatalogPage=function(a){a=saw.getEvent(a);saw.header.openURL(saw.commandToURL("catalog"),a)};saw.header.NavBar.prototype.onDisplayOpenDialog=function(){var a=new saw.ondemandload.FuncProxy("saw.catalog.displayOpenDialog",{messageTemplate:"kuiCatalogBrowserDialogHead"});a.exec(new obips.Callback(this,this.onOpenObject))};saw.header.NavBar.prototype.onOpenObject=function(a){this._openObject(a.getSelectedItemInfo());return true};saw.header.NavBar.prototype._openObject=function(b,a){saw.catalogaction.getActionManager().handleAction(saw.catalogaction.getActionManager().getDefaultAction(b).id,b.path,b.signature,b,null,{evt:a})};saw.header.NavBar.prototype.onDashboard=function(b,a){a=saw.getEvent(a);if(saw.getSessionInfos().portalPath){this.onLoadDashboardList(b,a)}else{saw.header.openURL(saw.commandToURL("dashboard"),a)}};saw.header.NavBar.prototype.onGoToPortal=function(a){a=saw.getEvent(a);var d=saw.getEventTarget(a);var b=d.portalPath;if(!b){b=this.headerModel.getMyPortalPath()}var c=null;if(typeof isFijiEnv=="undefined"){c=saw.commandToURL("dashboard")+"&PortalPath="+saw.encodeURIComponent(b)}else{if(FABridge.flash){saw.header.getViewer().setTitle(d.innerHTML);var e=FABridge.flash.root();if(e){e.showContentDocName(b);return}}c=saw.commandToURL("fijihome")+"&PortalPath="+saw.encodeURIComponent(b)+"&fijitype="+fijitype}if(d.page){c+="&page="+saw.encodeURIComponent(d.page)}obips.BreadCrumbs.Manager.getSingleton().reset();saw.header.openURL(c,a)};saw.header.NavBar.prototype._createPortalLink=function(e,b,a,c){var d=saw.createChildElement(e,"a","HeaderPortalLink");d.href="javascript:void(null)";d.onclick=c;d.title=a;d.tabIndex=0;saw.setAriaProperty(d,"aria-label",b);saw.setAriaRole(d,"menuitem");d.appendChild(d.ownerDocument.createTextNode(b));return d};saw.header.NavBar.prototype.onLoadFavoritesList=function(e,b){this.favoritesDiv=saw.createChildElement(document.body,"div","masterMenu HeaderPopupWindow");this.favoritesDiv.id="favoritesHeaderMainDiv";var d=saw.createChildElement(this.favoritesDiv,"div");this.favoritesTreeDiv=saw.createChildElement(this.favoritesDiv,"div");this.favoritesTreeDiv.id="favoritesTreeContainerHeader";var c=this;this.favoritesStaticMenuDiv=d;this.favoritesTreeScrollablePanel=saw.header.createScrollableMenuPanel(this.favoritesTreeDiv,e.menuSpan);this.favoritesMenuItemsDiv=this.favoritesTreeScrollablePanel.getContentContainer();c=this;this.favoritesMenuItemsListDiv=saw.createChildElement(this.favoritesMenuItemsDiv,"div","HeaderSharedProtals");var a=saw.header.addLoadingIndicator(this.favoritesMenuItemsListDiv);a.style.margin="3px";this.favoritesMenuItemsListDiv.onclick=function(f){saw.stopEventPropagation(saw.getEvent(f))};saw.ondemandload.retrieveAndAddResources({messageTemplate:"kuiFavorites"},null,new obips.Callback(this,this.onFavoritesJsLoaded),e);saw.header.Menubar.getManager().showPopupPanel(e.menuSpan,this.favoritesDiv,b,new obips.Callback(this,this.saveTreeState))};saw.header.NavBar.prototype.onFavoritesJsLoaded=function(b,a){saw.clearInnerHTML(this.favoritesMenuItemsListDiv);saw.clearInnerHTML(this.favoritesStaticMenuDiv);var e=saw.header.FavoriteHeaderMenu.getSingleton();var g=e.getCurrentItemPath();this.addToFavMenuDiv=saw.createChildElement(this.favoritesStaticMenuDiv,"div");var d=false;if(g!=null){var c=obips.catalog.Catalog.getSingleton();c.getItemInfo(g,null,null,new obips.Callback(this,this.buildFavoritesMenuItems));d=true}if(!saw.getSessionInfos().isEnableSection508()&&!saw.header.getPrivilege("enableCloudBieeHome")){saw.header.Viewer.addMenuOptionLink(this.favoritesStaticMenuDiv,function(i){saw.header.getViewer().model.navBar.onManageFavorites(saw.getEvent(i));return false},saw.header.getResUrl("catalog/folderopen.png"),saw.header.getLocalizedString("kmsgManageFavoritesDot"));d=true}if(d){saw.createChildElement(this.favoritesStaticMenuDiv,"div","FavoritesSeparator")}var f=new saw.favorites.favoritestree.Model();f.role="menuitem";this.favViewer=new saw.favorites.favoritestree.Viewer(f,this.favoritesMenuItemsListDiv,null,false,null,null,true);this.favViewer.treeViewer.div.style.height="auto";this.favViewer.addEventListener(new obips.Observable.EventListener(saw.favorites.favoritestree.Viewer.EventType.TREE_NODE_CLICKED,new obips.Callback(this,this.onFavoritesTreeNodeClick)));var h=saw.header.getMaxMenuHeight(b.menuSpan);h=h-this.favoritesStaticMenuDiv.offsetHeight;this.favoritesTreeScrollablePanel.resize(h);saw.header.Menubar.getManager().showPopupPanel(b.menuSpan,this.favoritesDiv,a,new obips.Callback(this,this.saveTreeState))};saw.header.NavBar.prototype.saveTreeState=function(){if(document.getElementById("favoritesHeaderMainDiv")&&this.favViewer){this.favViewer.saveFavoriteTreeState()}};saw.header.NavBar.prototype.buildFavoritesMenuItems=function(b){if(!b||!b.itemInfo){return}this.favItemInfo=b.itemInfo;var a=b.itemInfo.getObjectTypeInfo();if(a&&a.canBeFavorite){if(b.itemInfo.isFavorite){saw.header.Viewer.addMenuOptionLink(this.addToFavMenuDiv,function(c){saw.header.getViewer().model.navBar.onRemoveFavorites(saw.getEvent(c));return false},saw.catalog.getImgUrl("catalog/removefromfavorites_ena.png"),saw.catalog.getLocalizedString("kmsgRemoveFromFavorites"))}else{saw.header.Viewer.addMenuOptionLink(this.addToFavMenuDiv,function(c){saw.header.getViewer().model.navBar.onAddFavorites(saw.getEvent(c));return false},saw.catalog.getImgUrl("catalog/addtofavorites_ena.png"),saw.catalog.getLocalizedString("kmsgAddToFavorites"))}}};saw.header.NavBar.prototype.onAddFavorites=function(a){var b=saw.favorites.FavoritesManager.getSingleton();b.addItemToFavorites(null,this.favItemInfo,new obips.Callback(this,this.onFavoritesJsLoaded))};saw.header.NavBar.prototype.onRemoveFavorites=function(a){var b=saw.favorites.FavoritesManager.getSingleton();b.deleteFavoritesItem(null,this.favItemInfo,new obips.Callback(this,this.onFavoritesJsLoaded))};saw.header.NavBar.prototype.onManageFavorites=function(a){this.saveTreeState();var b=saw.favorites.FavoritesManager.getSingleton();var c=b.getFavorites(new obips.Callback(this,this.onManageFavoritesCB))};saw.header.NavBar.prototype.onManageFavoritesCB=function(d){this.favoriteTimeStamp=d.timestamp;var c=d.favoritelist;var b=new saw.favorites.ManageFavoritesDialog.Model(c);var a=new saw.favorites.ManageFavoritesDialog.Viewer(b)};saw.header.NavBar.prototype.onFavoritesTreeNodeClick=function(a){var c=a.context;if(c.favType==saw.favorites.Favorite.type.FAVORITES_CATALOGITEM){var b=c.itemInfo;saw.catalogaction.getActionManager().handleAction(saw.catalogaction.getActionManager().getDefaultAction(b).id,b.path,b.signature,b,null,{evt:a});obips.BreadCrumbs.Manager.getSingleton().reset()}return true};saw.header.NavBar.prototype.onLoadDashboardList=function(f,b){if(!this.portalsDiv){this.portalsDiv=saw.createChildElement(document.body,"div","masterMenu HeaderPopupWindow");var d=saw.header.createScrollableMenuPanel(this.portalsDiv,f.menuSpan);this.portalMenuItemsDiv=d.getContentContainer();if(saw.getSessionInfos().privileges.personalStorage){var g=saw.createChildElement(this.portalMenuItemsDiv,"div");var e=saw.header.getLocalizedString("kmsgHeaderMyDashboard");if(saw.getSessionInfos().portalPath==this.headerModel.getMyPortalPath()){var c=saw.createChildElement(g,"div","HeaderPortalLink HeaderCurrentPortal");c.appendChild(document.createTextNode(e))}else{this._createPortalLink(g,e,e,function(h){saw.header.getViewer().model.navBar.onGoToPortal(h);return false})}}this.sharedPortalsDiv=saw.createChildElement(this.portalMenuItemsDiv,"div","HeaderSharedProtals");var a=saw.header.addLoadingIndicator(this.sharedPortalsDiv);a.style.margin="3px";saw.ondemandload.retrieveAndAddResources({command:"getDashboardList"},null,new obips.Callback(this,this.loadPortalListCallback),f);this.portalsDiv.style.visibility="hidden";d.resize()}else{saw.header.resizeScrollableMenu(this.portalsDiv,f.menuSpan)}saw.header.Menubar.getManager().showPopupPanel(f.menuSpan,this.portalsDiv)};saw.header.NavBar.portalGroupLinkClicked=function(j){j=saw.getEvent(j);var i=saw.getEventTarget(j);while(i.tagName!="DIV"){i=i.parentNode}var b=saw.getLastChildElement(i);var f=b.style.display!="none";b.style.display=f?"none":"block";var a=saw.getFirstChildElement(saw.getFirstChildElement(i));a.src=!f?obips.ResourceManager.getSingleton().getURL(obips.masterResourceBundlePath,"masterDisclosureDashboardExpandedButtonEnabled").url:obips.ResourceManager.getSingleton().getURL(obips.masterResourceBundlePath,"masterDisclosureDashboardCollapsedButtonEnabled").url;a.alt=saw.header.getLocalizedString(!f?"kmsgHeaderDisclosureExpanded":"kmsgHeaderDisclosureCollapsed");try{var c=i.getAttribute("folderName");if(c){var h=saw.storage.ClientStorageManager.getSingleton();var d=h.getState(saw.header.StateID.DASHBOARDS_MENU);menuState=d?saw.json.parse(d):{};if(menuState){menuState[c]=!f?"expanded":"collapsed";h.setState(saw.header.StateID.DASHBOARDS_MENU,saw.json.toString(menuState))}}}catch(g){}saw.header.resizeScrollableMenu(saw.header.getViewer().model.navBar.portalsDiv);saw.stopEventPropagation(j);return false};saw.header.NavBar.prototype.loadPortalListCallback=function(y,b){saw.clearInnerHTML(this.sharedPortalsDiv);var t=b.getJSON();if(t.length>0){var k=saw.getSessionInfos().portalPath;var g=new Object;var c=0;for(var x=0;x<t.length;x++){c+=t[x].portals.length;if(c<saw.header.knMaxExpandedPortals){g[t[x].folderName]=true}else{break}}var a=b.getBlockById("recent")&&b.getBlockById("recent").data;if(a){var n=a.path;var u=document.createElement("div");u.className="HeaderRecentDashboard";this.portalMenuItemsDiv.insertBefore(u,this.portalMenuItemsDiv.firstChild);var f=this._createPortalLink(u,saw.header.getLocalizedString("kmsgHeaderMostRecentDashboard",a.caption),a.description,function(e){saw.header.getViewer().model.navBar.onGoToPortal(e);return false});f.portalPath=saw.getFolder(n);f.page=saw.getItemName(n)}var r=null;try{var o=saw.storage.ClientStorageManager.getSingleton();var p=o.getState(saw.header.StateID.DASHBOARDS_MENU);r=p?saw.json.parse(p):null}catch(z){r=null}for(var x=0;x<t.length;x++){var C=t[x].portals;var s=saw.createChildElement(this.sharedPortalsDiv,"div","HeaderPortalsGroup");s.setAttribute("folderName",t[x].folderName);if(C.length>0){var B=saw.createChildElement(s,"a","HeaderPortalsGroupLink");B.href="javascript:void(null)";B.onclick=saw.header.NavBar.portalGroupLinkClicked;var h=saw.createChildElement(B,"img");B.tabIndex=0;saw.setAriaRole(B,"menuitem");saw.setAriaProperty(B,"aria-label",t[x].folderName);B.setAttribute("foldername",t[x].folderName);B.appendChild(document.createTextNode(" "+t[x].folderName));if(x==0&&saw.getSessionInfos().portalPath==this.headerModel.getMyPortalPath()){B.focus()}var m=false;if(r&&r[t[x].folderName]){var l=r[t[x].folderName];if(l=="expanded"){m=true}else{m=false}}else{m=g[t[x].folderName]}var w=saw.createChildElement(s,"div","HeaderPortalsList");for(var v=0;v<C.length;v++){if(k==C[v].portalPath){var q=saw.createChildElement(w,"div","HeaderPortalLink HeaderCurrentPortal");q.appendChild(document.createTextNode(C[v].portalName));m=true}else{var d=this._createPortalLink(w,C[v].portalName,C[v].portalDesc,function(e){saw.header.getViewer().model.navBar.onGoToPortal(e);return false});d.portalPath=C[v].portalPath}}h.src=m?obips.ResourceManager.getSingleton().getURL(obips.masterResourceBundlePath,"masterDisclosureDashboardExpandedButtonEnabled").url:obips.ResourceManager.getSingleton().getURL(obips.masterResourceBundlePath,"masterDisclosureDashboardCollapsedButtonEnabled").url;h.alt=saw.header.getLocalizedString(m?"kmsgHeaderDisclosureExpanded":"kmsgHeaderDisclosureCollapsed");w.style.display=m?"block":"none"}else{var A=saw.createChildElement(s,"div","HeaderCreateGroupTitle");A.setAttribute("foldername",t[x].folderName);A.appendChild(document.createTextNode(" "+t[x].folderName))}}}saw.header.resizeScrollableMenu(this.portalsDiv)};saw.header.NavBar.prototype.onDisplayNewMenu=function(c,b){if(!this.newMenuDiv){this.newMenuDiv=saw.createChildElement(document.body,"div","masterMenu HeaderPopupWindow");if(saw.catalogaction&&saw.catalogaction.getCreateList()){this.onCreatableObjectListLoaded(c)}else{var a=saw.header.addLoadingIndicator(this.newMenuDiv);saw.ondemandload.retrieveAndAddResources({messageTemplate:"kuiCreatableItemTypes"},null,new obips.Callback(this,this.onCreatableObjectListLoaded),c)}}else{saw.header.resizeScrollableMenu(this.newMenuDiv,c.menuSpan)}saw.header.Menubar.getManager().showPopupPanel(c.menuSpan,this.newMenuDiv);if(a){a.tabIndex=-1;if(typeof(a.focus)=="function"){a.focus()}}};saw.header.NavBar.prototype.onCreatableObjectListLoaded=function(a){saw.clearInnerHTML(this.newMenuDiv);this.newMenuPanel=saw.header.createScrollableMenuPanel(this.newMenuDiv,a.menuSpan);var b=((this.newMenuDiv&&this.newMenuDiv.style.display=="none")?true:false);saw.header.Viewer.renderCreatableItemMenu(this.newMenuPanel.getContentContainer(),function(c){saw.header.getViewer().model.navBar.onNewObject(saw.getEvent(c));return false},null,b);this.newMenuPanel.resize()};saw.header.getMaxMenuHeight=function(a){return saw.getClientHeight()-saw.getElementXY(a)[1]-40};saw.header.createScrollableMenuPanel=function(d,a){var c=saw.header.getMaxMenuHeight(a);var b=new obips.ScrollablePanel(d,c);return b};saw.header.resizeScrollableMenu=function(b,a){if(b.parentNode!=b.ownerDocument.body){b.ownerDocument.body.appendChild(b)}if(b.style.display!="block"){b.style.visibility="hidden";b.style.display="block"}if(b.scrollPanel){b.scrollPanel.resize(a?saw.header.getMaxMenuHeight(a):null)}};saw.header.Viewer.renderCreatableItemMenu=function(a,k,g,e){var c=saw.catalogaction.getCreateList();if(c){for(var f=0;f<c.length;f++){var b=c[f];var h=saw.createChildElement(a,"div","HeaderCreateGroupTitle");h.appendChild(document.createTextNode(b.name));h.title=b.description;for(var d=0;d<b.items.length;d++){var l=b.items[d];var m=saw.header.Viewer.addMenuOptionLink(a,k,l.newIcon,l.name);m.creatableItem=l;if(f==0&&d==0&&!e){saw.getLastChildElement(m).focus()}}}}};saw.header.NavBar.prototype.onDisplayOpenMenu=function(c,a){if(!this.openListDiv){this.openListDiv=saw.createChildElement(document.body,"div","masterMenu HeaderPopupWindow");var b=saw.createChildElement(this.openListDiv,"div");saw.header.Viewer.addMenuOptionLink(b,function(d){saw.header.getViewer().model.navBar.onDisplayOpenDialog(d);return false},saw.header.getResUrl("catalog/folderopen.png"),saw.header.getLocalizedString("kmsgHeaderOpenCatalogDialog"));this.mruListDiv=saw.createChildElement(this.openListDiv,"div","HeaderMRUListDiv");saw.header.addLoadingIndicator(this.mruListDiv);if(saw.getSessionInfos().mostRecentLists){this.loadMostRecentListCallback(c)}else{saw.ondemandload.retrieveAndAddResources({messageTemplate:"kmsgMostRecentItemList"},null,new obips.Callback(this,this.loadMostRecentListCallback),c)}}saw.header.Menubar.getManager().showPopupPanel(c.menuSpan,this.openListDiv,a)};saw.header.Viewer.addMenuOptionLink=function(a,g,b,c,e,d){var f=saw.createChildElement(a,"div","HeaderMenuOption");var i=saw.createChildElement(f,"img");i.src=b;i.onclick=g;i.alt=d||"";var h=saw.createChildElement(f,"a","HeaderCatalogItemLink");h.href="javascript:void(null)";h.onclick=g;if(saw.getSessionInfos().isEnableSection508()){h.title=c;h.tabIndex=0;saw.setAriaProperty(h,"aria-label",c);saw.setAriaRole(h,"menuitem")}h.appendChild(h.ownerDocument.createTextNode(c));if(e){h.title=e}return f};saw.header.Viewer.addMenuSeparator=function(a){saw.createChildElement(a,"div","HeaderMenuOptinSeparator")};saw.header.NavBar.prototype.loadMostRecentListCallback=function(b){saw.clearInnerHTML(this.mruListDiv);var e=saw.createTable(1,2,this.mruListDiv);saw.setAriaRole(e,"presentation");var d=e.rows[0].cells[0];d.className="HeaderRecentItems";var a=saw.getSessionInfos().mostRecentLists;this.renderMostRecentMenus(a.getRecentItems(),d,saw.header.getLocalizedString("kmsgHeaderCatalogItemListRecent"));var c=e.rows[0].cells[1];c.className="HeaderFavoriteItems";this.renderMostRecentMenus(a.getMostFrequentlyViewed(),c,saw.header.getLocalizedString("kmsgHeaderCatalogItemListFavorites"));saw.positionByDOMElement(b.menuSpan,this.openListDiv)};saw.header.NavBar.prototype.renderMostRecentMenus=function(c,f,b){var a=saw.createChildElement(f,"div");a.className="HeaderCatalogItemsTitle";a.appendChild(document.createTextNode(b));for(var d=0;d<c.length&&d<6;d++){if(!saw.getSessionInfos().isEnableSection508()||saw.catalog.isVpatSupportedObject(c[d])){var e=saw.header.Viewer.addMenuOptionLink(f,function(g){saw.header.getViewer().model.navBar.onOpenItem(g);return false},saw.catalog.getItemIcon(c[d],false,saw.catalog.IconType.SMALL,saw.catalog.ThumbnailFlags.NONE),c[d].caption,c[d].description||c[d].caption,saw.catalog.getItemTypeName(c[d]));e.itemInfo=c[d]}}};saw.header.NavBar.prototype.onOpenItem=function(a){a=saw.getEvent(a);var b=saw.getEventTarget(a);b=saw.findAncestorElementOrSelf(b,"DIV");if(b){this._openObject(b.itemInfo,a)}};saw.header.Menubar=function(){};saw.header.Menubar.Manager=function(){if(saw.header.Menubar.manager){return saw.header.Menubar.manager}saw.header.Menubar.manager=this;this.openOnMouseClick=null;this.openedMenuDiv=null;this.menuSpan=null;this.contextMenuClosedHandler=new obips.Observable.EventListener(obips.ContextMenu.EventType.CONTEXT_MENU_CLOSED,new obips.Callback(this,this._onHideContextMenu));obips.ContextMenu.Manager.getSingleton().addEventListener(this.contextMenuClosedHandler);saw.addEventListener(window,"unload",function(){saw.header.Menubar.getManager()._cleanup()})};saw.header.Menubar.getManager=function(){return new saw.header.Menubar.Manager()};saw.header.Menubar.Manager.prototype._cleanup=function(){obips.ContextMenu.Manager.getSingleton().removeEventListener(this.contextMenuClosedHandler)};saw.header.Menubar.Manager.prototype._isKeyEvent=function(a){return a&&a.type.indexOf("key")==0};saw.header.Menubar.Manager.prototype._onHideContextMenu=function(a){saw.header.Menubar.getManager().hidePopupPanel(a.context.evt)};saw.header.Menubar.Manager.prototype.onclickHandler=function(a){if(this._isKeyEvent(a)&&a.keyCode!=27){return}var c=saw.header.Menubar.getManager();var b=saw.header.Menubar.MenubarItemViewer.getMenubarItemViewerSpanFromEvent(a);if(!b){c.menuItemClicked=false}if(b!=c.menuSpan&&c.menuSpan){c.menuSpan.menubarItemViewer.noHover();c.menuSpan.menubarItemViewer.noDepress();if(this._isKeyEvent(a)){c.menuSpan.focus()}}this.hidePopupPanel();saw.header.Menubar.getManager().openOnMouseClick=false};saw.header.Menubar.Manager.prototype.onMouseoutPopupHandler=function(a){if(this.openOnMouseClick||!this.menuSpan){return}a=obips.BrowserEventFramework.normalizeEvent(a);var b=a.relatedTarget;while(b&&(b!=this.menuSpan&&!this._isOpenedMenuDiv(b))){b=b.parentNode}if(!b){this.hidePopupPanel();this.openOnMouseClick=false}};saw.header.Menubar.Manager.prototype._isOpenedMenuDiv=function(a){return a==this.openedMenuDiv||a.id=="childContextMenu"};saw.header.Menubar.CustomMenu=function(a,b){this.model={isTransient:true};this.contentDiv=a;this.floatingWindowDiv=this.contentDiv;this.floatingWindowDiv.floatingWindowViewer=this;this.onCloseCallback=b;saw.setAriaRole(this.floatingWindowDiv,"menu")};saw.header.Menubar.CustomMenu.prototype.show=function(c,b){this.launchElement=c;obips.FloatingWindow.Manager.getSingleton().displayAtPosition(this,saw.Position.createByDOMElement(c));var a=saw.header.Menubar.CustomMenu._getFocusableElements(this.contentDiv);if(a.length>0){a[0].focus()}this.floatingWindowDiv.onkeyup=saw.header.Menubar.CustomMenu._keyupHandler;this.floatingWindowDiv.onkeydown=saw.header.Menubar.CustomMenu._keydownHandler};saw.header.Menubar.CustomMenu._getFocusableElements=function(d){var a=d.getElementsByTagName("A");var c=[];for(var b=0;b<a.length;b++){if(a[b].innerHTML&&a[b].offsetWidth>0){c.push(a[b])}}var e=saw.findFirstDescendant(d,"div","tabIndex","0");if(e&&e.clientHeight>0){c.push(e)}return c};saw.header.Menubar.CustomMenu._keydownHandler=function(a){a=saw.getEvent(a);if(a.keyCode==9){saw.header.Menubar.CustomMenu._keyupHandler.call(this,a,true);saw.stopEvent(a)}};saw.header.Menubar.CustomMenu._keyupHandler=function(b,c){b=saw.getEvent(b);if(b.keyCode==38||b.keyCode==40||c){var f=this;var e=saw.getEventSrcElement(b);var d=saw.header.Menubar.CustomMenu._getFocusableElements(f);var a=obips.Array.indexOf(d,e);if(a>=0){if(b.keyCode==38||c&&b.shiftKey){a=(a==0)?d.length-1:a-1}else{a=(a==d.length-1)?0:a+1}d[a].focus()}}else{if(b.keyCode==27){saw.header.Menubar.getManager().hidePopupPanel(b)}}};saw.header.Menubar.CustomMenu.prototype.hide=function(){this.floatingWindowDiv.style.display="none";if(this.launchElement){this.launchElement=null}};saw.header.Menubar.Manager.prototype.showPopupPanel=function(c,d,a,b){this.hidePopupPanel();c.menubarItemViewer.depress();this.openedMenuViewer=new saw.header.Menubar.CustomMenu(d,b);this.openedMenuViewer.show(c,a);this.setOpenedMenu(c,this.openedMenuViewer);if(a){saw.stopEventPropagation(a)}};saw.header.Menubar.Manager.prototype.hidePopupPanel=function(a){if(this.openedMenuViewer&&this.openedMenuViewer.hide){if(this.openedMenuViewer.onCloseCallback){this.openedMenuViewer.onCloseCallback.exec()}}obips.FloatingWindow.Manager.getSingleton().hideTransientWindow();obips.ContextMenu.Manager.getSingleton().currentContextMenuViewer=null;if(this.openedMenuViewer&&this.openedMenuViewer.hide){this.openedMenuViewer.hide()}if(this.menuSpan){this.menuSpan.menubarItemViewer.noHover();this.menuSpan.menubarItemViewer.noDepress();if(this._isKeyEvent(a)){this.menuSpan.focus()}this.menuSpan=null}};saw.header.Menubar.Manager.prototype.setOpenedMenu=function(a,b){this.menuSpan=a;this.openedMenuDiv=b.floatingWindowDiv;this.openedMenuDiv.onmouseout=function(c){saw.header.Menubar.getManager().onMouseoutPopupHandler(c)};this.registerMouseEventHandler()};saw.header.Menubar.Manager.prototype.registerMouseEventHandler=function(){if(!this.mouseEventHanderRegistered){this.mouseEventHanderRegistered=true;saw.addEventListener(document,"click",this.onclickHandler,this,true);var a=document.getElementsByTagName("IFRAME");if(a){for(var b=0;b<a.length;b++){try{saw.addEventListener(a[b].contentWindow,"click",saw.header.Menubar.getManager().onclickHandler,saw.header.Menubar.getManager(),true)}catch(c){}}}}};saw.header.Menubar.Model=function(b,a){saw.header.Menubar.Model.baseConstructor.call(this);this.menus=b;this.bIsMenuNavBar=a};extend(saw.header.Menubar.Model,obips.Observable);saw.header.Menubar.MenuModel=function(c,d,f,e,b,a){this.id=c;this.name=d;this.icon=f;this.callback=b?b:e;this.dropdownCallback=b;this.title=a};saw.header.Menubar.StaticText=function(b,a,c){this.name=b;this.cssClass=a;this.id=c};saw.header.Menubar.StaticText.prototype.getViewer=function(b){var a=saw.createChildElement(b,"span",this.cssClass);a.appendChild(b.ownerDocument.createTextNode(this.name))};saw.header.Menubar.Viewer=function(k,c,l,g){this.model=k;this.container=c;this.id=new Date().valueOf();this.isInline=l||false;this.controller=new saw.header.Menubar.Controller(this);this.menubarDiv=document.createElement("div");this.menubarDiv.className="HeaderMenubar";this.menubarDiv.style.paddingRight="0px";var d=saw.createTable(1,null,this.menubarDiv);saw.setAriaRole(d,"presentation");var j=d.rows[0];var h=obips.ResourceManager.getSingleton().getURL(obips.masterResourceBundlePath,"masterToolbarSeparatorDarkThere").url;if(this.isInline){this.menubarDiv.style.display="inline";this.menubarDiv.style.height="20px";this.menubarDiv.style.verticalAlign="top"}this.menubarDiv.menubarViewer=this;for(var e=0;e<this.model.menus.length;e++){var b=this.model.menus[e];if(b!=null){var a=j.insertCell(j.cells.length);if(b.getViewer){b.getViewer(a)}else{new saw.header.Menubar.MenubarItemViewer(this,b,a,null,g)}}else{if(obips.ResourceManager.getSingleton().getStyleProperty("menubarSeparator")=="true"||this.model.bIsMenuNavBar){var a=j.insertCell(j.cells.length);var f=document.createElement("img");f.src=h;f.className="HeaderMenubarSeparator";f.alt="";saw.setAriaRole(f,"presentation");a.appendChild(f)}}}this.container.appendChild(this.menubarDiv);if(g){}else{saw.setAriaRole(this.menubarDiv,"menubar")}this.displayedMenuViewer=null;this.container.onselectstart=new Function("return false;")};saw.header.Menubar.MenubarItemViewer=function(c,g,i,d,e){this.menubarViewer=c;this.menu=g;this._hoverCssClass=this.menu.dropdownCallback?"uberBarButtonSpanHover":"HeaderGlobalLinkHover";this._downCssClass=this.menu.dropdownCallback?"uberBarButtonSpanDown":"HeaderGlobalLinkDown";this._isNavBar=this.menubarViewer.model.bIsMenuNavBar;this._dropdownImageSrc=this._isNavBar?obips.ResourceManager.getSingleton().getURL(obips.masterResourceBundlePath,"masterDropDownButtonDarkThemeEnabled").url:obips.ResourceManager.getSingleton().getURL(obips.masterResourceBundlePath,obips.ResourceManager.getSingleton().getStyleProperty("headerHelpDropDownImgSrc")).url;this.menuSpan=document.createElement("span");this.menuSpan.id=this.menu.id;this.menuSpan.className="masterMenuButton masterMenuButtonGlobal uberBarTextMenuButtonSpan"+(this.menu.cssClass?" "+this.menu.cssClass:"");this.menuSpan.menubarItemViewer=this;this.menuSpan.onmouseover=this.menubarViewer.controller.mouseOverMenuViewerHandler;this.menuSpan.onmouseout=this.menubarViewer.controller.mouseOutMenuViewerHandler;this.menuSpan.onmousedown=this.menubarViewer.controller.mouseDownMenuViewerHandler;this.menuSpan.onmouseup=this.menubarViewer.controller.mouseUpMenuViewerHandler;var f=saw.createChildElement(this.menuSpan,"span","HeaderMenuBarText");if(this._isNavBar){obips.CSS.addClassToElement(f,"HeaderMenuNavBarText")}if(this.menu.icon){var b=document.createElement("img");b.src=this.menu.icon;b.alt="";if(e){saw.setAriaRole(b,"presentation")}f.appendChild(b)}var k=document.createTextNode(this.menu.name);var a=saw.createChildElement(f,"span");a.appendChild(k);if(this.menu.dropdownCallback){this.menuSpan.onclick=this.menubarViewer.controller.clickMenuDropdownIconHandler;this.menuSpan.onkeypress=this.menubarViewer.controller.clickMenuDropdownIconHandler}else{this.menuSpan.onclick=this.menubarViewer.controller.clickMenuViewerHandler;this.menuSpan.onkeypress=this.menubarViewer.controller.clickMenuViewerHandler}this.dropDownImgSrc=this._dropdownImageSrc;this.dropDownImg=document.createElement("img");this.dropDownImg.src=this.dropDownImgSrc;this.dropDownImg.alt=saw.header.getLocalizedString("kmsgHeaderMenuDropdownImg");if(this.menu.dropdownCallback){var j=document.createElement("span");j.appendChild(this.dropDownImg);j.className="HeaderMenuBarDropdown";this.menuSpan.appendChild(j);if(e){saw.setAriaRole(j,"presentation")}saw.setAriaProperty(this.menuSpan,"aria-haspopup","true")}var h=this.menu.title?this.menu.title:"";if(e){saw.setAriaRole(this.menuSpan,"button");saw.setAriaProperty(this.menuSpan,"aria-label",(h&&h!=""?h:this.menu.name));saw.setAriaRole(this.dropDownImg,"presentation");saw.setAriaRole(a,"presentation");saw.setAriaRole(f,"presentation")}else{saw.setAriaRole(this.menuSpan,"menuitem");this.menuSpan.title=h}i.appendChild(this.menuSpan);i.title=this.menu.name;this.menuSpan.tabIndex=0;this.menuViewer=null};saw.header.Menubar.MenubarItemViewer.getMenubarItemViewerSpanFromEvent=function(a){a=obips.BrowserEventFramework.normalizeEvent(a);var b=saw.getEventTarget(a);while(b&&(b.tagName!="SPAN"||b.className.indexOf("uberBarTextMenuButtonSpan")==-1)){b=b.parentNode}return b};saw.header.Menubar.MenubarItemViewer.prototype.hover=function(){if(!saw.header.Menubar.getManager().menuSpan||this!=saw.header.Menubar.getManager().menuSpan.menubarItemViewer){obips.CSS.removeClassFromElement(this.menuSpan,this._downCssClass)}obips.CSS.addClassToElement(this.menuSpan,this._hoverCssClass);this.dropDownImg.src=obips.ResourceManager.getSingleton().getURL(obips.masterResourceBundlePath,"masterDropDownButtonHover").url;this.dropDownImg.alt=""};saw.header.Menubar.MenubarItemViewer.prototype.noHover=function(){obips.CSS.removeClassFromElement(this.menuSpan,this._hoverCssClass);if(this.menuSpan.className.indexOf(this._downCssClass)==-1){this.dropDownImg.src=this.dropDownImgSrc;this.dropDownImg.alt=""}};saw.header.Menubar.MenubarItemViewer.prototype.depress=function(){obips.CSS.removeClassFromElement(this.menuSpan,this._hoverCssClass);obips.CSS.addClassToElement(this.menuSpan,this._downCssClass);this.dropDownImg.src=obips.ResourceManager.getSingleton().getURL(obips.masterResourceBundlePath,"masterDropDownButtonDown").url;this.dropDownImg.alt=""};saw.header.Menubar.MenubarItemViewer.prototype.noDepress=function(){obips.CSS.removeClassFromElement(this.menuSpan,this._downCssClass);this.dropDownImg.src=this.dropDownImgSrc;this.dropDownImg.alt=""};saw.header.Menubar.MenubarItemViewer.prototype.onDropdownCallback=function(a){if(this.menuTextClicked){this.menuTextClicked=false;return}if(this.menu.dropdownCallback){this.menu.dropdownCallback.exec(this,a)}};saw.header.Menubar.MenubarItemViewer.prototype.displayContextMenu=function(b){b.setCustomStyleClass("HeaderContextMenuDiv");var e=obips.ContextMenu.Manager.getSingleton();var d=(e.currentContextMenuViewer)?e.currentContextMenuViewer.floatingWindowDiv:null;if(d&&d.parentNode&&d.style.display=="block"&&e.currentContextMenuViewer.model==b){}else{var c=saw.header.Menubar.getManager();c.hidePopupPanel();this.depress();var a=e.displayAtPosition(b,saw.Position.createByDOMElement(this.menuSpan));c.setOpenedMenu(this.menuSpan,a)}};saw.header.Menubar.Controller=function(a){this.menubarViewer=a};saw.header.Menubar.Controller._isRelatedTargetInside=function(a,b){a=obips.BrowserEventFramework.normalizeEvent(a);try{var c=a.relatedTarget;while(c&&c!=b){c=c.parentNode}}catch(d){c=null}return c!=null};saw.header.Menubar.Controller.prototype.mouseOverMenuViewerHandler=function(a){if(typeof(saw)!="undefined"&&saw.header.Menubar.MenubarItemViewer.getMenubarItemViewerSpanFromEvent){var c=saw.header.Menubar.MenubarItemViewer.getMenubarItemViewerSpanFromEvent(a);if(saw.header.Menubar.Controller._isRelatedTargetInside(a,c)){return}var b=c.menubarItemViewer;if(saw.header.Menubar.getManager().menuSpan==b.menuSpan){return false}b.hover();if(b.menu.dropdownCallback){b.timeout=setTimeout(function(){saw.header.Menubar.getManager().openMenuOnMouseover(b)},saw.header.knOpenMenuOnRolloverDelay)}}};saw.header.Menubar.Manager.prototype.openMenuOnMouseover=function(a){a.onDropdownCallback()};saw.header.Menubar.Controller.prototype.mouseOutMenuViewerHandler=function(a){if(typeof(saw)!="undefined"&&saw.header.Menubar.MenubarItemViewer.getMenubarItemViewerSpanFromEvent){var c=saw.header.Menubar.MenubarItemViewer.getMenubarItemViewerSpanFromEvent(a);if(saw.header.Menubar.Controller._isRelatedTargetInside(a,c)){return}var b=c.menubarItemViewer;b.noHover();if(b.timeout){clearTimeout(b.timeout)}saw.header.Menubar.getManager().onMouseoutPopupHandler(a)}};saw.header.Menubar.Controller.prototype.mouseDownMenuViewerHandler=function(a){a=obips.BrowserEventFramework.normalizeEvent(a);var c=saw.header.Menubar.MenubarItemViewer.getMenubarItemViewerSpanFromEvent(a);var b=c.menubarItemViewer;b.depress();if(b.timeout){clearTimeout(b.timeout)}saw.stopEventPropagation(a)};saw.header.Menubar.Controller.prototype.mouseUpMenuViewerHandler=function(a){};saw.header.Menubar.Controller.prototype.clickMenuViewerHandler=function(a){a=obips.BrowserEventFramework.normalizeEvent(a);if(a.type=="keypress"&&a.keyCode!=13&&a.keyCode!=32&&a.charCode!=32){return}saw.header.Menubar.getManager().hidePopupPanel();var c=saw.header.Menubar.MenubarItemViewer.getMenubarItemViewerSpanFromEvent(a);var b=c.menubarItemViewer;var d=b.menu.callback;if(d){b.noDepress();b.hover();b.menu.callback.exec(b,a);if(a.type=="keypress"){setTimeout(function(){b.noHover()},200)}b.menuTextClicked=true}return false};saw.header.Menubar.Controller.prototype.clickMenuDropdownIconHandler=function(a){a=obips.BrowserEventFramework.normalizeEvent(a);if(a.type=="keypress"&&a.keyCode!=13&&a.keyCode!=32&&a.charCode!=32){return}saw.header.Menubar.getManager().openOnMouseClick=true;var c=saw.header.Menubar.MenubarItemViewer.getMenubarItemViewerSpanFromEvent(a);var b=c.menubarItemViewer;if(saw.header.Menubar.getManager().menuSpan==b.menuSpan){saw.stopEventPropagation(a);return false}b.onDropdownCallback(a);saw.stopEventPropagation(a);return false};saw.header.addLoadingIndicator=function(b){var a=saw.createChildElement(b,"img","HeaderLoadingIndicator");a.src=saw.header.getResUrl("catalog/loading-indicator-white.gif");a.alt=saw.header.getLocalizedString("kmsgHeaderLoadingMenuItems");return a};saw.header.populateTypeSelector=function(e,a){var d=document.createElement("OPTION");d.value="all";d.text=saw.header.getLocalizedString("kmsgHeaderSearchTypeAll");e.options.add(d);var c=saw.catalog.getTypeCategoryInfos();for(var b=0;b<c.length;b++){if(c[b].notSearchType||saw.getSessionInfos().getProperty("bipExternalRepository")&&obips.Array.contains(["bipReport",".xdm",".xsb",".xss"],c[b].categoryId)){continue}d=document.createElement("OPTION");d.value=c[b].categoryId;if(a==c[b].categoryId){d.selected=true}d.text=c[b].name;e.options.add(d)}};saw.header.renderHeader=function(b,a,h,g,f,e){saw.header.model=new saw.header.Model(b,a,h,g,f);var c=new saw.header.Viewer(saw.header.model,null);if(!saw.getSessionInfos().getSyndicate()){c.render()}else{if(saw.getSessionInfos().isEnableCloudNewBieeHome()){if(top===self){saw.header.renderNewCloudHeader(b,a,h,g,f,e,e)}return}}saw.header._bipKeepAlive();saw.header._staticSheetsheets=document.styleSheets.length;var d=window.obips_maxStylesheets||30;if(saw.header._staticSheetsheets>d){saw.logicErrorAlert("Too many stylesheets. There are "+saw.header._staticSheetsheets+" in the page including STYLE tags. Only "+d+" are allowed.")}};saw.header.renderNewCloudHeader=function(b,a,g,f,e,d){saw.header.model=new saw.header.Model(b,a,g,f,e);var c=new saw.header.CloudNewViewer(saw.header.model,null,d);c.render()};saw.header.getViewer=function(a){if(!saw.header.viewer&&a!==false){alert("Viewer object hasn't been created!")}return saw.header.viewer};saw.header.showBusyIndicator=function(d){var b=saw.header.getViewer(false);if(b&&b.pageStatusIcon){var c=obips.ResourceManager.getSingleton();var a=d?"masterBusy":"masterConnected";a+=c.getStyleProperty("activeDataColor");b.pageStatusIcon.src=c.getURL(obips.masterResourceBundlePath,a).url;b.pageStatusIcon.alt=""}};saw.header.getHelpTOCLinks=function(){return saw.header.getViewer().model.searchBar.helpTOCLinks};saw.header.getLocalizedString=function(d){var c=[];for(var b=1;b<arguments.length;b++){c.push(arguments[b])}var a=obips.ResourceManager.getSingleton().getResource(saw.header.Viewer.resourceFile,d);return a.getString.apply(a,c)};saw.header.getPrivilege=function(a){return obips.ResourceManager.getSingleton().getGDExpression(saw.header.privilegesResourceFile,a).value};saw.header.getResUrl=function(a){return obips.ResourceManager.getSingleton().getURL(saw.header.Viewer.resourceFile,a).url};saw.header.isInCatalogPage=function(){return saw.catalog&&saw.catalog.getCatalogPageViewer&&saw.catalog.getCatalogPageViewer()};saw.header.openURL=function(c,a,b){a=saw.getEvent(a);obips.launcher.launchURL(c,{ctrlKey:a&&a.ctrlKey,targetWindow:b})};saw.header.resizeBodyContainer=function(a){obips.CSS.addClassToElement(a,"PageContentBodyDiv");saw.setOuterHeight(a,saw.getClientHeight()-saw.calcAbsoluteTop(a))};saw.header._bipKeepAlive=function(){if(saw.ajax&&saw.getSessionInfos().getProperty("bipKeepAlive")){setTimeout(function(){saw.ajax.sendSimpleRequest(saw.getSessionInfos().getProperty("bipWebUrl")+"/expired.jsp",null,function(){})},20)}};saw.header.registerSkipToContentEltFinder=function(a){saw.header.skipToContentEltFinder=a};saw.header.skipToContent=function(){var a=null;if(typeof(saw.header.skipToContentEltFinder)!="undefined"&&saw.header.skipToContentEltFinder!=null){a=saw.header.skipToContentEltFinder()}if(a){a.focus()}else{document.getElementById("idSkipContentLink").blur()}};saw.header.FavoriteHeaderMenu=function(){this.itemPath=null};saw.header.FavoriteHeaderMenu.instance=null;saw.header.FavoriteHeaderMenu.getSingleton=function(){if(!saw.header.FavoriteHeaderMenu.instance){saw.header.FavoriteHeaderMenu.instance=new saw.header.FavoriteHeaderMenu()}return saw.header.FavoriteHeaderMenu.instance};saw.header.FavoriteHeaderMenu.prototype.getCurrentItemPath=function(){return this.itemPath};saw.header.FavoriteHeaderMenu.prototype.setCurrentItemPath=function(a){this.itemPath=a}};