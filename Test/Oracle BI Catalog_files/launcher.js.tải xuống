if(!obips.launcher){obips.launcher=function(){};obips.launcher.Hint=function(){this.targetWindow=null;this.windowFeatures=null;this.ctrlKey=false;this.workspaceModule=null;this.ensureFreshUrl=false;this.checkPopupBlocker=false};obips.launcher.launchURL=function(a,b){obips.launcher.Manager.prototype.launchURL.call(obips.launcher.Manager.getInstance(),a,b)};obips.launcher.launchModule=function(c,a,b){obips.launcher.Manager.prototype.launchModule.call(obips.launcher.Manager.getInstance(),c,a,b)};obips.launcher.submitForm=function(a,b){obips.launcher.Manager.prototype.submitForm.call(obips.launcher.Manager.getInstance(),a,b)};obips.launcher.openHelpPage=function(b){var a=saw.getSessionInfos().getTenancyMode()===saw.session.SessionInfos.MULTIPLE_SERVICE_INSTANCE_BICS;if(a){obips.launcher.launchURL(b,{targetWindow:"obics_help"})}else{obips.launcher.launchURL(b,{targetWindow:"obipsHelp",windowFeatures:"scrollbars=yes,height=600,width=800,resizable=yes",mobileModule:"help"})}};obips.launcher.launchHelp=function(b,a){var c=null;if(typeof(b)=="string"){c=b}else{if(b.getCallback&&b.getCallback()){b.getCallback().exec(a)}else{c=b.getUrl&&b.getUrl()||b.url}}if(c){obips.launcher.openHelpPage(c)}};obips.launcher.launchNewWindow=function(b,a,d,c){return obips.launcher.Manager.prototype.launchNewWindow.call(obips.launcher.Manager.getInstance(),b,a,d,c)};obips.launcher.close=function(a){a=a||window;if(a.top==a){a.close()}else{}};obips.launcher.launchExternalDialog=function(d,c,b,a,e){obips.launcher.Manager.getInstance().launchExternalDialog(d,c,b,a,e)};obips.launcher.addPageUnloadGuard=function(c,a,b){obips.launcher.Manager.getInstance().addPageUnloadGuard(c,a,b||window)};obips.launcher.removePageUnloadGuard=function(a){obips.launcher.Manager.getInstance().removePageUnloadGuard(a)};obips.launcher.resourceFile="common/saw.header.xml";obips.launcher.SyndicateFlags=function(){};obips.launcher.SyndicateFlags.WORKSPACE="workspace";obips.launcher.Manager=function(){if(obips.launcher.Manager._instance){return obips.launcher.Manager._instance}saw.addEventListener(window,"unload",function(b,c){obips.launcher.Manager.getInstance()._onUnload(b,c)},window);window.onbeforeunload=function(b){var c=obips.launcher.Manager.getInstance();if(c.unloadGuards!=null&&c.unloadGuards!="undefined"&&c.unloadGuards.length!=0){return c._onBeforeUnload(b,window)}};var a=obips.getSingleton(obips.launcher.Manager.SINGLETON_NAME);if(a){obips.launcher.Manager._instance=a;return a}obips.launcher.Manager._instance=this;this.ownerWindow=window;this.syndicate=null;this.currentWorkspaceModule=null;this.unloadGuards=[];globalRegister.addObject(obips.launcher.Manager.SINGLETON_NAME,this)};obips.launcher.Manager.SINGLETON_NAME="launcher";obips.launcher.Manager.getInstance=function(){return new obips.launcher.Manager()};obips.launcher.Manager.prototype._getSyndicateFlag=function(){if(this.syndicate===null){this.syndicate=saw.getSessionInfos()&&saw.getSessionInfos().getSyndicate()}return this.syndicate};obips.launcher.Manager.prototype.setNewWorkspaceModuleHandler=function(b,a){this.newModuleCallback=b;this.newModuleCaller=a};obips.launcher.Manager.prototype.setWorkspaceModule=function(a){this.currentWorkspaceModule=a};obips.launcher.Manager._newWorkspaceModule=function(e,d,c){if(d=="biee.bsc"){obips.launcher.launchNewWindow(e);return true}else{if(this.newModuleCallback){try{var b=this.newModuleCallback.call(this.newModuleCaller,d,e,c);return b===false?b:true}catch(a){}}}return false};obips.launcher.Manager.prototype._openInWidnowWithFormSubmit=function(d,a,f,e){if(undefined==f){f=""}var c=saw.createFormFromString(d);c.target=a;if(this._isMobileAppSession()&&e.mobileModule){e=e&&clone(e)||{};if(e.ensureFreshUrl){saw.addSessionSecurityCodeInput(c)}e.targetWindow=a;var b=saw.convertFormToString(c);this._fireMobileEvent(c.action,b,"POST",e)}saw.submitForm(c,null,e)};obips.launcher.Manager.prototype.launchURL=function(d,f){f=f||{};var e=this._getSyndicateFlag()==obips.launcher.SyndicateFlags.WORKSPACE;if(e){if(f.workspaceModule&&f.workspaceModule!=this.currentWorkspaceModule&&obips.launcher.Manager._newWorkspaceModule.call(this,d,f.workspaceModule)){return false}}if(f.targetWindow&&f.targetWindow!="_self"){this.launchNewWindow(d,f.targetWindow,f.windowFeatures,f);return false}if(e){var c=saw.createFormFromString(d);saw.submitForm(c,null,f)}else{if(f.ctrlKey){this.launchNewWindow(d,null,"",f)}else{if(this._isMobileAppSession()&&f.mobileModule){var a="GET";var b="";if(f.ensureFreshUrl){b="_scid="+window.obips_scid;a="POST"}this._fireMobileEvent(d,b,a,f);return false}saw.runThisURL(d,f)}}return false};obips.launcher.Manager.prototype.launchNewWindow=function(c,a,f,e){e=e||{};var d=false;a=a||"_blank";if(this._getSyndicateFlag()==obips.launcher.SyndicateFlags.WORKSPACE||e.ensureFreshUrl){this._openInWidnowWithFormSubmit(c,a,f,e)}else{if(undefined==f){f=""}if(this._isMobileAppSession()&&e.mobileModule){e=clone(e);e.targetWindow=a;this._fireMobileEvent(c,"","GET",e)}else{var b=window.open(c,a,f);if(!b||b.closed){d=true}else{b.focus()}}}if(d&&saw.userAgent.is_safari){alert(obips.ResourceManager.getSingleton().getResource(obips.launcher.resourceFile,"kmsgLauncherPopupBlocked").getString())}return b};obips.launcher.Manager.prototype.launchModule=function(c,a,b){var d=this._getSyndicateFlag()==obips.launcher.SyndicateFlags.WORKSPACE;if(d){if(obips.launcher.Manager._newWorkspaceModule.call(this,c,a,b)){return false}}else{var e=obips.ResourceManager.getSingleton().getResource(obips.launcher.resourceFile,"kmsgLauncherFRObjectOpenFromEPMWorkspace").getString();saw.catalog.showMessageDialog(e,"error")}return false};obips.launcher.Manager.prototype._fireMobileEvent=function(e,c,b,f){var a={url:e,queryString:c,targetWindow:f.targetWindow,method:b,module:f.mobileModule};obips.mobile.fireEvent(obips.mobile.EventType.PAGE_LAUNCH,a);if(saw.userAgent.obim_major<2){var d=e.indexOf("?")>=0?"&":"?";if(c){e+=d+c;d="&"}if(f.mobileModule!="externalLink"){e+=d+"mobileNav="+f.mobileModule}saw.runThisURL(e,f)}};obips.launcher.Manager.prototype._isMobileAppSession=function(){return saw.userAgent.is_appleapp&&obips.mobile};obips.launcher.Manager.prototype.submitForm=function(b,d){d=d||{};var c=b.target;b.target=b.target||d.targetWindow||"";if(d.ctrlKey&&(!b.target||b.target=="_self")){b.target="_blank"}if(this._isMobileAppSession()&&d.mobileModule){var a=saw.convertFormToString(b);d=clone(d);d.targetWindow=b.target;this._fireMobileEvent(b.action,a,"POST",d)}else{saw.submitForm(b)}b.target=c};obips.launcher.Manager.prototype.launchExternalDialog=function(e,d,c,b,g){var f=this.ownerWindow.document;var a=saw.createIFrame("idExternalDialogIframe","idExternalDialogIframe",f,e);a.className="ExternalDialogIframe";saw.addEventListener(a,"load",obips.launcher.Manager._onExternalDialogFrameLoaded,{params:d,onOK:c,ctx:b,iframe:a,pos:g});f.body.appendChild(a);a.setAttribute("allowTransparency","true");a.style.display=""};obips.launcher.Manager._onExternalDialogFrameLoaded=function(b,c){var d=c.iframe.contentWindow;if(d&&d.showDialogInBIEE){var a=function(f,e){obips.launcher.Manager.getInstance()._hideExternalDialogIframe();if(e){c.onOK.exec(f,c.ctx)}};d.showDialogInBIEE(c.params,a,c.pos)}};obips.launcher.Manager.prototype._hideExternalDialogIframe=function(){this.ownerWindow.document.getElementById("idExternalDialogIframe").style.display="none"};obips.launcher.Manager.prototype._onUnload=function(a,c){if(this.ownerWindow!=c){for(var b=0;b<this.unloadGuards.length;b++){if(c==this.unloadGuards[b].ownerWindow){this.unloadGuards.splice(b,1)}}}};obips.launcher.Manager.prototype._onBeforeUnload=function(a,b){for(var c=0;c<this.unloadGuards.length;c++){if(b==this.unloadGuards[c].ownerWindow&&this.unloadGuards[c].callback.exec()){return this.unloadGuards[c].message||obips.ResourceManager.getSingleton().getResource(obips.launcher.resourceFile,"kmsgLauncherUnsavedObject").getString()}}if(saw.ajax&&saw.ajax.hasPendingRequest()||obips.HttpServerRequest&&obips.XMLHTTP.AJAX.RequestQueue.getSingleton().hasPendingRequest()){return obips.ResourceManager.getSingleton().getResource(obips.launcher.resourceFile,"kmsgLauncherPendingRequest").getString()}};obips.launcher.Manager.prototype.addPageUnloadGuard=function(d,b,c){var a=this._getIndexOfUnloadGuard(d);if(a<0){this.unloadGuards.push({callback:d,message:b,ownerWindow:c})}};obips.launcher.Manager.prototype.removePageUnloadGuard=function(b){var a=this._getIndexOfUnloadGuard(b);if(a>=0){this.unloadGuards.splice(a,1)}};obips.launcher.Manager.prototype._getIndexOfUnloadGuard=function(b){for(var a=0;a<this.unloadGuards.length;a++){if(this.unloadGuards[a]==b){return a}}return -1};obips.launcher.Manager.prototype.removeAllPageGuards=function(){if(this.unloadGuards==null||this.unloadGuards=="undefined"){return}for(var a=0;a<this.unloadGuards.length;a++){this.unloadGuards.splice(a,1)}}};