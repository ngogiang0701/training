if(typeof(obidash)=="undefined"){obidash=function(){};obidash.getFloatingWindowManager=function(){if(!obidash.floatingWindowManager){obidash.floatingWindowManager=obips.FloatingWindow.Manager.getSingleton()}return obidash.floatingWindowManager};obidash.actionLinkResourceFile="dashboards/obidash.actionlink.xml";obidash.builderResourceFile="dashboards/obidash.builder.xml";obidash.runtimeResourceFile="dashboards/obidash.runtime.xml";obidash.seedResourceFile="dashboards/obidash.seed.xml";obidash.editSelectionsResourceFile="dashboards/obidash.editselections.xml";obidash.getResourceManager=function(){if(!obidash.resourceManager){obidash.resourceManager=obips.ResourceManager.getSingleton()}return obidash.resourceManager};obidash.getResourceString=function(b,a){return obidash.getResourceManager().getResource(b,a).getString()};obidash.getResourceStringWParam=function(d,c){var b=obidash.getResourceManager().getResource(d,c).string;if(arguments[2]){var e=b.indexOf("%0%");if(e>=0){var a=b.slice(0,e);a+=arguments[2];a+=b.slice(e+3);return a}}return b};obidash.getResourceURL=function(b,a){return obidash.getResourceManager().getURL(b,a).url};obidash.getBuilderURL=function(a){return obidash.getResourceURL(obidash.builderResourceFile,a)};obidash.getViewController=function(){var a=document.getElementById("idViewStateDiv");if(a==null){return null}return obips.views.ViewController.getController(a.getAttribute("statePath"))};obidash.showConfirmDialog=function(g,c,b,a,e){var d=new obips.ConfirmDialog.Model(g,c,b,a,e);d.showYesNo();var f=new obips.ConfirmDialog.Viewer(d,obidash.getFloatingWindowManager(),true)};obidash.showMessageDialog=function(f,e,d,c,b){if(!f){f=obidash.getResourceString(obidash.seedResourceFile,"kmsgPortalError")}if(!d){d=obidash.getResourceURL(obips.MessageDialog.resourceFile,obips.MessageDialog.TITLE_IMAGE_ERROR)}var a=new obips.TextDialog.Model(f,e,b,c,d);new obips.MessageDialog.Viewer(a,obidash.getFloatingWindowManager())};obidash.exceptionHandler=function(c,b,a){obidash.showExceptionDialog(a,c,null,b)};obidash.showExceptionDialog=function(c,d,a,f){obidash.initItems();var b=new obidash.ExceptionDialogModel(c,d,a,f);var e=new obips.ExceptionDialog.Viewer(b,obidash.getFloatingWindowManager())};obidash.initItems=function(){if(typeof(obidash.ExceptionDialogModel)=="undefined"){obidash.ExceptionDialogModel=function(b,a,c,d){this.errArray=d;obidash.ExceptionDialogModel.baseConstructor.call(this,obidash.ExceptionDialogModel.getContextTitle(b),a,c)};extend(obidash.ExceptionDialogModel,obips.ExceptionDialog.Model);obidash.ExceptionDialogModel.prototype.parseExceptionNodeForErrorMessages=function(a,c){for(var b=0;b<this.errArray.length;++b){c.push(this.errArray[b].getMessage())}};obidash.exceptionDlgTitleMap=new Object();obidash.ExceptionDialogModel.getContextTitle=function(a){if(a){if(obidash.exceptionDlgTitleMap[a]){return obidash.exceptionDlgTitleMap[a]}else{var b;switch(a){case"save":b="kmsgDashboardEditorSavingDashboardFailed";break;case"saveas":b="kmsgDashboardEditorSaveDashboardAsFailed";break;case"getportalprops":b="kmsgDashboardEditorErrorGettingPortalProps";break;case"setportalprops":b="kmsgDashboardEditorErrorSettingPortalProps";break;default:b="kmsgPortalError"}var c=obidash.getResourceString(obidash.builderResourceFile,b);obidash.exceptionDlgTitleMap[a]=c;return c}}else{return obidash.getResourceString(obidash.seedResourceFile,"kmsgPortalError")}}}};obidash.openMenu=function(a,b){NQWPopupMenu(a,b,null,"top")};obidash.getDashboardPageXml=function(b,a){var d=obips.catalog.Path.concat(b,a);var c=saw.catalog.getCatalogManager().readObject(d,undefined,undefined,undefined,false);var e=obips.XMLDOM.parseXML(c.data);return e};obidash.getBipLayoutsNameList=function(e){var a=[];if(e!=undefined&&e!=null){var d="/xmlpserver/io/catalog/list-layouts?path="+e;var c=new saw.ajax.Request(d,obidash.cbRetrieveLayoutNameList,null,{arrayNameList:a});c.setResponseProcessor(new obidash.ResponseProcessor());c.setLoadingMessageDisplayer(new saw.ajax.LoadingIndicator());var b=saw.ajax.createConnection(c);b.setSync(true);b.get()}return a};obidash.cbRetrieveLayoutNameList=function(c,a){if(c==null){return a.arrayNameList}var e=c.xml.getElementsByTagName("layout");for(var d=0;d<e.length;d++){var b=e[d].attributes.getNamedItem("label");a.arrayNameList.push(b.value)}};obidash.ResponseProcessor=function(){};obidash.ResponseProcessor.prototype.processResponse=function(b,a){b._callBack(a)};obidash.getBipReportPath=function(e,a,b){var d;if(b==null){d=obidash.getDashboardPageXml(e,a)}else{d=b}var g=obips.XMLDOM.selectSingleNode(d,"//sawd:dashboardPage");var c=g.getAttribute("bipReportPath");var f=null;if(c==null){return f}if(c.split("/")[0]=="."){f=c.replace(".",e)}else{f=c}return f};obidash.showRadioDialog=function(h,j,c,i,b){var d=new obips.ConfirmDialog.Model(h,j,c,i,b);d.showRadio();var g=obidash.getResourceString(obidash.builderResourceFile,"kmsgDashboardEditorNewLayoutsRadioOption1");var f=obidash.getResourceString(obidash.builderResourceFile,"kmsgDashboardEditorNewLayoutsRadioOption2");var a=[g,f];var e=new obips.ConfirmDialog.Viewer(d,obidash.getFloatingWindowManager(),a)};obidash.showObjectImageCaption=function(b,a,g,f,c){var e=document.getElementById(b+"Icon");if(e){e.src=obidash.getObjectIconSrc(a,g,f)}var d=document.getElementById(b+"Content");if(d&&"reportView"==a&&(!c||c.length==0)){saw.setInnerText(d,obidash.getReportViewName(g))}};obidash.getObjectIconSrc=function(b,h,d){var f;try{if("reportView"==b){var c="default";if(h){var a=h.match(/(\w+)!/);if(a){c=a[1]}}c=c.toLowerCase();if(c=="dvtchart"&&d&&d.length>0){f=obidash.getResourceURL(obidash.builderResourceFile,d)}else{f=obidash.getResourceURL(obidash.builderResourceFile,c)}}else{f=obidash.getResourceURL(obidash.builderResourceFile,"sawd:"+b+"_icon")}}catch(g){f=obidash.getResourceURL(obidash.builderResourceFile,"default")}return f};obidash.getReportViewName=function(d){var b;if(d){var a=d.match(/(\w+)!(\d+)/);if(a){var c=obips_viewTypeInfos[a[1]];b=(c?c.name:null);if(b&&a.length>2){b+=" "+a[2]}}}if(!b){b=obidash.getResourceString(obidash.builderResourceFile,"kmsgDashboardEditorCompoundView")}return b};obidash.getCurrPageDelayedState=function(){var a=null;if(obidash.bEnableDashboardDelayExecution){a=obidash.bDashboardPageDelayExecution?obidash.bDashboardPageDelayed?"Delayed":"NotDelayed":null}return a}};