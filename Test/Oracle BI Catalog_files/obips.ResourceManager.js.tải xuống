if(!obips.ResourceManager){obips.ResourceManager=function(){var c=obips.getSingleton(obips.ResourceManager.SINGLETON_NAME);if(c){return c}this.seededResources={};this.failed={};this.resources=new Array();this.urls=new Array();this.gdExprs=new Array();globalRegister.addObject(obips.ResourceManager.SINGLETON_NAME,this);var b=obips_seeded_res.length;for(var a=0;a<b;a++){if(obips_seeded_res[a]!=null){obips.ResourceManager.seedResource(obips_seeded_res[a])}}};obips.ResourceManager.SINGLETON_NAME="resourceManager";obips.ResourceManager.STYLE_PROPERTIES_RESOURCE_FILE="master/styleproperties.res";obips.ResourceManager.getSingleton=function(){return obips.getSingleton(obips.ResourceManager.SINGLETON_NAME)};obips.ResourceManager.prototype.setFileMapId=function(a){this.fileMapId=a};obips.ResourceManager.prototype.getFileMapId=function(){return this.fileMapId||window.obips_fmapId};obips.ResourceManager.prototype.getAbsoluteURL=function(a){if(a==undefined){throw new Error("sResourceBundleCanonicalPath is undefined in obips.ResourceManager.prototype.getAbsoluteURL")}return saw.pageToURL(a)+"?fmapId="+this.getFileMapId()};obips.ResourceManager.prototype.invalidate=function(a){this.resources[a]=null;this.urls[a]=null;this.gdExprs[a]=null;this.seededResources[a]=null;delete this.resources[a];delete this.urls[a];delete this.gdExprs[a];delete this.seededResources[a]};obips.ResourceManager.prototype.load=function(sResourceBundleCanonicalPath,oCallback){if(this.resources[sResourceBundleCanonicalPath]==null&&this.urls[sResourceBundleCanonicalPath]==null){if(this.seededResources[sResourceBundleCanonicalPath]){this.parseResourceJSON(sResourceBundleCanonicalPath,this.seededResources[sResourceBundleCanonicalPath])}else{var resourceFileURL=this.getAbsoluteURL(sResourceBundleCanonicalPath);if(oCallback==null){if(window.console&&console.log){console.warn("Sync load "+sResourceBundleCanonicalPath)}var resourceContent=obips.XMLHTTP.syncGetRequest(resourceFileURL,"text/plain",true);if(resourceContent){if(resourceContent=="OBIPSNotLoggedIn"){obips.ResourceManager.seedResource(sResourceBundleCanonicalPath,{});this.failed[sResourceBundleCanonicalPath]=true}else{eval(resourceContent);this.parseResourceJSON(sResourceBundleCanonicalPath,this.seededResources[sResourceBundleCanonicalPath])}}}else{var req=new obips.XMLHTTP.AJAX.Request(resourceFileURL,null,null,new obips.Callback(this,this.handleAsyncResponse),new obips.Callback(this,this.handleAsyncError));req.originalCallback=oCallback;req.resourceCanonicalPath=sResourceBundleCanonicalPath;ajaxRequestQueue.add(req);ajaxRequestQueue.run()}return}}if(oCallback!=null){oCallback.functionPointer.call(oCallback.thisContext)}};obips.ResourceManager.prototype.handleAsyncResponse=function(ajaxResponse){eval(ajaxResponse.xmlHttpRequest.responseText);ajaxResponse.ajaxRequest.originalCallback.functionPointer.call(ajaxResponse.ajaxRequest.originalCallback.thisContext)};obips.ResourceManager.prototype.handleAsyncError=function(a){throw new Error("Error loading XML Document from "+a.ajaxRequest.url+". \nThe response given was: Status "+a.xmlHttpRequest.status+"\n"+a.xmlHttpRequest.responseText)};obips.ResourceManager.prototype.getResource=function(a,d){var c=this.getResources(a);var b=c&&c[d];if(!b){return new obips.ResourceManager.Resource(d,d)}return b};obips.ResourceManager.prototype.getResources=function(a){var b=this.resources[a];if(b==null){this.load(a);b=this.resources[a]}return b};obips.ResourceManager.prototype.getURL=function(b,d){var a=this.getURLs(b);var c=a&&a[d];if(!c){if(this.failed[b]){return new obips.ResourceManager.URL(d,"")}else{throw new Error("A url with the ID "+d+" couldn't be found in "+b+".")}}return c};obips.ResourceManager.prototype.getURLs=function(a,c){var b=this.urls[a];if(b==null){this.load(a);b=this.urls[a]}return b};obips.ResourceManager.prototype.getGDExpressions=function(a,c){var b=this.gdExprs[a];if(b==null){this.load(a);b=this.gdExprs[a]}return b};obips.ResourceManager.prototype.getGDExpression=function(a,c){var d=this.getGDExpressions(a);var b=d&&d[c];if(!b){return new obips.ResourceManager.GDExpression(c,undefined)}return b};obips.ResourceManager.Resource=function(b,a){this.id=b;this.string=a};obips.ResourceManager.Resource.tokenRegExp=/\%[0-9]\%/;obips.ResourceManager.Resource.prototype.write=function(a){a=a||window;a.document.write(this.getString(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]))};obips.ResourceManager.Resource.prototype.getString=function(){var b=this.string;var c=obips.ResourceManager.Resource.tokenRegExp;while(c.test(b)){var a=b.search(c);var d=b.substr(a+1,1);if(typeof arguments[d]==="undefined"||arguments[d]===null){break}b=b.replace(c,arguments[d].toString().replace(/\$/g,"$$$$"))}return b};obips.ResourceManager.FlashResource=function(a){this.id=a.id;this.string=a.string};obips.ResourceManager.URL=function(b,a){this.id=b;this.url=a};obips.ResourceManager.GDExpression=function(b,a){this.id=b;this.value=a};obips.ResourceManager.seedResource=function(a){var b=a.p;obips.ResourceManager.getSingleton().seededResources[b]=a.v;saw.loadedJsFiles[b]=true};obips.ResourceManager.prototype.getStyleProperty=function(a){var b=obips.ResourceManager.getSingleton().getGDExpression(obips.ResourceManager.STYLE_PROPERTIES_RESOURCE_FILE,a);return b.value};obips.ResourceManager.prototype.parseResourceJSON=function(a,d){var c=[];if(d.strings){for(var b in d.strings){c[b]=new obips.ResourceManager.Resource(b,d.strings[b])}}this.resources[a]=c;var e=[];if(d.urls){for(var b in d.urls){e[b]=new obips.ResourceManager.URL(b,d.urls[b])}}this.urls[a]=e;var f=[];if(d.exprs){for(var b in d.exprs){f[b]=new obips.ResourceManager.GDExpression(b,d.exprs[b])}}this.gdExprs[a]=f};new obips.ResourceManager()};