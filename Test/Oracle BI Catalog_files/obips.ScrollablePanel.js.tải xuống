obips.ScrollablePanel=function(d,a,b,c){obips.ScrollablePanel.baseConstructor.call(this);this.height=a;this.marginTop=0;this.scrollTick=b||20;this.scrollInterval=c||300;this.render(d);d.scrollPanel=this};saw.extend(obips.ScrollablePanel,obips.Observable);obips.ScrollablePanel.EventType={SCROLL_UP:0,SCROLL_DOWN:1};obips.ScrollablePanel.prototype.render=function(a){this.container=a;this.scrollUpDiv=saw.createChildElement(a,"div","ScrollablePanelScrollButton");this.contentDivParent=saw.createChildElement(a,"div","ScrollablePanelScroller");this.contentDiv=saw.createChildElement(this.contentDivParent,"div","ScrollablePanelContent");this.scrollDownDiv=saw.createChildElement(a,"div","ScrollablePanelScrollButton")};obips.ScrollablePanel.prototype.renderScrollIcon=function(b){if(this.upIcon){return}var a=this;this.upIcon=saw.createChildElement(this.scrollUpDiv,"a","ScrollablePanelUpIcon");this.upIcon.onmousedown=function(){obips.CSS.addClassToElement(this,"ScrollablePanelUpIconDown");a.scrollUpTimer=setInterval(function(){a.scrollUp()},a.scrollInterval)};this.upIcon.onmouseup=function(){obips.CSS.removeClassFromElement(this,"ScrollablePanelUpIconDown");clearInterval(a.scrollUpTimer)};this.upIcon.onmouseout=this.upIcon.onmouseup;this.upIcon.onclick=function(c){a.scrollUp(c)};this.downIcon=saw.createChildElement(this.scrollDownDiv,"a","ScrollablePanelDownIcon");this.downIcon.onmousedown=function(){obips.CSS.addClassToElement(this,"ScrollablePanelDownIconDown");a.scrollDownTimer=setInterval(function(){a.scrollDown()},a.scrollInterval)};this.downIcon.onmouseup=function(){obips.CSS.removeClassFromElement(this,"ScrollablePanelDownIconDown");clearInterval(a.scrollDownTimer)};this.downIcon.onmouseout=this.downIcon.onmouseup;this.downIcon.onclick=function(c){a.scrollDown(c)}};obips.ScrollablePanel.prototype.resize=function(a){if(a){this.height=a}if(this.contentDiv.offsetHeight<=this.height){this.scrollUpDiv.style.display="none";this.scrollDownDiv.style.display="none";this.contentDivParent.style.height="auto";this.contentDiv.style.top="0px"}else{this.renderScrollIcon();this.scrollUpDiv.style.display="block";this.scrollDownDiv.style.display="block";this.contentDivParent.style.height=this.height-2*this.scrollUpDiv.offsetHeight+"px"}this.enableButton(this.upIcon,this.marginTop<0);this.enableButton(this.downIcon,this.marginTop>this.contentDiv.parentNode.clientHeight-this.contentDiv.offsetHeight)};obips.ScrollablePanel.prototype.getContentContainer=function(){return this.contentDiv};obips.ScrollablePanel.prototype.scrollUp=function(a){a=saw.getEvent(a);if(a){saw.stopEventPropagation(a)}this.notify(new obips.Observable.Event(obips.ScrollablePanel.EventType.SCROLL_UP,this));this.marginTop+=this.scrollTick;if(this.marginTop>=0){this.marginTop=0;this.enableButton(this.upIcon,false)}else{this.enableButton(this.upIcon,true)}this.enableButton(this.downIcon,true);this.contentDiv.style.marginTop=this.marginTop+"px"};obips.ScrollablePanel.prototype.scrollDown=function(a){a=saw.getEvent(a);if(a){saw.stopEventPropagation(a)}this.notify(new obips.Observable.Event(obips.ScrollablePanel.EventType.SCROLL_Down,this));this.marginTop-=this.scrollTick;if(this.marginTop+this.contentDiv.offsetHeight<=this.contentDiv.parentNode.clientHeight){this.marginTop=this.contentDiv.parentNode.clientHeight-this.contentDiv.offsetHeight;this.enableButton(this.downIcon,false)}else{this.enableButton(this.downIcon,true)}this.enableButton(this.upIcon,true);this.contentDiv.style.marginTop=this.marginTop+"px"};obips.ScrollablePanel.prototype.enableButton=function(c,b){if(!c){return}var a=c==this.upIcon?"ScrollablePanelUpIconDisabled":"ScrollablePanelDownIconDisabled";if(b){obips.CSS.removeClassFromElement(c,a)}else{obips.CSS.addClassToElement(c,a)}};