if(typeof(obips.TabStop)=="undefined"){obips.TabStop=function(a,b){this.oProperties=b||this._getDefaultProperties();this.tElement=a;this.bEnabled=true;this.bAnnouncingMessage=false;this._initTabIndex();this._installListeners();if(this.oProperties.bHasScreenReaderLabel){this._createScreenReaderLabel()}};obips.TabStop.bSupportVPATMode=false;obips.TabStop.bSupportWaiAria=true;obips.TabStop.bSupportWaiAriaOnComplexControls=true;obips.TabStop.Properties=function(){this.bHasScreenReaderLabel=false;this.aLabelSpans=[""];this.bSupportAnnouncementMessage=false};obips.TabStop.prototype._getDefaultProperties=function(){return new obips.TabStop.Properties()};obips.TabStop._forcePromptsOnVPATMode=function(){return(obips.TabStop.bSupportVPATMode||(typeof(g_bForceAccessiblePrompts)!="undefined"&&g_bForceAccessiblePrompts))};obips.TabStop.isSupportWaiAria=function(){return(obips.TabStop.bSupportWaiAria&&obips.TabStop.bSupportWaiAriaOnComplexControls)};obips.TabStop.isSupportWaiAriaOnSimpleControls=function(){return obips.TabStop.bSupportWaiAria};obips.TabStop.isSupport508=function(){return(obips.TabStop._forcePromptsOnVPATMode()||(saw&&saw.session&&saw.getSessionInfos().isEnableSection508()))};obips.TabStop.prototype.isJAWSEnabled=function(){return(!obips.TabStop.isSupportWaiAria()&&obips.TabStop.isSupport508())};obips.TabStop.prototype._initTabIndex=function(){this.tElement.tabIndex=0};obips.TabStop.prototype.enableTabStop=function(){this.bEnabled=true;this._initTabIndex()};obips.TabStop.prototype.disableTabStop=function(){this.bEnabled=false;this.tElement.tabIndex=-1};obips.TabStop.prototype.turnOnOffKeyListener=function(a){if(this._oKeyRouter&&this._oKeyListener){if(a){this._oKeyRouter.addEventListener(this._oKeyListener)}else{this._oKeyRouter.removeEventListener(this._oKeyListener)}}};obips.TabStop.setWaiAriaAttrs=function(b,c){for(var e=0;b&&e<b.length;e++){var g=b[e];var a=g[0];var f=g[1];if(g.length==3&&g[2]){var d=c.getAttribute(a);if(d){f=(d+" ")+f}}saw.setAriaProperty(c,a,f)}};obips.TabStop.prototype.setWaiAria=obips.TabStop.setWaiAriaAttrs;obips.TabStop.prototype._installListeners=function(){var a=new obips.Callback(this,this._keyPressHandler);this._oKeyListener=new obips.Observable.EventListener(null,a);this._oKeyRouter=new obips.BrowserEventFramework.EventRouter(this.tElement,((is_ie||saw.userAgent.is_webkit)?"onkeydown":"onkeypress"));this.turnOnOffKeyListener(true)};obips.TabStop.prototype._getKeyCode=function(a){var b=a.keyCode?a.keyCode:a.charCode?a.charCode:a.which;return b};obips.TabStop.prototype._keyPressHandler=function(c){switch(c.keyCode){case obips.AdvTabStop.kKeys.nEnterKey:var b=!c.shiftKey&&!c.altKey&&!c.ctrlKey;var d=saw.getEventTarget(c);if(b&&d&&d.tagName){var a=d.tagName.toLowerCase();b=b&&(a!="textarea")&&(a!="a")&&!(a=="input"&&c.target.type=="button")}if(b){this._ActivateEnterKey(c);return}break;case obips.AdvTabStop.kKeys.nEscKey:if(!c.shiftKey&&!c.altKey&&!c.ctrlKey){this._CloseMenu(c);return}break;case obips.AdvTabStop.kKeys.nTabKey:if(!c.altKey&&!c.ctrlKey){if(c.shiftKey){this._TabBackwardKey(c)}else{this._TabForwardKey(c)}return}break;case obips.AdvTabStop.kKeys.nUpArrowKey:if(!c.shiftKey&&!c.altKey&&!c.ctrlKey){this._PrevMenuItem(c);return}break;case obips.AdvTabStop.kKeys.nDownArrowKey:if(!c.shiftKey&&!c.altKey&&!c.ctrlKey){this._NextMenuItem(c);return}break}if(c.ctrlKey){switch(this._getKeyCode(c)){case obips.AdvTabStop.kKeys.I:case obips.AdvTabStop.kKeys.i:if(c.shiftKey&&!c.altKey){this._MoveToNextSection(c);return}break;case obips.AdvTabStop.kKeys.U:case obips.AdvTabStop.kKeys.u:if(c.shiftKey&&!c.altKey){this._MoveToPrevSection(c);return}break;case obips.AdvTabStop.kKeys.G:case obips.AdvTabStop.kKeys.g:if(c.shiftKey&&!c.altKey){this._MoveToGlobalHeaderHome(c);return}break;case obips.AdvTabStop.kKeys.T:case obips.AdvTabStop.kKeys.t:if(c.shiftKey&&!c.altKey){this._MoveToDashboardPageTab(c);return}break;case obips.AdvTabStop.kKeys.M:case obips.AdvTabStop.kKeys.m:if(c.altKey){this._MoveToViewPopupMenu(c);return}break;case obips.AdvTabStop.kKeys.D:case obips.AdvTabStop.kKeys.d:if(c.altKey){this._MoveToDashboardPopupMenu(c);return}break}}this.handleOtherKeyPress(c);return};obips.TabStop.prototype._ActivateEnterKey=function(a){};obips.TabStop.prototype._CloseMenu=function(a){};obips.TabStop.prototype._NextMenuItem=function(a){};obips.TabStop.prototype._PrevMenuItem=function(a){};obips.TabStop.prototype._MoveToNextSection=function(a){};obips.TabStop.prototype._MoveToPrevSection=function(a){};obips.TabStop.prototype._MoveToGlobalHeaderHome=function(a){};obips.TabStop.prototype._MoveToDashboardPageTab=function(a){};obips.TabStop.prototype._MoveToDashboardPopupMenu=function(a){};obips.TabStop.prototype._MoveToViewPopupMenu=function(a){};obips.TabStop.prototype._TabForwardKey=function(a){};obips.TabStop.prototype._TabBackwardKey=function(a){};obips.TabStop.prototype.handleOtherKeyPress=function(a){};obips.TabStop.prototype.stopEvent=function(a,b){obips.BrowserEventFramework.cancelBubble(a);if(!b){obips.BrowserEventFramework.preventEventBrowserDefaultBehavior(a)}};obips.TabStop._VScrollContainerToShowElement=function(e,k,d,g){var i=0;var c=e.offsetParent;var a=e.offsetTop;while(c&&c!=k&&c!=k.offsetParent){a+=c.offsetTop;c=c.offsetParent}var b=((c&&c==k)?0:k.offsetTop);var l=a-b;var f=l+e.offsetHeight;var j=k.clientHeight+k.scrollTop;if(l<k.scrollTop){k.scrollTop=l}else{if(f>j){k.scrollTop=f-k.clientHeight}}if(d&&g){g.style.left="0px";g.style.top=a+"px";var i=9;var h=19}};obips.TabStop.prototype._createScreenReaderLabel=function(){var d=this.tElement.ownerDocument;this.JAWSAnnouncementDiv=d.createElement("div");this.JAWSAnnouncementDiv.style.width="0px";this.JAWSAnnouncementDiv.style.height="0px";this.JAWSAnnouncementDiv.style.overflow="hidden";this.JAWSAnnouncementLabel=d.createElement("label");this.JAWSAnnouncementDiv.appendChild(this.JAWSAnnouncementLabel);this.JAWSLabelSpanGroup=d.createElement("span");this.aJAWSLabelSpan=[];for(var a=0;a<this.oProperties.aLabelSpans.length;a++){var b=d.createElement("span");if(this.oProperties.aLabelSpans[a]!=""&&this.oProperties.aLabelSpans[a]!=null){obips.TabStop._setScreenReaderLabelTextUtil(b,this.oProperties.aLabelSpans[a])}this.JAWSLabelSpanGroup.appendChild(b);this.aJAWSLabelSpan.push(b)}if(this.oProperties.bSupportAnnouncementMessage){this.tSentinel=d.createElement(is_ie?"div":"a");saw.appendTextNode(this.tSentinel,is_ie?" \u00a0 ":" ");this.tSentinel.tabIndex=-1;this.tSentinel.style.display="none";if(!is_ie){this.tSentinel.href="#"}this.JAWSAnnouncementDiv.appendChild(this.tSentinel);this.JAWSCursorSpan=d.createElement("span");this.JAWSAnnouncementLabel.appendChild(this.JAWSCursorSpan);var c=new obips.Callback(this,this._onFocusSentinelHandler);this._oFocusSentinelListener=new obips.Observable.EventListener(null,c);this._oFocusSentinelRouter=new obips.BrowserEventFramework.EventRouter(this.tSentinel,"onfocus");this._oFocusSentinelRouter.addEventListener(this._oFocusSentinelListener)}this._createAdditionalScreenReaderLabels();this._installScreenReaderLabel();this._attachHiddenScreenReaderLabel();this._setToAnnounceLabel()};obips.TabStop.prototype._createAdditionalScreenReaderLabels=function(){};obips.TabStop.nGlobalID=1;obips.TabStop._getUniqueID=function(){var a=obips.TabStop.nGlobalID++;return("tabstop_"+a+"")};obips.TabStop.prototype._installScreenReaderLabel=function(){var a=this.tElement;var b=a.getAttribute("id");if(!saw.checkObjectReference(b)){b=this._getUniqueLabelID()+"_ElementForTabStop";a.setAttribute("id",b)}this._installScreenReaderLabelForID(b)};obips.TabStop.prototype._installScreenReaderLabelForID=function(a){this.JAWSAnnouncementLabel.setAttribute("for",a)};obips.TabStop.prototype._getUniqueLabelID=function(){return obips.TabStop._getUniqueID()};obips.TabStop.prototype._attachHiddenScreenReaderLabel=function(){this.tElement.appendChild(this.JAWSAnnouncementDiv)};obips.TabStop.prototype._setToAnnounceLabel=function(){var a=false;if(this.oProperties.bSupportAnnouncementMessage){if(this.JAWSCursorSpan.parentNode!=this.tSentinel){a=true;this.tSentinel.appendChild(this.JAWSCursorSpan)}}if(this.JAWSLabelSpanGroup.parentNode!=this.JAWSAnnouncementLabel){a=true;this.JAWSAnnouncementLabel.appendChild(this.JAWSLabelSpanGroup);if(is_ie){var d=this.tElement.ownerDocument;for(var c=0;c<this.aJAWSLabelSpan.length;c++){var b=this.aJAWSLabelSpan[c].getAttribute("sText");if(b==null){b=""}else{b=b+""}obips.TabStop._setScreenReaderLabelTextUtil(this.aJAWSLabelSpan[c],b)}}}return a};obips.TabStop.prototype._setToAnnounceCursor=function(){var a=false;if(this.oProperties.bSupportAnnouncementMessage){if(this.JAWSLabelSpanGroup.parentNode!=this.tSentinel){a=true;this.tSentinel.appendChild(this.JAWSLabelSpanGroup);if(is_ie){a=true;for(var c=0;c<this.aJAWSLabelSpan.length;c++){if(this.aJAWSLabelSpan[c].parentNode!=this.tSentinel){a=true;for(var b=0;b<this.aJAWSLabelSpan.length;b++){saw.clearInnerHTML(this.aJAWSLabelSpan[b])}break}}}}if(this.JAWSCursorSpan.parentNode!=this.JAWSAnnouncementLabel){a=true;this.JAWSAnnouncementLabel.appendChild(this.JAWSCursorSpan)}}return a};obips.TabStop.prototype.announceMessage=function(a){if(this.oProperties.bSupportAnnouncementMessage){this.setScreenReaderCursor(a);this._setToAnnounceCursor();this._forceAnnounce()}};obips.TabStop.prototype.announceDefaultMessage=function(){this._setToAnnounceLabel();var a=this._forceAnnounce()};obips.TabStop.sMessageLog="";obips.TabStop.prototype._shouldHandleOnFocus=function(a){var b=this.bAnnouncingMessage;this.bAnnouncingMessage=false;return(b?false:true)};obips.TabStop.prototype._shouldHandleOnBlur=function(a){return(this.bAnnouncingMessage?false:true)};obips.TabStop.prototype._onFocusSentinelHandler=function(a){this.tSentinel.style.display="none";this.tElement.focus();this.stopEvent(a)};obips.TabStop.prototype._onFocusHandler=function(a){this.stopEvent(a)};obips.TabStop.prototype._forceAnnounce=function(){var a=false;if(this.isJAWSEnabled()){this.bAnnouncingMessage=true;if(this.oProperties.bSupportAnnouncementMessage){a=true;this.tSentinel.style.display="";this.tSentinel.focus()}}return a};obips.TabStop._setScreenReaderLabelTextUtil=function(a,c){if(a.innerHTML!=""){saw.clearInnerHTML(a)}var b=a.getAttribute("sText")+"";if(b==c){c+=" ,"}a.setAttribute("sText",c);a.appendChild(a.ownerDocument.createTextNode(c))};obips.TabStop._BreakDownFormatStringToSpanArrayUtil=function(a,l){var n=[a+""];var f=[-1];for(var g=0;g<l.length;g++){var p=l[g][0];var b=l[g][1];var o=[];var h=[];for(var e=0;e<n.length;e++){if(f[e]>=0){o.push(n[e]);h.push(f[e])}else{if(n[e]!=null&&n[e]!=""){var d=n[e].split(p);if(d.length==1){o.push(n[e]);h.push(f[e])}else{if(d.length>1){for(var c=0;c<d.length;c++){if(d[c]!=""&&d[c]!=null){o.push(d[c]);h.push(-1)}if(c!=d.length-1){o.push(b);h.push(g)}}}}}}}n=o;f=h}var m=[];for(var g=0;g<l.length;g++){m.push([])}for(var g=0;g<f.length;g++){if(f[g]>=0&&f[g]<l.length){m[f[g]].push(g)}}return{aLabelSpans:n,aIndexMap:m}};obips.TabStop.prototype.setScreenReaderLabelOnIndex=function(b,a){for(var c=0;c<a.length;c++){if(a[c]>=0&&a[c]<this.aJAWSLabelSpan.length){obips.TabStop._setScreenReaderLabelTextUtil(this.aJAWSLabelSpan[a[c]],b)}}};obips.TabStop.prototype.setScreenReaderCursor=function(a){if(this.oProperties.bSupportAnnouncementMessage){obips.TabStop._setScreenReaderLabelTextUtil(this.JAWSCursorSpan,a)}};obips.SimpleOneKeyTabStopBase=function(a,b){this.oCallBack=b;obips.SimpleOneKeyTabStopBase.baseConstructor.call(this,a)};extend(obips.SimpleOneKeyTabStopBase,obips.TabStop);obips.SimpleOneKeyTabStopBase.prototype._activateKeyAlt=function(b,c){if(c){var a=c;a.functionPointer.call(a.thisContext,b)}this.stopEvent(b)};obips.SimpleOneKeyTabStopBase.prototype._activateKey=function(a){this._activateKeyAlt(a,this.oCallBack)};obips.SimpleEnterKeyTabStop=function(a,b){obips.SimpleEnterKeyTabStop.baseConstructor.call(this,a,b)};extend(obips.SimpleEnterKeyTabStop,obips.SimpleOneKeyTabStopBase);obips.SimpleEnterKeyTabStop.prototype._ActivateEnterKey=function(a){this._activateKey(a)};obips.SimpleSpaceBarTabStop=function(a,b){obips.SimpleSpaceBarTabStop.baseConstructor.call(this,a,b)};extend(obips.SimpleSpaceBarTabStop,obips.SimpleOneKeyTabStopBase);obips.SimpleSpaceBarTabStop.prototype._ActivateSpaceBar=function(a){this._activateKey(a)};obips.SimpleSpaceBarTabStop.prototype.handleOtherKeyPress=function(a){switch(this._getKeyCode(a)){case obips.AdvTabStop.kKeys.nWhiteSpaceKey:if(!a.altKey&&!a.shiftKey&&!a.ctrlKey){this._ActivateSpaceBar(a);return}break}};obips.SpaceBarAndEnterKeyTabStop=function(a,b){obips.SpaceBarAndEnterKeyTabStop.baseConstructor.call(this,a,b)};extend(obips.SpaceBarAndEnterKeyTabStop,obips.SimpleSpaceBarTabStop);obips.SpaceBarAndEnterKeyTabStop.prototype._ActivateEnterKey=function(a){this._activateKey(a)};obips.SimpleEnterAndEscapeKeyTabStop=function(a,c,b){this.oEscapeKeyCallBack=b;obips.SimpleEnterAndEscapeKeyTabStop.baseConstructor.call(this,a,c)};extend(obips.SimpleEnterAndEscapeKeyTabStop,obips.SimpleEnterKeyTabStop);obips.SimpleEnterAndEscapeKeyTabStop.prototype._CloseMenu=function(a){this._activateKeyAlt(a,this.oEscapeKeyCallBack)};obips.SimpleContainerTabStop=function(a,d,b,e){this.oScreenReaderProperties=e||this._getDefaultScreenReaderProperties();this.tScreenReaderLabelsContainer=d||a;this.tScrollContainer=b||a;var c=new obips.TabStop.Properties();c.bHasScreenReaderLabel=true;c.bSupportAnnouncementMessage=true;this._initDefaultAnnouncementLabels(c);obips.SimpleContainerTabStop.baseConstructor.call(this,a,c)};extend(obips.SimpleContainerTabStop,obips.TabStop);obips.SimpleContainerTabStop.ScreenReaderProperties=function(){this.sFormatString="@{Label}. @{CurrentValues}";this.aTokenizerMatrix=[["@{Label}",""],["@{CurrentValues}",""]];this.nJAWSLabelSpanIndex=0;this.nJAWSCurrentValueSpanIndex=1};obips.SimpleContainerTabStop.prototype._getDefaultScreenReaderProperties=function(){return new obips.SimpleContainerTabStop.ScreenReaderProperties()};obips.SimpleContainerTabStop.prototype._initDefaultAnnouncementLabels=function(b){var a=obips.TabStop._BreakDownFormatStringToSpanArrayUtil(this.oScreenReaderProperties.sFormatString,this.oScreenReaderProperties.aTokenizerMatrix);b.aLabelSpans=a.aLabelSpans;this._initLabelSpanIndices(a.aIndexMap)};obips.SimpleContainerTabStop.prototype._initLabelSpanIndices=function(a){this.aJAWSLabelSpanIndex=a[this.oScreenReaderProperties.nJAWSLabelSpanIndex];this.aJAWSCurrentValueSpanIndex=a[this.oScreenReaderProperties.nJAWSCurrentValueSpanIndex]};obips.SimpleContainerTabStop.prototype._attachHiddenScreenReaderLabel=function(){this.tScreenReaderLabelsContainer.appendChild(this.JAWSAnnouncementDiv);this.JAWSAnnouncementDiv.style.position="absolute";this.JAWSAnnouncementDiv.style.zIndex=this.tElement.style.zIndex+1};obips.SimpleContainerTabStop.prototype.setScreenReaderLabel=function(a){this.setScreenReaderLabelOnIndex(a,this.aJAWSLabelSpanIndex)};obips.SimpleContainerTabStop.prototype.setScreenReaderCurrentValue=function(a){this.setScreenReaderLabelOnIndex(a,this.aJAWSCurrentValueSpanIndex)};obips.SimpleContainerTabStop.prototype.getCursorText=function(a){return oSubItemObject+""};obips.SimpleContainerTabStop.prototype.setContainerCursor=function(d,b,a){if(b){var c=(this.tScrollContainer?this.tScrollContainer:a.parentNode);obips.TabStop._VScrollContainerToShowElement(a,c,true,this.JAWSAnnouncementDiv)}this.announceMessage(d)};obips.SimpleContainerTabStop.prototype._shouldAnnouceMessage=function(){return true};obips.SimpleContainerTabStop.prototype.setScrollContainer=function(a){this.tScrollContainer=a||this.tElement};obips.AdvTabStop=function(a){this.parentTabStop=null;this.aChildrenTabStops=[];this.tSentinel=null;obips.AdvTabStop.baseConstructor.call(this,a);this._installListeners()};extend(obips.AdvTabStop,obips.TabStop);obips.AdvTabStop.kKeys=function(){};obips.AdvTabStop.kKeys.noSuchKey=-100;obips.AdvTabStop.kKeys.nShiftKey=16;obips.AdvTabStop.kKeys.nCtrlKey=17;obips.AdvTabStop.kKeys.nAltKey=18;obips.AdvTabStop.kKeys.nCapsLockKey=20;obips.AdvTabStop.kKeys.nBackSpaceKey=8;obips.AdvTabStop.kKeys.nTabKey=9;obips.AdvTabStop.kKeys.nNumPadCenterKey=12;obips.AdvTabStop.kKeys.nEnterKey=13;obips.AdvTabStop.kKeys.nPauseBreakKey=19;obips.AdvTabStop.kKeys.nEscKey=27;obips.AdvTabStop.kKeys.nWhiteSpaceKey=32;obips.AdvTabStop.kKeys.nPageUpKey=33;obips.AdvTabStop.kKeys.nPageDownKey=34;obips.AdvTabStop.kKeys.nEndKey=35;obips.AdvTabStop.kKeys.nHomeKey=36;obips.AdvTabStop.kKeys.nLeftArrowKey=37;obips.AdvTabStop.kKeys.nUpArrowKey=38;obips.AdvTabStop.kKeys.nRightArrowKey=39;obips.AdvTabStop.kKeys.nDownArrowKey=40;obips.AdvTabStop.kKeys.nInsertKey=45;obips.AdvTabStop.kKeys.nDeleteKey=46;obips.AdvTabStop.kKeys.nContextMenuKey=93;obips.AdvTabStop.kKeys.nF1Key=112;obips.AdvTabStop.kKeys.nF2Key=113;obips.AdvTabStop.kKeys.nF3Key=114;obips.AdvTabStop.kKeys.nF4Key=115;obips.AdvTabStop.kKeys.nF5Key=116;obips.AdvTabStop.kKeys.nF6Key=117;obips.AdvTabStop.kKeys.nF7Key=118;obips.AdvTabStop.kKeys.nF8Key=119;obips.AdvTabStop.kKeys.nF9Key=120;obips.AdvTabStop.kKeys.nF10Key=121;obips.AdvTabStop.kKeys.nF11Key=122;obips.AdvTabStop.kKeys.nF12Key=123;obips.AdvTabStop.kKeys.A=65;obips.AdvTabStop.kKeys.B=66;obips.AdvTabStop.kKeys.C=67;obips.AdvTabStop.kKeys.D=68;obips.AdvTabStop.kKeys.E=69;obips.AdvTabStop.kKeys.F=70;obips.AdvTabStop.kKeys.G=71;obips.AdvTabStop.kKeys.H=72;obips.AdvTabStop.kKeys.I=73;obips.AdvTabStop.kKeys.J=74;obips.AdvTabStop.kKeys.K=75;obips.AdvTabStop.kKeys.L=76;obips.AdvTabStop.kKeys.M=77;obips.AdvTabStop.kKeys.N=78;obips.AdvTabStop.kKeys.O=79;obips.AdvTabStop.kKeys.P=80;obips.AdvTabStop.kKeys.Q=81;obips.AdvTabStop.kKeys.R=82;obips.AdvTabStop.kKeys.S=83;obips.AdvTabStop.kKeys.T=84;obips.AdvTabStop.kKeys.U=85;obips.AdvTabStop.kKeys.V=86;obips.AdvTabStop.kKeys.W=87;obips.AdvTabStop.kKeys.X=88;obips.AdvTabStop.kKeys.Y=89;obips.AdvTabStop.kKeys.Z=90;obips.AdvTabStop.kKeys.a=97;obips.AdvTabStop.kKeys.b=98;obips.AdvTabStop.kKeys.c=99;obips.AdvTabStop.kKeys.d=100;obips.AdvTabStop.kKeys.e=101;obips.AdvTabStop.kKeys.f=102;obips.AdvTabStop.kKeys.g=103;obips.AdvTabStop.kKeys.h=104;obips.AdvTabStop.kKeys.i=105;obips.AdvTabStop.kKeys.j=106;obips.AdvTabStop.kKeys.k=107;obips.AdvTabStop.kKeys.l=108;obips.AdvTabStop.kKeys.m=109;obips.AdvTabStop.kKeys.n=110;obips.AdvTabStop.kKeys.o=111;obips.AdvTabStop.kKeys.p=112;obips.AdvTabStop.kKeys.q=113;obips.AdvTabStop.kKeys.r=114;obips.AdvTabStop.kKeys.s=115;obips.AdvTabStop.kKeys.t=116;obips.AdvTabStop.kKeys.u=117;obips.AdvTabStop.kKeys.v=118;obips.AdvTabStop.kKeys.w=119;obips.AdvTabStop.kKeys.x=120;obips.AdvTabStop.kKeys.y=121;obips.AdvTabStop.kKeys.z=122;obips.AdvTabStop.AbstractKey=function(b,d,c,a){this.sKeyCode=b+(d?"s":"_")+(c?"c":"_")+(a?"a":"_")};obips.AdvTabStop.StandardAbstractKeyMap=function(){this.mapKeys=[];this.mapKeys.push(this.nextFocusKey=new obips.AdvTabStop.AbstractKey(obips.AdvTabStop.kKeys.nTabKey,false,false,false));this.mapKeys.push(this.previousFocusKey=new obips.AdvTabStop.AbstractKey(obips.AdvTabStop.kKeys.nTabKey,true,false,false));this.mapKeys.push(this.enterScopeKey=new obips.AdvTabStop.AbstractKey(obips.AdvTabStop.kKeys.nEnterKey,true,false,false));this.mapKeys.push(this.existScopeKey=new obips.AdvTabStop.AbstractKey(obips.AdvTabStop.kKeys.nEscKey));this.mapKeys.push(this.firstFocusKey=new obips.AdvTabStop.AbstractKey(obips.AdvTabStop.kKeys.nHomeKey));this.mapKeys.push(this.lastFocusKey=new obips.AdvTabStop.AbstractKey(obips.AdvTabStop.kKeys.nEndKey));this.mapKeys.push(this.navUpKey=new obips.AdvTabStop.AbstractKey(obips.AdvTabStop.kKeys.nUpArrowKey));this.mapKeys.push(this.navDownKey=new obips.AdvTabStop.AbstractKey(obips.AdvTabStop.kKeys.nDownArrowKey));this.mapKeys.push(this.navLeftKey=new obips.AdvTabStop.AbstractKey(obips.AdvTabStop.kKeys.nLeftArrowKey));this.mapKeys.push(this.navRightKey=new obips.AdvTabStop.AbstractKey(obips.AdvTabStop.kKeys.nRightArrowKey));this.mapKeys.push(this.commitKey=new obips.AdvTabStop.AbstractKey(obips.AdvTabStop.kKeys.nEnterKey));this.mapKeys.push(this.contextMenuKey=new obips.AdvTabStop.AbstractKey(obips.AdvTabStop.kKeys.nContextMenuKey));this.mapKeys.push(this.exitContextMenuKey=new obips.AdvTabStop.AbstractKey(obips.AdvTabStop.kKeys.nEscKey,false,true,true));this.mapKeys.push(this.announceKey=new obips.AdvTabStop.AbstractKey(obips.AdvTabStop.kKeys.nNumPadCenterKey));this.mapKeys.push(this.helpKey=new obips.AdvTabStop.AbstractKey(obips.AdvTabStop.kKeys.nF1Key))};obips.AdvTabStop.StandardAbstractKeyMap.prototype.resolveKeyOnEvent=function(a){var c=new obips.AdvTabStop.AbstractKey(a.keyCode,(a.shiftKey?true:false),(a.ctrlKey?true:false),(a.altKey?true:false));for(var b=0;b<this.mapKeys.length;b++){if(this.mapKeys[b].sKeyCode==c.sKeyCode){return c}}return null};obips.AdvTabStop.g_mapAbstractKeys=new obips.AdvTabStop.StandardAbstractKeyMap();obips.AdvTabStop.prototype._getAbstractKeyMap=function(){return obips.AdvTabStop.g_mapAbstractKeys};obips.AdvTabStop.nDisableIndex=-1;obips.AdvTabStop.nScopeInOffset=5;obips.AdvTabStop.nQueueClassMax=(obips.AdvTabStop.nScopeInOffset-1)/2;obips.AdvTabStop.prototype._calCurrentTabIndexBaseOnParent=function(){return this._getParentOriginalTabIndex()+obips.AdvTabStop.nScopeInOffset};obips.AdvTabStop.prototype._getQueueEndIndex=function(a){return this._getOriginalTabIndex()+a};obips.AdvTabStop.prototype._getQueueTopIndex=function(a){return this._getOriginalTabIndex()-obips.AdvTabStop.nQueueClassMax+a-1};obips.AdvTabStop.prototype._getChildQueueEndIndex=function(a){return this._getQueueEndIndex(a)+obips.AdvTabStop.nScopeInOffset};obips.AdvTabStop.prototype._getChildQueueTopIndex=function(a){return this._getQueueTopIndex(a)+obips.AdvTabStop.nScopeInOffset};obips.AdvTabStop.prototype._initTabIndex=function(){this._disableCurrentTabIndex()};obips.AdvTabStop.prototype._disableCurrentTabIndex=function(){this.tElement.tabIndex=obips.AdvTabStop.nDisableIndex;this.tElement.oTabIndex=obips.AdvTabStop.nDisableIndex;this._disableSentinel()};obips.AdvTabStop.prototype._createSentinelElement=function(){this.tSentinel=this.tElement.ownerDocument.createElement("div");this.tSentinel.style.zIndex=this.tElement.zIndex+1;this.tSentinel.bSentinelIsFocused=false;this.tElement.appendChild(this.tSentinel);if(is_ie){this.tSentinel.a1=this.tElement.ownerDocument.createElement("div");saw.appendTextNode(this.tSentinel.a1,"hello ");this.tSentinel.a2=this.tElement.ownerDocument.createElement("div");saw.appendTextNode(this.tSentinel.a2,"world");this.tSentinel.appendChild(this.tSentinel.a1);this.tSentinel.appendChild(this.tSentinel.a2)}else{this.tSentinel.a1=this.tElement.ownerDocument.createElement("a");this.tSentinel.a1.href="#";saw.appendTextNode(this.tSentinel.a1,"hello ");this.tSentinel.a2=this.tElement.ownerDocument.createElement("a");this.tSentinel.a2.href="#";saw.appendTextNode(this.tSentinel.a2,"world");this.tSentinel.appendChild(this.tSentinel.a1);this.tSentinel.appendChild(this.tSentinel.a2)}var a=new obips.BrowserEventFramework.EventRouter(this.tSentinel,"onfocus");a.addEventListener(new obips.Observable.EventListener(null,new obips.Callback(this,this._focusSentinelHandler)));var b=this;this.tSentinel.a1.onkeydown=function(d){var c=obips.BrowserEventFramework.normalizeEvent(d);return b._keyPressSentinelHandler(c)}};obips.AdvTabStop.prototype._unMarkSentinelFocused=function(){if(this.tSentinel){this.tSentinel.a1.tabIndex=this._getChildQueueTopIndex(1);this.tSentinel.bSentinelIsFocused=false}};obips.AdvTabStop.prototype._disableSentinel=function(){if(this.tSentinel){this.tSentinel.style.display="none";this.tSentinel.style.visibility="hidden";this.tSentinel.a1.tabIndex=this.tSentinel.a2.tabIndex=obips.AdvTabStop.nDisableIndex;this.tSentinel.bSentinelIsFocused=false}};obips.AdvTabStop.prototype._focusOnSentinel=function(c){if(!this.tSentinel){this._createSentinelElement()}var d=saw.getElementXY(this.tElement);this.tSentinel.style.display="block";this.tSentinel.a1.tabIndex=this._getQueueTopIndex(1)+(c?obips.AdvTabStop.nScopeInOffset:0);saw.setElementXY(this.tSentinel,d[0],d[1]);this.tSentinel.style.visibility="visible";this.tSentinel.bSentinelIsFocused=true;var b=this;b.tSentinel.a2.focus();var a=setTimeout(function(){b.tSentinel.a1.focus()},10)};obips.AdvTabStop.prototype._isSentinelFocused=function(){return(this.tSentinel.bSentinelIsFocused?true:false)};obips.AdvTabStop._getTabIndexNumber=function(a){var b=parseInt(a+"",10);if(isNaN(b)){b=0}if(b<0){return -1}else{return b}};obips.AdvTabStop.prototype._getOriginalTabIndex=function(){return obips.AdvTabStop._getTabIndexNumber(this.tElement.oTabIndex)};obips.AdvTabStop.prototype._getCurrentTabIndex=function(){return obips.AdvTabStop._getTabIndexNumber(this.tElement.tabIndex)};obips.AdvTabStop.prototype._getParentOriginalTabIndex=function(){var a=0;if(this.parentTabStop){a=this.parentTabStop._getOriginalTabIndex()}return a};obips.AdvTabStop.prototype._getParentCurrentTabIndex=function(){var a=0;if(this.parentTabStop){a=this.parentTabStop._getCurrentTabIndex()}return a};obips.AdvTabStop.prototype._enableCurrentTabIndex=function(){this.tElement.tabIndex=this.tElement.oTabIndex=this._calCurrentTabIndexBaseOnParent()};obips.AdvTabStop.prototype._enableByResetToOriginalTabIndex=function(){this.tElement.tabIndex=this.tElement.oTabIndex};obips.AdvTabStop.prototype._setParentTabStop=function(a){this.parentTabStop=a};obips.AdvTabStop.prototype.addChildTabStop=function(a){this.aChildrenTabStops.push(a);a._setParentTabStop(this)};obips.AdvTabStop.prototype.setAsRootLevelTabStop=function(){this._setParentTabStop(null);this._enableCurrentTabIndex()};obips.AdvTabStop.prototype._installListeners=function(){var c=new obips.BrowserEventFramework.EventRouter(this.tElement,"onfocus");c.addEventListener(new obips.Observable.EventListener(null,new obips.Callback(this,this._focusHandler)));if(is_ie||saw.userAgent.is_safari){var b=new obips.BrowserEventFramework.EventRouter(this.tElement,"onkeydown");b.addEventListener(new obips.Observable.EventListener(null,new obips.Callback(this,this._keyPressHandler)))}else{var a=new obips.BrowserEventFramework.EventRouter(this.tElement,"onkeypress");a.addEventListener(new obips.Observable.EventListener(null,new obips.Callback(this,this._keyPressHandler)))}};obips.AdvTabStop.prototype._stopInterceptTabStopEvent=function(a){a.bNoTabStopInterception=true};obips.AdvTabStop.prototype._shouldInterceptTabStopEvent=function(a){if(a.bNoTabStopInterception){return false}else{var b=saw.getEventTarget(a);if(b==this.tElement){return true}else{if(this.tSentinel&&(b==this.tSentinel||b==this.tSentinel.a1||b==this.tSentinel.a2)){return true}else{return false}}}};obips.AdvTabStop.prototype._enableImmediateChildTabIndex=function(){for(var a=0;a<this.aChildrenTabStops.length;a++){this.aChildrenTabStops[a]._enableCurrentTabIndex()}};obips.AdvTabStop.prototype._disableImmediateChildTabIndex=function(){for(var a=0;a<this.aChildrenTabStops.length;a++){this.aChildrenTabStops[a]._disableCurrentTabIndex()}};obips.AdvTabStop.prototype._focusHandler=function(a){if(!this._shouldInterceptTabStopEvent(a)){return}if(this.parentTabStop&&this.parentTabStop._isSentinelFocused()){this.parentTabStop._unMarkSentinelFocused()}this._disableSentinel();this.tElement.tabIndex=this.tElement.oTabIndex;this.stopEvent(a)};obips.AdvTabStop.prototype._focusSentinelHandler=function(a){if(this.tSentinel&&this.bChildrenExpanded){for(var b=0;b<this.aChildrenTabStops.length;b++){this.aChildrenTabStops[b]._enableByResetToOriginalTabIndex()}this.tSentinel.a1.tabIndex=this._getQueueTopIndex(1)+obips.AdvTabStop.nScopeInOffset}this._stopInterceptTabStopEvent(a);this.stopEvent(a)};obips.AdvTabStop.prototype._keyPressSentinelHandler=function(a){if(!this._shouldInterceptTabStopEvent(a)){return true}var b=this._getAbstractKeyMap().resolveKeyOnEvent(a);if(b){switch(b.sKeyCode){case this._getAbstractKeyMap().nextFocusKey.sKeyCode:break;case this._getAbstractKeyMap().previousFocusKey.sKeyCode:this.stopEvent(a);return false;default:break}}return true};obips.AdvTabStop.prototype._keyPressHandler=function(a){if(this._getCurrentTabIndex()<0){return}var b=this._getAbstractKeyMap().resolveKeyOnEvent(a);if(b){this._handleAbstractKeyPress(a,b)}else{this.handleOtherKeyPress(a)}};obips.AdvTabStop.prototype._handleAbstractKeyPress=function(a,b){if(!this._shouldInterceptTabStopEvent(a)){return}switch(b.sKeyCode){case this._getAbstractKeyMap().nextFocusKey.sKeyCode:this.handleNextFocusKeyPress(a);break;case this._getAbstractKeyMap().previousFocusKey.sKeyCode:this.handlePreviousFocusKeyPress(a);break;case this._getAbstractKeyMap().enterScopeKey.sKeyCode:this.handleEnterScopeKeyPress(a);break;case this._getAbstractKeyMap().existScopeKey.sKeyCode:this.handleExistScopeKeyPress(a);break;case this._getAbstractKeyMap().firstFocusKey.sKeyCode:this.handleFirstFocusKeyPress(a);break;case this._getAbstractKeyMap().lastFocusKey.sKeyCode:this.handleLastFocusKeyPress(a);break;case this._getAbstractKeyMap().navUpKey.sKeyCode:this.handleNavUpKeyPress(a);break;case this._getAbstractKeyMap().navDownKey.sKeyCode:this.handleNavDownKeyPress(a);break;case this._getAbstractKeyMap().navLeftKey.sKeyCode:this.handleNavLeftKeyPress(a);break;case this._getAbstractKeyMap().navRightKey.sKeyCode:this.handleNavRightKeyPress(a);break;case this._getAbstractKeyMap().commitKey.sKeyCode:this.handleCommitKeyPress(a);break;case this._getAbstractKeyMap().contextMenuKey.sKeyCode:this.handleContextMenuKeyPress(a);break;case this._getAbstractKeyMap().exitContextMenuKey.sKeyCode:this.handleExitContextMenuKeyPress(a);break;case this._getAbstractKeyMap().announceKey.sKeyCode:this.handleAnnounceKeyPress(a);break;case this._getAbstractKeyMap().helpKey.sKeyCode:this.handleHelpKeyPress(a);break;default:break}};obips.AdvTabStop.prototype.handleNextFocusKeyPress=function(a){var b=saw.getEventTarget(a);if(b==this.tElement){if(this.parentTabStop&&this.parentTabStop.tSentinel){this.parentTabStop.tSentinel.a1.tabIndex=this._getQueueEndIndex(2)}}else{if(this.tSentinel&&b==this.tSentinel||b==this.tSentinel.a1||b==this.tSentinel.a2){}else{}}this._stopInterceptTabStopEvent(a);return};obips.AdvTabStop.prototype.handlePreviousFocusKeyPress=function(a){var b=saw.getEventTarget(a);if(b==this.tElement){if(this.parentTabStop&&this.parentTabStop.tSentinel){this.parentTabStop.tSentinel.a1.tabIndex=this._getQueueTopIndex(2)}}else{if(this.tSentinel&&b==this.tSentinel||b==this.tSentinel.a1||b==this.tSentinel.a2){}else{}}this._stopInterceptTabStopEvent(a)};obips.AdvTabStop.prototype.handleEnterScopeKeyPress=function(a){if(this.aChildrenTabStops.length>0){this.bChildrenExpanded=true;this._enableImmediateChildTabIndex();this._focusOnSentinel(true)}this.stopEvent(a)};obips.AdvTabStop.prototype.handleExistScopeKeyPress=function(a){this._disableImmediateChildTabIndex();this.bChildrenExpanded=false;if(this.bChildrenExpanded){this.tElement.tabIndex=this._getQueueTopIndex(2);this._focusOnSentinel(false)}else{if(this.parentTabStop){this.parentTabStop.handleExistScopeKeyPress(a)}}this.stopEvent(a)};obips.AdvTabStop.prototype.handleOtherKeyPress=function(a){};obips.AdvTabStop.prototype.handleFirstFocusKeyPress=function(a){};obips.AdvTabStop.prototype.handleLastFocusKeyPress=function(a){};obips.AdvTabStop.prototype.handleNavUpKeyPress=function(a){};obips.AdvTabStop.prototype.handleNavDownKeyPress=function(a){};obips.AdvTabStop.prototype.handleNavLeftKeyPress=function(a){};obips.AdvTabStop.prototype.handleNavRightKeyPress=function(a){};obips.AdvTabStop.prototype.handleCommitKeyPress=function(a){};obips.AdvTabStop.prototype.handleContextMenuKeyPress=function(a){};obips.AdvTabStop.prototype.handleExitContextMenuKeyPress=function(a){};obips.AdvTabStop.prototype.handleAnnounceKeyPress=function(a){};obips.AdvTabStop.prototype.handleHelpKeyPress=function(a){}};