obips.ToolbarHeader=function(){};obips.ToolbarHeader.ButtonInfo=function(){this.id=null;this.callback=null;this.sTooltip=null;this.iconSet=null;this.helpModel=null};obips.ToolbarHeader.ButtonInfo.Save="save";obips.ToolbarHeader.ButtonInfo.SaveAs="saveas";obips.ToolbarHeader.ButtonInfo.Help="help";obips.ToolbarHeader.ButtonInfo.Return="return";obips.ToolbarHeader.Model=function(d,a,c,b){obips.ToolbarHeader.Model.baseConstructor.call(this);this.aToolbarButtons=this.aToolbarButtons||new Array();if(d!=null){this.setDefaultIcons(d)}this.oCustomModel=a;this.bNeedSeparator=c;if(this.oCustomModel!=null&&this.oCustomModel.length>0){this.addCustomButtons(this.oCustomModel,c)}this.bEnableStatusMessage=b;this.bRenderAsToolBarRoles=true};extend(obips.ToolbarHeader.Model,obips.Observable);obips.ToolbarHeader.resourceFile="uicomponents/obips.ToolbarHeader/obips.ToolbarHeader.xml";obips.ToolbarHeader.Model.prototype.setDefaultIcons=function(d){for(var c=0;c<d.length;c++){var a=d[c];switch(a.id){case obips.ToolbarHeader.ButtonInfo.Save:this.setSaveButtonInfo(a);break;case obips.ToolbarHeader.ButtonInfo.SaveAs:this.setSaveAsButtonInfo(a);this.aToolbarButtons.push(null);break;case obips.ToolbarHeader.ButtonInfo.Help:this.setHelpButtonInfo(a);break;case obips.ToolbarHeader.ButtonInfo.Return:var b=new obips.UberBar.TextButtonModel("return",a.text,this.getLocalizedString("kmsgUICGTBReturn"),a.callback,false,true);this.aToolbarButtons.unshift(null);this.aToolbarButtons.unshift(b);break}}};obips.ToolbarHeader.Model.prototype.setSaveButtonInfo=function(e){var c=this._getIconsSets(obips.ToolbarHeader.ButtonInfo.Save);var a=(e.sTooltip)?e.sTooltip:this.getLocalizedString("kmsgUICGTBSave");var d=e.disabled!==true;var b=new obips.UberBar.IconButtonModel("save",c,a,e.callback,false,d,e.additionalCSSClass,e.additionalImgCSSClass);this.aToolbarButtons.push(b);this.toolBarHeaderModel=new obips.UberBar.Model("uberBar",this.aToolbarButtons,false)};obips.ToolbarHeader.Model.prototype.setSaveAsButtonInfo=function(e){var c=this._getIconsSets(obips.ToolbarHeader.ButtonInfo.SaveAs);var a=(e.sTooltip)?e.sTooltip:this.getLocalizedString("kmsgUICGTBSaveAs");var d=e.disabled!==true;var b=new obips.UberBar.IconButtonModel("saveas",c,a,e.callback,false,d,e.additionalCSSClass,e.additionalImgCSSClass);this.aToolbarButtons.push(b);this.toolBarHeaderModel=new obips.UberBar.Model("uberBar",this.aToolbarButtons,false)};obips.ToolbarHeader.Model.prototype.setHelpButtonInfo=function(d){var c=this._getIconsSets(obips.ToolbarHeader.ButtonInfo.Help);var a=(d.sTooltip)?d.sTooltip:this.getLocalizedString("kmsgUICGTBHelp");if(d.helpModel){d.callback=new obips.Callback(d,this._setHelpModel)}var b=new obips.UberBar.IconButtonModel("help",c,a,d.callback,false,true,d.additionalCSSClass,d.additionalImgCSSClass);this.aToolbarButtons.push(b);this.toolBarHeaderModel=new obips.UberBar.Model("uberBar",this.aToolbarButtons,false)};obips.ToolbarHeader.Model.prototype._setHelpModel=function(){obips.launcher.launchHelp(this.helpModel)};obips.ToolbarHeader.Model.prototype.addTextButton=function(b){var a=new obips.UberBar.TextButtonModel(b.id,b.text,b.sTooltip,b.callback,false,true);if(b.id==obips.ToolbarHeader.ButtonInfo.Return){this.aToolbarButtons.unshift(null);this.aToolbarButtons.unshift(a)}else{this.aToolbarButtons.push(a)}this.toolBarHeaderModel=new obips.UberBar.Model("uberBar",this.aToolbarButtons,false)};obips.ToolbarHeader.Model.prototype.addIconButton=function(a,c){var b=new obips.UberBar.IconButtonModel(c.id,a,c.sTooltip,c.callback,false,true);this.aToolbarButtons.push(b);this.toolBarHeaderModel=new obips.UberBar.Model("uberBar",this.aToolbarButtons,false)};obips.ToolbarHeader.Model.prototype.addCustomButtons=function(b,a){var d=this._orderButtons();for(var c=0;c<b.length;c++){this.aToolbarButtons.splice(d+c,0,b[c])}if(a){this.aToolbarButtons.splice(d+c,0,null)}this.toolBarHeaderModel=new obips.UberBar.Model("uberBar",this.aToolbarButtons,false)};obips.ToolbarHeader.Model.prototype._getIconsSets=function(b){var c=obips.ToolbarHeader.ImageIconMap[b];var a=new obips.UberBar.IconSet(this.getImgUrl(c.enabled),this.getImgUrl(c.disabled),this.getImgUrl(c.hover),this.getImgUrl(c.down));return a};obips.ToolbarHeader.Model.prototype._orderButtons=function(){var b=0;if(this.aToolbarButtons){for(var a=0;a<this.aToolbarButtons.length;a++){var c=this.aToolbarButtons[a];if(c){if(c.id==obips.ToolbarHeader.ButtonInfo.Return){b=a+2;break}}}}return b};obips.ToolbarHeader.Model.prototype.getImgUrl=function(a){return obips.ResourceManager.getSingleton().getURL(obips.ToolbarHeader.resourceFile,a).url};obips.ToolbarHeader.Model.prototype.getLocalizedString=function(a){return obips.ResourceManager.getSingleton().getResource(obips.ToolbarHeader.resourceFile,a).getString()};obips.ToolbarHeader.ImageIconMap={save:{enabled:"saveIcon_ena",disabled:"saveIcon_dis",hover:"saveIcon_ovr",down:"saveIcon_dwn"},saveas:{enabled:"saveAsIcon_ena",disabled:"saveAsIcon_dis",hover:"saveAsIcon_ovr",down:"saveAsIcon_dwn"},help:{enabled:"helptopics_ena",disabled:"helptopics_dis",hover:"helptopics_ovr",down:"helptopics_dwn"}};obips.ToolbarHeader.Model.prototype.enableButton=function(c){for(var b=0;b<this.aToolbarButtons.length;b++){var a=this.aToolbarButtons[b];if(a!=null&&a.id==c){a.isEnabled=true;this.toolBarHeaderModel.notify(new obips.Observable.Event(obips.UberBar.Model.EventType.BUTTON_ENABLED,a));break}}};obips.ToolbarHeader.Model.prototype.disableButton=function(c){for(var b=0;b<this.aToolbarButtons.length;b++){var a=this.aToolbarButtons[b];if(a!=null&&a.id==c){a.isEnabled=false;this.toolBarHeaderModel.notify(new obips.Observable.Event(obips.UberBar.Model.EventType.BUTTON_DISABLED,a));break}}};obips.ToolbarHeader.Viewer=function(c,b){var a=(c.toolBarHeaderModel.bRenderAsToolBarRoles?null:["","button"]);this.toolbarHeaderViewer=new obips.UberBar.Viewer(c.toolBarHeaderModel,b,true,a);if(c.bEnableStatusMessage){this.statusIndicator=new obips.ToolbarHeader.StatusIndicator(b)}};obips.ToolbarHeader.Viewer.getGTBButtonViewerFromEvent=function(a){a=obips.BrowserEventFramework.normalizeEvent(a);var b=obips.BrowserEventFramework.getViewerFromElement(a.target,"uberBarButtonViewer");return b};obips.ToolbarHeader.Viewer.prototype.getStatusIndicator=function(){return this.statusIndicator};obips.ToolbarHeader.StatusIndicator=function(a){obips.ToolbarHeader.StatusIndicator.container=a;obips.ToolbarHeader.StatusIndicator.container.setAttribute("selenium_flag","false");return obips.ToolbarHeader.StatusIndicator};obips.ToolbarHeader.StatusIndicator.knDefaultTimout=5;obips.ToolbarHeader.StatusIndicator.showSaveConfirmationMessage=function(){var f=obips.ToolbarHeader.Model.prototype.getImgUrl("confirmationIcon");if(!this.tDiv){this.tDiv=saw.createChildElement(this.container,"div","StatusIndicatorDiv")}else{this.hide(false)}if(f){var c=saw.createChildElement(this.tDiv,"img","StatusIndicatorIcon");c.src=f;c.alt=""}var e=saw.createChildElement(this.tDiv,"span","StatusIndicatorText");e.id="statusSpan";var d=obips.ToolbarHeader.Model.prototype.getLocalizedString("kmsgUICGTBSaved");e.appendChild(this.tDiv.ownerDocument.createTextNode(d));var a=obips.ToolbarHeader.StatusIndicator.knDefaultTimout;this.container.setAttribute("selenium_flag","true");var b=this;setTimeout(function(){b.hide(true)},a*1000)};obips.ToolbarHeader.StatusIndicator.showMessage=function(f,d,a){saw.clearInnerHTML(this.container);this.tDiv=saw.createChildElement(this.container,"div","StatusIndicatorDiv");if(f){var c=saw.createChildElement(this.tDiv,"img","StatusIndicatorIcon");c.src=f;c.alt=""}var e=saw.createChildElement(this.tDiv,"span","StatusIndicatorText");e.appendChild(this.container.ownerDocument.createTextNode(d));if(a==null){a=obips.ToolbarHeader.StatusIndicator.knDefaultTimout}if(a>0){var b=this;setTimeout(function(){b.hide(true)},a*1000)}};obips.ToolbarHeader.StatusIndicator.hide=function(a){saw.clearInnerHTML(this.tDiv);if(a){obips.ToolbarHeader.StatusIndicator.container.setAttribute("selenium_flag","hidden")}};