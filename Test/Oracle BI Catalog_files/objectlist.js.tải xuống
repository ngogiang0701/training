if(!saw.catalog.ObjectList){saw.catalog.ObjectList=function(f,b,e,d,c,g){saw.catalog.ObjectList.baseConstructor.call(this);this.webCatalogManager=saw.catalog.getCatalogManager();this.orderBy=e?e:"name";this.order=d?d:saw.list.Model.SortOrder.ASCENDING;var a=this;this.compareFunc=function(i,h){return a.compareObj(i.content,h.content)};this.filterFunc=function(h){return a.canDisplay(h)};this.typeFilter=b?b:"all";this.dragdrop=c;this.dndGroup=g;this.showingHiddenItems=false;this.showItemWithNoAccess=false;this.multiSelection=false;this.folderPath=null;this.webCatalogManager.addEventListener(new obips.Observable.EventListener(obips.catalog.EventType.ITEM_UPDATED,new obips.Callback(this,this.itemUpdatedHandler)));this.webCatalogManager.addEventListener(new obips.Observable.EventListener(obips.catalog.EventType.ITEMS_DELETED,new obips.Callback(this,this.itemsDeletedHandler)));this.webCatalogManager.addEventListener(new obips.Observable.EventListener(obips.catalog.EventType.ITEM_CREATED,new obips.Callback(this,this.itemCreatedHandler)));this.webCatalogManager.addEventListener(new obips.Observable.EventListener(obips.catalog.EventType.ITEMS_COPIED,new obips.Callback(this,this.itemsCopiedHandler)));this.webCatalogManager.addEventListener(new obips.Observable.EventListener(obips.catalog.EventType.ITEMS_MOVED,new obips.Callback(this,this.itemsMovedHandler)));this.webCatalogManager.addEventListener(new obips.Observable.EventListener(obips.catalog.EventType.ITEM_RENAMED,new obips.Callback(this,this.itemRenamedHandler)));this.webCatalogManager.addEventListener(new obips.Observable.EventListener(obips.catalog.EventType.ITEMS_INVALIDATED,new obips.Callback(this,this.itemInvalidatedHandler)));this._setInvisibleCount=0};saw.extend(saw.catalog.ObjectList,obips.Observable);saw.catalog.ObjectList.EventType=function(){};saw.catalog.ObjectList.EventType.SELECTION_CHANGED="selectionChanged";saw.catalog.ObjectList.EventType.ITEM_DOUBLE_CLICKED="itemDoubleClicked";saw.catalog.ObjectList.EventType.ITEM_ACTIVATED="itemActivated";saw.catalog.ObjectList.EventType.ITEM_EXEC_ACTION="itemExecAction";saw.catalog.ObjectList.EventType.DROPPED_ON_ITEM="droppedOnItem";saw.catalog.ObjectList.EventType.VIEW_IN_FOLDER="viewInFolder";saw.catalog.ObjectList.EventType.DROPPED_IN_LIST="droppedInList";saw.catalog.ObjectList.EventType.ITEM_COUNT_CHANGED="itemCountChanged";saw.catalog.ObjectList.EventType.SEARCH_RESULTS_UPDATED="searchResultsUpdated";saw.catalog.ObjectList.ItemActionEventContext=function(c,a,b){this.listItem=c;this.action=a;this.evt=b};saw.catalog.ObjectList.VIEW_TYPE_VERBOSE="verbose";saw.catalog.ObjectList.VIEW_TYPE_DETAIL="detail";saw.catalog.ObjectList.VIEW_TYPE_LIST="list";saw.catalog.ObjectList.prototype.setShowItemWithNoAccess=function(a){this.adminMode=a;this.showItemWithNoAccess=a};saw.catalog.ObjectList.prototype.setHideDetails=function(a){this.detailsHidden=a};saw.catalog.ObjectList.prototype.hideDetails=function(){this.detailsHidden=true;this.reload(new obips.catalog.ItemInfoDetailLevel(obips.catalog.ExtendedAttrLevel.NORMAL))};saw.catalog.ObjectList.prototype.showDetails=function(a){this.detailsHidden=false;this.reload(a)};saw.catalog.ObjectList.prototype.isDetailsHidden=function(){return this.detailsHidden===true};saw.catalog.ObjectList.prototype.render=function(a,h){this.container=a;this.viewType=h;var f=saw.storage.ClientStorageManager.getSingleton();var g=f.getState(saw.catalog.StateID.CV_TOOLBAR_CATEGORY);this.typeSelector=document.getElementById("idCatalogObjectTypeSelect");if(this.typeSelector){saw.header.populateTypeSelector(this.typeSelector,g)}if(g){this.typeFilter=g}this.sortingSelector=document.getElementById("idCatalogObjectSortSelect");if(this.sortingSelector){var c=f.getState(saw.catalog.StateID.CV_TOOLBAR_ORDER_RULE);var j=null;var b=true;if(c){for(var e=0;e<this.sortingSelector.options.length;e++){if(c==this.sortingSelector.options[e].value){b=false;j=c;this.sortingSelector.options[e].selected=true;break}}}if(b){j=this.sortingSelector.options[this.sortingSelector.selectedIndex].value}var e=j.indexOf(".");this.orderBy=j.substr(0,e);this.order=j.charAt(e+1)=="d"?saw.list.Model.SortOrder.DESCENDING:saw.list.Model.SortOrder.ASCENDING}this.showMoreDetails=document.getElementById("idCatalogShowMoreDetails");if(this.showMoreDetails){var d=f.getState(saw.catalog.StateID.CV_TOOLBAR_SHOW_MORE_DETAILS);this.showMoreDetails.checked=d=="true"?true:false}if(this.dragdrop){this.dropInListTarget=new saw.catalog.ObjectList.DropInListTarget(this)}};saw.catalog.ObjectList.prototype.setVisible=function(a){if(!this._setInvisibleCount){this._setInvisibleCount=0}this._setInvisibleCount=a?this._setInvisibleCount-1:this._setInvisibleCount+1;var b=saw.getLastChildElement(this.container);if(b){if(a&&this._setInvisibleCount==0){b.style.display=""}else{if(this._setInvisibleCount==1){b.style.display="none"}}}};saw.catalog.ObjectList.prototype.showFolderContent=function(d,c,b){this.showLoadingMessage();this.onLoadFolderErrorCB=b?b:null;this.folderPath=d;this.searchTarget=null;this.customSearch=null;this.itemInfoDetailLevel=c;var a=this.showItemWithNoAccess?obips.catalog.ItemPermissions.NONE:obips.catalog.ItemPermissions.READ;var e=this.showItemWithNoAccess?obips.catalog.ItemPermissions.NONE:obips.catalog.ItemPermissions.READ;this.webCatalogManager.getSubItems(d,false,e,e,c,new obips.Callback(this,this.addChildrenToObjectList))};saw.catalog.ObjectList.prototype.showSearchResult=function(e,f){this.showLoadingMessage();this.folderPath=null;this.searchTarget=e;this.customSearch=null;this.itemInfoDetailLevel=f;if(e.type){var h=[];var c=[];var b=saw.catalog.getObjectTypeInfos();for(var d in b){if(b[d].typeCategory==e.type){if(b[d].intrinsicType==saw.catalog.IntrinsicType.FOLDER){c.push(d)}else{h.push(d)}}}}var a=e.bShowHiddenValues!=undefined&&e.bShowHiddenValues!=null?e.bShowHiddenValues:saw.catalog.getPrivilege("canShowHiddenItems")&&saw.getSessionInfos().user.prefs.showHiddenItems();var g=new obips.catalog.SearchTarget(obips.catalog.escapeSearchString(e.name),true,false,h,c,e.facetAttributes,a);if(this.showItemWithNoAccess){g.withPermision=obips.catalog.ItemPermissions.NONE;g.withPermisionMask=obips.catalog.ItemPermissions.NONE}else{g.withPermision=obips.catalog.ItemPermissions.READ;g.withPermisionMask=obips.catalog.ItemPermissions.READ}if(this.adminMode){g.adminMode=true}this.webCatalogManager.searchEx(e.location,g,f,new obips.Callback(this,this.addChildrenToObjectList))};saw.catalog.ObjectList.prototype.showCustomSearchResult=function(a,b){this.showLoadingMessage();this.folderPath=null;this.searchTarget=null;this.customSearch=a;this.itemInfoDetailLevel=b;this.webCatalogManager.customSearch(a,b,new obips.Callback(this,this.addChildrenToObjectList))};saw.catalog.ObjectList.prototype.refresh=function(){};saw.catalog.ObjectList.prototype.reload=function(a){a=a||this.itemInfoDetailLevel;if(this.folderPath){this.showFolderContent(this.folderPath,a)}else{if(this.searchTarget){this.showSearchResult(this.searchTarget,a)}else{if(this.customSearch){this.showCustomSearchResult(this.customSearch,a)}}}};saw.catalog.ObjectList.prototype.setMultiSelection=function(a){this.multiSelection=a;if(this.objectListViewer){this.objectListViewer.setSelectionType(this.multiSelection?saw.list.ViewModel.SelectionType.MULTIPLE:saw.list.ViewModel.SelectionType.SINGLE)}};saw.catalog.ObjectList.prototype.showHiddenItems=function(){if(!this.showingHiddenItems){this.showingHiddenItems=true;this.setTypeFilter(this.typeFilter)}};saw.catalog.ObjectList.prototype.hideHiddenItems=function(){if(this.showingHiddenItems){this.showingHiddenItems=false;this.setTypeFilter(this.typeFilter)}};saw.catalog.ObjectList.prototype.deactivate=function(){if(this.objectListViewer){this.objectListViewer.viewModel.deactivateItem()}};saw.catalog.ObjectList.prototype.setTypeFilter=function(a){this.typeFilter=a;if(this.objectListModel){this.objectListModel.filter(this.filterFunc)}};saw.catalog.ObjectList.prototype.setSortingRule=function(b,a){this.orderBy=b;this.order=a;this.objectListModel.sortByProperty(this.orderBy,this.order)};saw.catalog.ObjectList.prototype.setViewType=function(a){if(this.viewType!=a){this.viewType=a;if(this.objectListViewer){this.objectListViewer.setViewStyle(this.setupViewStyle(this.objectListViewer.getViewStyle(a),this.container.clientWidth))}}};saw.catalog.ObjectList.prototype.getSelectedItems=function(){if(this.objectListViewer){return obips.Array.map(this.objectListViewer.viewModel.selectedItems,function(a){return a.content})}else{return null}};saw.catalog.ObjectList.prototype.getActiveItem=function(){return this.objectListViewer&&this.objectListViewer.viewModel.activeItem};saw.catalog.ObjectList.prototype.findItemByPath=function(b){if(this.objectListViewer){var a=this.objectListViewer.model.items;for(var c=0;c<a.length;c++){if(a[c].content.path==b){return a[c]}}}return null};saw.catalog.ObjectList.prototype.findObjectByCaption=function(a){if(this.objectListViewer){var c=this.getSelectedItems();for(var d=0;d<c.length;d++){if(c[d].caption==a){return c[d]}}var b=this.objectListViewer.model.items;for(var d=0;d<b.length;d++){if(b[d].content.caption==a){return b[d].content}}}return null};saw.catalog.ObjectList.prototype.getCurrentFolderItems=function(){var b=null;if(this.objectListViewer){var a=this.objectListViewer.model.items;b=new Array();for(var c=0;c<a.length;c++){b.push(a[c].content)}}return b};saw.catalog.ObjectList.prototype.itemUpdatedHandler=function(b){var c=b.context;if(this.objectListModel){var a=this.findItemByPath(c.path);if(a){if(this.showItemWithNoAccess||c.operationPermissions&obips.catalog.OperationPermissions.READ){this.objectListModel.updateItem(a,new saw.catalog.ObjectList.ItemContent(c,this))}else{this.objectListModel.removeItem(a)}}}};saw.catalog.ObjectList.prototype.itemInvalidatedHandler=function(b){var a=b.context;if(obips.Array.contains(a,this.folderPath)){this.showFolderContent(this.folderPath)}};saw.catalog.ObjectList.prototype.itemRenamedHandler=function(b){var c=b.context.destItemInfo;if(this.objectListModel){var a=this.findItemByPath(b.context.srcPath);if(a){this.objectListModel.updateItem(a,new saw.catalog.ObjectList.ItemContent(c,this));this.objectListViewer.makeItemVisible(a);this.notify(new obips.Observable.Event(saw.catalog.ObjectList.EventType.SELECTION_CHANGED,this.getSelectedItems()))}}};saw.catalog.ObjectList.prototype.itemCreatedHandler=function(c){var d=c.context;if(this.objectListModel&&this.folderPath==saw.getFolder(d.path)){var b=this.findItemByPath(d.path);if(b){this.objectListModel.updateItem(b,new saw.catalog.ObjectList.ItemContent(d,this))}else{var a=new saw.list.ItemModel(new saw.catalog.ObjectList.ItemContent(d,this));this.objectListModel.addItem(a);if(!a.hidden){this.selectSingleItem(d.path);this.objectListViewer.makeItemVisible(a)}}this.notify(new obips.Observable.Event(saw.catalog.ObjectList.EventType.SELECTION_CHANGED,this.getSelectedItems()))}};saw.catalog.ObjectList.prototype.itemsDeletedHandler=function(b){var a=obips.Array.map(b.context,function(c){return c.path});this.removeItems(a)};saw.catalog.ObjectList.prototype.removeItems=function(d){if(!this.objectListViewer){return}var c=new Array;for(var b=0;b<d.length;b++){var a=this.findItemByPath(d[b]);if(a){c.push(a)}}if(c.length>0){this.objectListViewer.model.removeItems(c);this.notify(new obips.Observable.Event(saw.catalog.ObjectList.EventType.ITEM_COUNT_CHANGED,this.objectListViewer.model.items.length));this.notify(new obips.Observable.Event(saw.catalog.ObjectList.EventType.SELECTION_CHANGED,null))}};saw.catalog.ObjectList.prototype.itemsCopiedHandler=function(g){var f=g.context;var d=new Array;var e=new Array;var h=new Array;for(var b=0;b<f.length;b++){if(saw.getFolder(f[b].destItemInfo.path)==this.folderPath){var a=new saw.catalog.ObjectList.ItemContent(f[b].destItemInfo,this);var c=this.findItemByPath(f[b].destItemInfo.path);if(c){e.push(c);h.push(a)}else{d.push(new saw.list.ItemModel(a))}}}if(e.length){this.objectListModel.updateItems(e,h)}if(d.length){this.objectListModel.addItems(d)}};saw.catalog.ObjectList.prototype.itemsMovedHandler=function(b){var a=obips.Array.map(b.context,function(c){return c.srcPath});this.removeItems(a);this.itemsCopiedHandler(b)};saw.catalog.ObjectList.prototype.itemSelectionChangedHandler=function(c){var a=[];for(var b=0;b<c.context.selected.length;b++){a.push(c.context.selected[b].content)}this.notify(new obips.Observable.Event(saw.catalog.ObjectList.EventType.SELECTION_CHANGED,a))};saw.catalog.ObjectList.prototype.itemActivatedHandler=function(a){this.notify(new obips.Observable.Event(saw.catalog.ObjectList.EventType.ITEM_ACTIVATED,a.context.content))};saw.catalog.ObjectList.prototype.itemDoubleClickedHandler=function(b){var a=b.context;this.notify(new obips.Observable.Event(saw.catalog.ObjectList.EventType.ITEM_DOUBLE_CLICKED,a.content))};saw.catalog.ObjectList.prototype.itemContextMenuHandler=function(h){if(saw.getSessionInfos().isEnableSection508()){return false}var f=h.context.itemModel.content;var b=h.context.evt;var c=new Array();var g=saw.catalogaction.getActionManager().getAllowedActions(f.itemInfo,true);for(var d=0;d<g.length;d++){saw.catalogaction.addItemActionMenuOption(c,g[d],f)}if(g.pending){tMenuOption=new obips.ContextMenu.MenuOption("","",saw.catalog.getImgUrl("catalog/loading-indicator-white.gif"),new obips.Callback(null,function(){}));c.push(tMenuOption)}var a=new obips.ContextMenu.Model({listItem:f},c);a.name="objectListItemContextMenu";b=obips.BrowserEventFramework.normalizeEvent(b);var e=obips.ContextMenu.Manager.getSingleton().display(a,b);e.setLaunchElement(this.objectListViewer.getItemViewerByItemModel(h.context.itemModel));saw.stopEventPropagation(b);return false};saw.catalog.ObjectList.prototype.updateItemContextMenu=function(a,e,h){var f=a.context.listItem;var c=new Array();if(h){var g=e}else{var g=saw.catalogaction.getActionManager().getAllowedActions(f.itemInfo);if(g.pending){g=g.concat(e)}}for(var d=0;d<g.length;d++){var b=new obips.ContextMenu.MenuOption(g[d].name,"",g[d].icon,new obips.Callback(f,f.itemActionsMenuOptionHandler));b.action=g[d].id;c.push(b)}a.setMenuOptions(c)};saw.catalog.ObjectList.prototype.compareObj=function(k,i,g,c){var f=0;var e=function(a,b){if(!b){return a.isFolder()}if(!a.isFolder()){return false}else{return a.itemInfo.getCompositeSignature()==null}};if(!g){g=this.orderBy}else{this.orderBy=g}if(!c){c=this.order}else{this.order=c}if(g=="relevance"){f=k.getPropertyValue(g)<=i.getPropertyValue(g)?-1:1}else{var h=g=="type";var m=e(k,h);var d=e(i,h);if(m&&!d){f=-1}else{if(d&&!m){f=1}else{var l=g=="lastModified"?k[g]:k.getPropertyValue(g);var j=g=="lastModified"?i[g]:i.getPropertyValue(g);l=typeof(l)=="string"?l.toLowerCase():l;j=typeof(j)=="string"?j.toLowerCase():j;if(l==j){l=k.getPropertyValue("name").toLowerCase();j=i.getPropertyValue("name").toLowerCase()}if(l.localeCompare){f=l.localeCompare(j)}else{if(l<j){f=-1}else{if(l>j){f=1}}}}}}if(c==saw.list.Model.SortOrder.DESCENDING){f=-f}return f};saw.catalog.ObjectList.prototype.canDisplay=function(a){if(!this.showingHiddenItems&&a.isHidden){return false}if(this.typeFilter&&this.typeFilter.canAccept){return this.typeFilter.canAccept(a.itemInfo)}else{if(a.isFolder()){return true}else{return this.typeFilter=="all"||a.getTypeCategory()==this.typeFilter}}};saw.catalog.ObjectList.prototype.showLoadingMessage=function(){this.loadingInProcess=true;var a=document.createElement("img");a.src=saw.catalog.getImgUrl("catalog/loading-indicator-white.gif");a.alt="";a.style.margin="3px";saw.clearInnerHTML(this.container);this.container.appendChild(a)};saw.catalog.ObjectList.prototype.addChildrenToObjectList=function(a){if(a.getErrorMessage()){if(this.onLoadFolderErrorCB&&this.folderPath){this.onLoadFolderErrorCB.exec(a)}else{saw.catalog.showError(a.getErrorMessage())}}this.searchResultsTruncated=a.resultsTruncated;this.biSearchIndexUpdateDateTime=a.biSearchIndexUpdateDateTime;this.biSearch=a.isBISearch;this.searchFacets=a.searchFacets;if(saw.catalog.getPrivilege("bUseBISearchWithFacetUI")){this.notify(new obips.Observable.Event(saw.catalog.ObjectList.EventType.SEARCH_RESULTS_UPDATED,null))}this.setItems(a.itemInfos);this.loadingInProcess=false};saw.catalog.ObjectList.prototype.isSearchResultsTruncated=function(){return this.searchResultsTruncated};saw.catalog.ObjectList.prototype.isBISearch=function(){return this.biSearch};saw.catalog.ObjectList.prototype.getbiSearchIndexUpdateDateTime=function(){return this.biSearchIndexUpdateDateTime};saw.catalog.ObjectList.prototype.isLoading=function(){return this.loadingInProcess==true};saw.catalog.ObjectList.prototype.setItems=function(b){var d=new Array();if(b){for(var a=0;a<b.length;a++){var e=b[a];var c=new saw.list.ItemModel(new saw.catalog.ObjectList.ItemContent(e,this,a));d.push(c)}d.sort(this.compareFunc)}this.displayListItems(d)};saw.catalog.ObjectList.prototype.clear=function(){this.displayListItems(null)};saw.catalog.ObjectList.prototype.setupViewStyle=function(a,b){if(!a){if(this.viewType==saw.catalog.ObjectList.VIEW_TYPE_VERBOSE){a=new saw.list.ViewStyle("100%",saw.catalog.ObjectList.VIEW_TYPE_VERBOSE,null,1,saw.list.FILL_BY_COL,"masterAccordionBottomContentAreaPanel CatalogListVerboseCell")}else{if(this.viewType==saw.catalog.ObjectList.VIEW_TYPE_LIST){a=new saw.list.ViewStyle("auto",saw.catalog.ObjectList.VIEW_TYPE_LIST,null,3,saw.list.FILL_BY_COL,"CatalogListListCell")}else{a=new saw.list.ViewStyle("100%",saw.catalog.ObjectList.VIEW_TYPE_DETAIL,null,null,null,null,[new saw.list.ItemProperty("name",saw.catalog.getLocalizedString("kmsgCatalogSearchName"),"300px"),new saw.list.ItemProperty("location",saw.catalog.getLocalizedString("kmsgCatalogSearchLocation"),"300px",true),new saw.list.ItemProperty("type",saw.catalog.getLocalizedString("kmsgCatalogSearchType"),"100px"),new saw.list.ItemProperty("lastModified",saw.catalog.getLocalizedString("kmsgCatalogLastModified"),"170px"),new saw.list.ItemProperty("owner",saw.catalog.getLocalizedString("kmsgCatalogItemOwner"),"120px")],true);if(b&&b<690){a.itemProperties[0].width=Math.max(150,300-(690-b))+"px"}}}}if(a.viewType!=saw.catalog.ObjectList.VIEW_TYPE_VERBOSE){var c=this.container.clientHeight;a.rows=Math.max(1,Math.floor(c/20));this.container.style.overflowX="auto"}else{if(saw.userAgent.is_ie){this.container.style.overflowX="hidden"}this.container.style.overflowY="auto"}if(a.viewType==saw.catalog.ObjectList.VIEW_TYPE_DETAIL){if(this.isSearchResult()){a.itemProperties[1].hidden=false}else{a.itemProperties[1].hidden=true}}return a};saw.catalog.ObjectList.prototype.isSearchResult=function(){return this.folderPath==null};saw.catalog.ObjectList.prototype.displayListItems=function(b){if(!this.objectListViewer){var a=this;this.objectListModel=new saw.list.Model(b,this.orderBy,this.order,function(d,c,f,e){return a.compareObj(d,c,f,e)});this.setTypeFilter(this.typeFilter);saw.clearInnerHTML(this.container);this.objectListViewer=new saw.list.Viewer(this.objectListModel,this.container,this.multiSelection?saw.list.ViewModel.SelectionType.MULTIPLE:saw.list.ViewModel.SelectionType.SINGLE,null,this.dragdrop,saw.catalog.ObjectList.ItemDragDropObj,this.setupViewStyle(null,this.container.clientWidth));this.objectListViewer.viewModel.addEventListener(new obips.Observable.EventListener(saw.list.ViewModel.EventType.ITEM_SELECTION_CHANGED,new obips.Callback(this,this.itemSelectionChangedHandler)));this.objectListViewer.viewModel.addEventListener(new obips.Observable.EventListener(saw.list.ViewModel.EventType.ITEM_ACTIVATED,new obips.Callback(this,this.itemActivatedHandler)));this.objectListViewer.viewModel.addEventListener(new obips.Observable.EventListener(saw.list.ViewModel.EventType.ITEM_DOUBLE_CLICKED,new obips.Callback(this,this.itemDoubleClickedHandler)));this.objectListViewer.viewModel.addEventListener(new obips.Observable.EventListener(saw.list.ViewModel.EventType.ITEM_CONTEXT_MENU,new obips.Callback(this,this.itemContextMenuHandler)));this.objectListViewer.model.addEventListener(new obips.Observable.EventListener(saw.list.Model.EventType.FILTERED,new obips.Callback(this,this.itemsFilteredHandler)));if(this.dragdrop){this.objectListViewer.viewModel.addEventListener(new obips.Observable.EventListener(saw.list.ViewModel.EventType.DROPPED_ON_ITEM,new obips.Callback(this,this.dropOnItemHandler)))}this.notify(new obips.Observable.Event(saw.catalog.ObjectList.EventType.ITEM_COUNT_CHANGED,this.objectListViewer.getDisplayedItemNum()))}else{if(this.isSearchResult()){this.objectListViewer.showColumns(["location"],true)}else{this.objectListViewer.hideColumns(["location"],true)}this.objectListModel.setItems(b,true);this.setTypeFilter(this.typeFilter)}this.notify(new obips.Observable.Event(saw.catalog.ObjectList.EventType.SELECTION_CHANGED,null))};saw.catalog.ObjectList.prototype.itemsFilteredHandler=function(a){this.notify(new obips.Observable.Event(saw.catalog.ObjectList.EventType.ITEM_COUNT_CHANGED,this.objectListViewer.getDisplayedItemNum()))};saw.catalog.ObjectList.prototype.addObject=function(a){var b=this.objectListModel.items;b.push(new saw.list.ItemModel(a));b.sort(this.compareFunc);this.displayListItems(b)};saw.catalog.ObjectList.prototype.dropOnItemHandler=function(b){var a=new saw.catalog.ObjectList.ItemDragDropEventContext(b.context.dragSourceObj,b.context.targetItemViewer.model.content,b.context.evt);this.notify(new obips.Observable.Event(saw.catalog.ObjectList.EventType.DROPPED_ON_ITEM,a))};saw.catalog.ObjectList.prototype.onContainerResized=function(b){if(this.objectListViewer){if(this.viewType==saw.catalog.ObjectList.VIEW_TYPE_LIST){var a=this.setupViewStyle(this.objectListViewer.getViewStyle(this.viewType));this.objectListViewer.setViewStyle(a)}this.objectListViewer.onResize()}};saw.catalog.ObjectList.prototype.selectSingleItem=function(a){if(this.objectListViewer){var b=this.findItemByPath(a);if(b){this.objectListViewer.viewModel.selectSingleItem(b)}}};saw.catalog.ObjectList.prototype.getItemHTMLContainer=function(b){var a=this.findItemByPath(b);if(a){var c=this.objectListViewer.getItemViewerByItemModel(a);if(c){return c.container}}return null};saw.catalog.ObjectList.ItemDragDropEventContext=function(b,c,a){this.source=b;this.dropTarget=c;this.evt=a};saw.catalog.ObjectList.DropInListEventContext=function(b,c,a){this.source=b;this.list=c;this.evt=a};saw.catalog.ObjectList.DropInListTarget=function(a){this.list=a;saw.catalog.ObjectList.DropInListTarget.baseConstructor.call(this,a.container,this.list.dndGroup)};saw.extend(saw.catalog.ObjectList.DropInListTarget,saw.dnd.DropTarget);saw.catalog.ObjectList.DropInListTarget.prototype.isTarget=function(a){return true};saw.catalog.ObjectList.DropInListTarget.prototype.onDragDrop=function(a,c){var b=new saw.catalog.ObjectList.DropInListEventContext(c,this.list,a);this.list.notify(new obips.Observable.Event(saw.catalog.ObjectList.EventType.DROPPED_IN_LIST,b))};saw.catalog.ObjectList.ItemDragDropObj=function(a){saw.catalog.ObjectList.ItemDragDropObj.baseConstructor.call(this,a);this.ctrlDraggingCursor="url("+saw.catalog.getImgUrl("catalog/cursor_copy.cur")+"), copy"};saw.extend(saw.catalog.ObjectList.ItemDragDropObj,saw.list.DragDropObj);saw.catalog.ObjectList.ItemContent=function(c,a,b){this.list=a;this.itemInfo=c;this.path=this.itemInfo.path;this.caption=this.itemInfo.caption;this.type=this.itemInfo.type;this.owner=this.itemInfo.ownerAccount.name;this.signature=this.itemInfo.signature;this.description=this.itemInfo.description;this.isHidden=this.itemInfo.isHidden();this.lastModified=this.itemInfo.lastModified;this.lastModifiedDisplay=this.itemInfo.lastModifiedDisplay;this.relevance=b?b:0};saw.extend(saw.catalog.ObjectList.ItemContent,saw.list.ItemContent);saw.catalog.ObjectList.ItemContent.prototype.clone=function(){var a=new saw.catalog.ObjectList.ItemContent(this.itemInfo,this.list,this.relevance);return a};saw.catalog.ObjectList.ItemContent.prototype.getIcon=function(a){return saw.catalog.getItemIcon(this.itemInfo,true,a,saw.catalog.ThumbnailFlags.IF_AVAILABLE)};saw.catalog.ObjectList.ItemContent.prototype.isFolder=function(b){var a=this.itemInfo.getFolderType(b);if(!a){return false}return a!=obips.catalog.FolderType.OBJECT};saw.catalog.ObjectList.ItemContent.prototype.isLink=function(){return this.type==obips.catalog.ItemType.LINK};saw.catalog.ObjectList.ItemContent.prototype.getTypeCategory=function(){var a=this.itemInfo.getObjectTypeInfo(true);return a?a.typeCategory:null};saw.catalog.ObjectList.ItemContent.prototype.getPropertyValue=function(a){switch(a){case"name":return this.caption;case"relevance":return this.relevance;case"location":return saw.catalog.ObjectList._getCatalogDisplayPathWithoutServerCall(saw.getFolder(this.itemInfo.path));case"type":return saw.catalog.getItemTypeName(this.itemInfo);case"lastModified":return this.lastModifiedDisplay;case"owner":return this.owner;default:return this[a]}};saw.catalog.ObjectList._getCatalogDisplayPathWithoutServerCall=function(g,a){a=saw.catalog.getDisplayPathSeparator(a);var k=1;var j=null;var e=false;var l=new RegExp("/users","i");var c=new RegExp(saw.getSessionInfos().user.homeDir,"i");var d=new RegExp("/shared","i");var b=new RegExp("/system","i");if(g.search(c)==0){j=saw.catalog.getLocalizedString("kmsgCatalogFavoriteFolderMyFolder");k=2;e=true}else{if(saw.hooks.tRECustomPath&&(g.search(saw.hooks.tRECustomPath)!=-1)){j=saw.hooks.sCustomPathMsg;if(saw.hooks.nCustomPathSkip){k=saw.hooks.nCustomPathSkip}}else{if(g.search(l)==0){j=saw.catalog.getLocalizedString("kmsgCatalogUsersFolder")}else{if(g.search(d)==0){j=saw.catalog.getLocalizedString("kmsgCatalogSharedFolder")}else{if(g.search(b)==0){j=saw.catalog.getLocalizedString("kmsgCatalogSystemFolder")}}}}}if(j){var f="";var m=saw.getPathParts(g);for(var h=m.length-1-k;h>=0;h--){if(m[h]=="_filters"){f+=saw.catalog.getLocalizedString("kmsgCatalogFilters")}else{if(m[h].toLowerCase()=="_portal"){if(e){f+=saw.catalog.getLocalizedString("kmsgCatalogMyDashboard")}else{f+=saw.catalog.getLocalizedString("kmsgCatalogDashboards")}}else{f+=saw.pathPartToItemName(m[h])}}if(h>0){f+=a}}return a+j+(f?a+f:"")}return g};saw.catalog.ObjectList.ItemContent.prototype.getPropertyViewer=function(d,e){if(this.isHidden){e.className=e.className+" CatalogSystemObject"}if(d=="name"){var c=saw.catalog.ObjectList.createTextNodeWithImage(this.caption,this.getIcon(saw.catalog.IconType.SMALL),saw.catalog.getItemTypeName(this.itemInfo),this.isLink(),this.isFolder(true),this.itemInfo.isFavorite);c.title=this.itemInfo.description||this.itemInfo.caption;this.focusElement=c;return c}else{if(d=="location"){var b=this.getPropertyValue(d);var c=saw.catalog.ObjectList.createTextNodeWithImage(b,saw.catalog.getImgUrl("catalog/view_in_folder.png"));var a=saw.getFirstChildElement(c);a.className="CatalogViewInFolderIcon";a.title=saw.catalog.getLocalizedString("kmsgCatalogViewFolderIconTip",b);a.onclick=saw.catalog.ObjectList.ItemContent.viewInFolderIconClickHandler;a.listItem=this;return c}}return saw.catalog.ObjectList.ItemContent.superClass.getPropertyViewer.call(this,d,e)};saw.catalog.ObjectList.ItemContent.viewInFolderIconClickHandler=function(a){a=saw.getEvent(a);var b=saw.getEventTarget(a);b.listItem.list.notify(new obips.Observable.Event(saw.catalog.ObjectList.EventType.VIEW_IN_FOLDER,saw.getFolder(b.listItem.itemInfo.path)));saw.stopEventPropagation(a);return false};saw.catalog.ObjectList.ItemContent.prototype.getViewer=function(a,b){this.viewType=a;if(a==saw.catalog.ObjectList.VIEW_TYPE_VERBOSE){return this.getVerboseViewer(b)}else{if(a=saw.catalog.ObjectList.VIEW_TYPE_LIST){return this.getListViewer(b)}}return b.ownerDocument.createTextNode(saw.catalog.getLocalizedString("kmsgCatalogUnknownListViewType",a))};saw.catalog.ObjectList.ItemContent.prototype.getListViewer=function(b){var a=saw.catalog.ObjectList.createTextNodeWithImage(this.itemInfo.caption,this.getIcon(saw.catalog.IconType.SMALL),saw.catalog.getItemTypeName(this.itemInfo),this.isLink(),this.isFolder(true),this.itemInfo.isFavorite);a.className="CatalogObjectListListViewItem";if(this.isHidden){b.className=b.className+" CatalogSystemObject"}a.title=this.itemInfo.description||this.itemInfo.caption;this.focusElement=a;return a};saw.catalog.ObjectList.createTextNodeWithImage=function(i,e,d,g,h,j){var f=document;var a=f.createElement("span");a.className="CatalogObjectListItemTextWithIcon";var b=saw.createChildElement(a,"img","CatalogObjectListItemSmallIcon");b.src=e;b.alt=d;if(j){var c=saw.createChildElement(a,"img","favoritesCreateSmallOverlay");c.src=saw.catalog.getImgUrl("favorites/favorites_qualifier.png");c.alt=saw.catalog.getLocalizedString("kmsgBIHCreateNewObjectIconOverLayAltText");c.title=""}if(g){b=saw.createChildElement(a,"img","CatalogItemSmallIconLink");b.src=saw.catalog.getImgUrl("catalog/link.png");b.alt=saw.catalog.getLocalizedString(h?"kmsgCatalogItemTypeLinkToFolder":"kmsgCatalogItemTypeLinkToObject")}saw.createChildElement(a,"span").appendChild(f.createTextNode(i));return a};saw.catalog.ObjectList.ItemContent.prototype.getVerboseViewer=function(c){var m=this.itemInfo;var n=m.isFavorite;var i=c.ownerDocument;var l=i.createElement("div");this.focusElement=l;var g=saw.createTable(null,null,l);g.cellSpacing=4;var k=g.insertRow(0);var d=k.insertCell(0);d.className="CatalogObjectListItemIcon";if(this.isLink()){e=saw.createChildElement(d,"img","CatalogItemBigIconLink");e.src=saw.catalog.getImgUrl("catalog/link_b.png")}var e=i.createElement("img");e.src=this.getIcon(saw.catalog.IconType.MEDIUM);var a=saw.catalog.getItemTypeName(m);e.alt=a;e.title=a;d.appendChild(e);if(n){var f=saw.createChildElement(d,"img","favoritesCreateLargeOverlay");f.src=saw.catalog.getImgUrl("favorites/favorites_qualifier.png");f.alt=saw.catalog.getLocalizedString("kmsgBIHCreateNewObjectIconOverLayAltText");f.title=""}d=k.insertCell(k.cells.length);var b=i.createElement("span");b.className="masterHeader CatalogObjectListItemTitle";b.appendChild(i.createTextNode(this.caption));d.appendChild(b);b=i.createElement("span");b.className="CatalogObjectListItemLastModifiedTime";b.appendChild(i.createTextNode(saw.catalog.getLocalizedString("kmsgCatalogLastModified")+this.lastModifiedDisplay));d.appendChild(b);b=i.createElement("span");b.className="CatalogObjectListItemOwner";b.appendChild(i.createTextNode(saw.catalog.getLocalizedString("kmsgCatalogItemOwner")+" "+this.owner));d.appendChild(b);if(m.extendedAttributes){var j=saw.catalogaction.getActionManager().findExtendedAttributesRenderer(m);if(j){k=g.insertRow(g.rows.length);d=k.insertCell(0);j.exec(m,d)}}if(this.description){k=g.insertRow(g.rows.length);d=k.insertCell(k.cells.length);b=i.createElement("span");b.className="CatalogObjectListItemDescription";b.appendChild(document.createTextNode(this.description));d.appendChild(b)}if(this.list.isSearchResult()){k=g.insertRow(g.rows.length);d=k.insertCell(0);var h=saw.createChildElement(d,"a","CatalogActionLink");h.appendChild(document.createTextNode(this.getPropertyValue("location")));h.href="javascript:void(null)";h.onclick=saw.catalog.ObjectList.ItemContent.viewInFolderIconClickHandler;h.listItem=this}k=g.insertRow(g.rows.length);d=k.insertCell(0);saw.catalogaction.renderActionLinks(d,this,this.itemInfo);g.rows[0].cells[0].rowSpan=g.rows.length;if(this.isHidden){g.className="CatalogSystemObject"}return l};saw.catalog.ObjectList.ItemContent.prototype.getFocusElement=function(){return this.focusElement};saw.catalog.ObjectList.ItemContent.prototype.itemActionsMenuOptionHandler=function(b){var a=b.context.menuOption.action;this.handleItemAction(a,b.context.tBrowserEvt)};saw.catalog.ObjectList.ItemContent.prototype.handleItemAction=function(a,c){var b=new saw.catalog.ObjectList.ItemActionEventContext(this,a,c);this.list.notify(new obips.Observable.Event(saw.catalog.ObjectList.EventType.ITEM_EXEC_ACTION,b))};saw.catalog.ObjectList.ItemContent.prototype.getDnDGroups=function(){return this.list.dndGroup?[this.list.dndGroup]:null};saw.catalog.ObjectList.ItemContent.prototype.isDropTarget=function(){if(!this.list.dragdrop){return false}else{return this.isFolder()}}};