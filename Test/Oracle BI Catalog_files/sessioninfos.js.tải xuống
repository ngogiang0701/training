if(!saw.session){saw.session=function(){};saw.session.resourceFile="common/saw.sessioninfos.xml";saw.session.SessionInfos=function(){var a=obips.getSingleton(saw.session.SessionInfos.SINGLETON_NAME);if(a){return a}this.user=new saw.session.User();this.privileges={};this.hasAlerts=false;this.hasCreatableItem=false;this.mostRecentLists=null;if(globalRegister){globalRegister.addObject(saw.session.SessionInfos.SINGLETON_NAME,this)}saw.session.SessionInfos._instance=this};saw.session.SessionInfos.SINGLETON_NAME="sessionInfos";saw.session.SessionInfos.prototype.getProperty=function(a){return obips.ResourceManager.getSingleton().getGDExpression(saw.session.resourceFile,a).value};saw.session.SessionInfos.SINGLE_TENANT="SingleTenant";saw.session.SessionInfos.MULTIPLE_TENANT="MultipleTenant";saw.session.SessionInfos.MULTIPLE_SERVICE_INSTANCE_BICS="MultipleServiceInstance";saw.session.SessionInfos.SINGLE_SERVICE_INSTANCE_12C="12cSingleServiceInstance";saw.session.SessionInfos.MULTIPLE_SERVICE_INSTANCE_12C="12cMultipleServiceInstance";saw.session.SessionInfos.prototype.isSingleTenantMode=function(){return(this.getTenancyMode()===saw.session.SessionInfos.SINGLE_TENANT)||(this.getTenancyMode()===saw.session.SessionInfos.SINGLE_SERVICE_INSTANCE_12C)};saw.session.SessionInfos.prototype.isMultitenantMode=function(){return this.getTenancyMode()===saw.session.SessionInfos.MULTIPLE_TENANT};saw.session.SessionInfos.prototype.isMultipleServiceInstanceMode=function(){return(this.getTenancyMode()===saw.session.SessionInfos.MULTIPLE_SERVICE_INSTANCE_BICS)||(this.getTenancyMode()===saw.session.SessionInfos.MULTIPLE_SERVICE_INSTANCE_12C)};saw.session.SessionInfos.prototype.isServiceInstanceMode=function(){return(this.getTenancyMode()===saw.session.SessionInfos.SINGLE_SERVICE_INSTANCE_12C)||this.isMultipleServiceInstanceMode()};saw.session.SessionInfos.prototype.is12cMode=function(){return(this.getTenancyMode()===saw.session.SessionInfos.SINGLE_SERVICE_INSTANCE_12C)||(this.getTenancyMode()===saw.session.SessionInfos.MULTIPLE_SERVICE_INSTANCE_12C)};saw.session.SessionInfos.prototype.getTenancyMode=function(){return this.getProperty("tenancyMode")};saw.session.SessionInfos.prototype.isEnableSection508=function(){return this.user.prefs.isSection508Enabled()};saw.session.SessionInfos.prototype.isScreenReaderMode=function(){return this.isEnableSection508()};saw.session.SessionInfos.prototype.isEnableCloudNewBieeHome=function(){return this.getProperty("cloudFuseHomeEnabled")};saw.session.SessionInfos.prototype.isCatalogSecurityAvailable=function(){return this.getProperty("isCatalogSecurityAvailable")};saw.session.SessionInfos.prototype.isPromptsAutoCompleteEnabled=function(){return this.user.prefs.isPromptsAutoCompleteEnabled()};saw.session.SessionInfos.prototype.isPromptsAutoCompletePreferenceLoaded=function(){return this.user.prefs.isPromptsAutoCompletePreferenceLoaded()};saw.session.SessionInfos.prototype.getUserSASortOrderPref=function(){return this.user.prefs.getUserSASortOrderPref()};saw.session.SessionInfos.prototype.getUserTZPreference=function(){return this.user.prefs.getUserTZPreference()};saw.session.SessionInfos.prototype.isUserTZPreferenceLoaded=function(){return this.user.prefs.isUserTZPreferenceLoaded()};saw.session.SessionInfos.prototype.loadUserPrefs=function(a){return this.user.prefs.loadUserPrefs(a)};saw.session.SessionInfos.prototype.getSyndicate=function(){return this.getProperty("syndicate")};saw.session.SessionInfos.prototype.setUserInfo=function(e,g,c,f,d,b,a){this.user.setInfo(e,g,c,f,d,b,a)};saw.session.SessionInfos.prototype.setMostRecentLists=function(a){this.mostRecentLists=new saw.session.MostRecentLists(a)};saw.session.SessionInfos.prototype.hasBrowsedBefore=function(b){var a=this.user.browseHistory;return a.hasBrowsedBefore(b)};saw.session.SessionInfos.prototype.markBrowsed=function(b){var a=this.user.browseHistory;a.setValue(b,"true");a.saveUserBrowseHistory(false)};saw.getSessionInfos=function(){return saw.session.SessionInfos._instance||new saw.session.SessionInfos()};saw.session.User=function(e,g,c,f,d,b,a){this.setInfo=function(l,n,j,m,k,i,h){this.guid=l;this.id=n;this.displayName=j;this.homeDir=m;this.actualUserId=k;this.actualUserDisplayName=i;this.isGlobalSystemUser=h};this.setInfo(e,g,c,f,d,b,a);this.prefs=new saw.session.UserPrefs();this.browseHistory=new saw.session.BrowseHistory()};saw.session.BrowseHistory=function(){this.browsedMap=new Object()};saw.session.BrowseHistory.prototype.hasBrowsedBefore=function(b){if(this.browsedMap.hasOwnProperty(b)){return this.browsedMap[b]}else{var a=[b];this.loadUserBrowseHistory(a,true);if(this.browsedMap[b]==="true"){return true}else{return false}}};saw.session.BrowseHistory.prototype.setValue=function(a,b){if(!saw.checkObjectReference(a)||!saw.checkObjectReference(b)){return}this.browsedMap[a]=b};saw.session.BrowseHistory.prototype.loadUserBrowseHistory=function(a,b){saw.session.loadUserBrowseHistory(a,this.loadUserBrowseHistoryHandler,null,this,b)};saw.session.BrowseHistory.prototype.saveUserBrowseHistory=function(a){saw.session.saveUserBrowseHistory(null,this,a)};saw.session.BrowseHistory.prototype.loadUserBrowseHistoryHandler=function(a){var c=a.getJSON();for(var b in c){if(c.hasOwnProperty(b)){if(c[b]===""){this.setValue(b,"false")}else{this.setValue(b,c[b])}}}};saw.session.BrowseHistory.prototype.saveUserBrowseHistoryHandler=function(a){};saw.session.UserPrefs=function(){this.userPrefsMap=new Object();this._bLoadedUserPrefs=false};saw.session.UserPrefs.prototype.isSection508Enabled=function(){return this.getValue("enableSection508",false)};saw.session.UserPrefs.prototype.isPromptsAutoCompleteEnabled=function(){return this.getValue("enablePromptsAutoComplete",false)};saw.session.UserPrefs.prototype.isPreferenceLoaded=function(a){var b=this.userPrefsMap[a];if(typeof(b)=="undefined"){return false}else{return true}};saw.session.UserPrefs.prototype.isPromptsAutoCompletePreferenceLoaded=function(){return this.isPreferenceLoaded("enablePromptsAutoComplete")};saw.session.UserPrefs.prototype.isUserTZPreferenceLoaded=function(){return this.isPreferenceLoaded("TimeZoneId")};saw.session.UserPrefs.prototype.getUserTZPreference=function(){return this.getValue("TimeZoneId",null)};saw.session.UserPrefs.prototype.getUserSASortOrderPref=function(){return this.getValue("subjectAreaSortOrder",null)};saw.session.UserPrefs.prototype.loadUserPrefs=function(b){if(!this._bLoadedUserPrefs){this._bLoadedUserPrefs=true;var a=["TimeZoneId","Locale","UILang","enableSection508","enablePromptsAutoComplete","answerDefaultTab","defaultAnalysisMode"];saw.session.loadUserPrefs(a,this.loadUserPrefsHandler,null,this,b)}};saw.session.UserPrefs.prototype.loadUserPrefsHandler=function(a){var b=a.getJSON();this.setValue("TimeZoneId",b.TimeZoneId);this.setValue("Locale",b.Locale);this.setValue("UILang",b.UILang);this.setValue("enableSection508",b.enableSection508);this.setValue("enablePromptsAutoComplete",b.enablePromptsAutoComplete);this.setValue("answerDefaultTab",b.answerDefaultTab);this.setValue("defaultAnalysisMode",b.defaultAnalysisMode)};saw.session.UserPrefs.prototype.showHiddenItems=function(){return this.getValue("Explorer/ShowHidden",false)};saw.session.UserPrefs.prototype.setValue=function(b,a){if(!saw.checkObjectReference(b)||!saw.checkObjectReference(a)){return}this.userPrefsMap[b]=a};saw.session.UserPrefs.prototype.getValue=function(b,a){if(typeof(saw)=="undefined"){return}var c=this.userPrefsMap[b];if(!saw.checkObjectReference(c)){return a}else{return c}};saw.session.Privileges=function(){this.isAdmin=false;this.canActAs=false;this.showHiddenItems=false;this.createFolders=false;this.personalStorage=false};saw.session.MostRecentLists=function(e){if(e){this.mostFrequentlyViewed=e.mostFrequentlyViewed?this._parseJsonList(e.mostFrequentlyViewed):[];var d=e.recent?this._parseJsonList(e.recent):[];this.recentItems=[];var f=function(j,h){for(var g=0;g<j.length;g++){if(j[g].path==h.path){return true}}return false};obips.Array.forEach(d,function(g){if(!f(this.recentItems,g)){this.recentItems.push(g)}},this);this.recentDashboards=[];obips.Array.forEach(this.recentItems,function(g){if(g.signature=="dashboardpageitem1"){this.recentDashboards.push(g)}},this);var b=[];obips.Array.forEach(this.recentItems,function(g){if(g.signature!="dashboardpageitem1"){b.push(g)}});this.recentNonDashboardItems=b;if(saw.getSessionInfos().isEnableSection508()){var c=[];obips.Array.forEach(this.mostFrequentlyViewed,function(g){if(saw.catalog.isVpatSupportedObject(g)){c.push(g)}});this.mostFrequentlyViewed=c}var a=[];obips.Array.forEach(this.mostFrequentlyViewed,function(g){if(g.signature!="dashboardpageitem1"){a.push(g)}});this.mostFrequentlyViewedNonDashbaordItems=a}else{this.mostFrequentlyViewed=[];this.recentItems=[];this.recentDashboards=[];this.recentNonDashboardItems=[];this.mostFrequentlyViewed=[];this.mostFrequentlyViewedNonDashbaordItems=[]}};saw.session.MostRecentLists.prototype._parseJsonList=function(a){return obips.Array.map(a,function(b){var c=obips.catalog.ItemInfo.parseJSON(b);c.timestamp=b.timestamp;return c})};saw.session.MostRecentLists.prototype.getRecentItems=function(a){return a?this.recentNonDashboardItems:this.recentItems};saw.session.MostRecentLists.prototype.getMostFrequentlyViewed=function(a){return a?this.mostFrequentlyViewedNonDashbaordItems:this.mostFrequentlyViewed};saw.session.MostRecentLists.prototype.getRecentDashboards=function(){return this.recentDashboards};saw.session.saveUserPrefs=function(a,e,c,d){var b=new saw.ajax.Request("saveUserPrefs",e?e:function(){},d);b.addArg("prefs",saw.json.toString(a));if(c){b.setFatalErrorHandler(c)}saw.ajax.createConnection(b).post()};saw.session.loadUserPrefs=function(b,g,d,f,e){var c=new saw.ajax.Request("loadUserPrefs",g?g:function(){},f);c.addArg("prefs",saw.json.toString(b));if(d){c.setFatalErrorHandler(d)}var h=saw.ajax.createConnection(c);if(e){h.setSync(true);var a=h.post();if(a.errors){c._handleErrors(a.errors)}else{c._callBack(a.response)}}else{h.post()}};saw.session.loadUserBrowseHistory=function(b,g,d,f,e){var c=new saw.ajax.Request("loadUserBrowseHistory",g?g:function(){},f);c.addArg("browsekeys",saw.json.toString(b));if(d){c.setFatalErrorHandler(d)}var h=saw.ajax.createConnection(c);if(e){h.setSync(true);var a=h.post();if(a.errors){c._handleErrors(a.errors)}else{c._callBack(a.response)}}else{h.post()}};saw.session.saveUserBrowseHistory=function(e,c,d){var b=new saw.ajax.Request("saveUserBrowseHistory",e?e:function(){},c);b.addArg("browsekeys",saw.json.toString(c.browsedMap));var f=saw.ajax.createConnection(b);if(d){f.setSync(true);var a=f.post();if(a.errors){b._handleErrors(a.errors)}else{b._callBack(a.response)}}else{f.post()}}};